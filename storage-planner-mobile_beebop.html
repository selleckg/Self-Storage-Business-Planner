<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Self-Storage Business Planner</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Nunito+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root {
  --green:      #58CC02;
  --green-dark: #46A302;
  --green-deep: #2A6B00;
  --green-bg:   #F0FDE4;
  --green-pale: #E0F8C8;
  --white:      #FFFFFF;
  --off-white:  #F7F7F7;
  --border:     #E5E5E5;
  --border-dark:#C8C8C8;
  --text:       #1C1C1C;
  --muted:      #777777;
  --muted2:     #AFAFAF;
  --blue:       #1CB0F6;
  --blue-dark:  #0E8FC0;
  --blue-pale:  #DFF4FF;
  --gold:       #FF9600;
  --gold-dark:  #CC7700;
  --gold-pale:  #FFF5E0;
  --red:        #FF4B4B;
  --red-pale:   #FFE8E8;
  --purple:     #CE82FF;
  --purple-pale:#F5E8FF;
  --shadow-btn: 0 4px 0 var(--green-dark);
  --shadow-card:0 2px 0 var(--border-dark);
  --radius-lg:  16px;
  --radius-md:  12px;
  --radius-sm:  8px;
  --radius-pill:100px;
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
  background: var(--off-white);
  color: var(--text);
  font-family: 'Nunito', sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
}

/* ===================== LOGO ANIMATION ===================== */
/* Car → Building → Money animated SVG */
@keyframes carDrive {
  0%   { transform: translateX(-80px); opacity:0; }
  15%  { opacity:1; }
  40%  { transform: translateX(0px); opacity:1; }
  55%  { transform: translateX(0px) scale(0.8); opacity:0.7; }
  70%  { transform: translateX(0px) scale(0); opacity:0; }
  100% { transform: translateX(0px) scale(0); opacity:0; }
}
@keyframes buildingAppear {
  0%,45%{ opacity:0; transform:scale(0.5); }
  60%   { opacity:1; transform:scale(1.15); }
  75%   { transform:scale(1); opacity:1; }
  85%   { opacity:1; }
  95%   { opacity:0; transform:scale(0.8); }
  100%  { opacity:0; }
}
@keyframes moneyAppear {
  0%,80% { opacity:0; transform:scale(0) rotate(-20deg); }
  90%    { opacity:1; transform:scale(1.2) rotate(5deg); }
  95%    { transform:scale(0.95) rotate(-2deg); }
  100%   { opacity:1; transform:scale(1) rotate(0deg); }
}
@keyframes coinSpin {
  0%  { transform:rotateY(0deg); }
  100%{ transform:rotateY(360deg); }
}
@keyframes bounce {
  0%,100%{ transform:translateY(0); }
  50%    { transform:translateY(-3px); }
}
@keyframes wiggle {
  0%,100%{ transform:rotate(0deg); }
  25%    { transform:rotate(-8deg); }
  75%    { transform:rotate(8deg); }
}
@keyframes sparkle {
  0%,100%{ opacity:0; transform:scale(0); }
  50%    { opacity:1; transform:scale(1); }
}

.logo-anim-wrap {
  width: 56px; height: 56px;
  position: relative;
  flex-shrink: 0;
}
.logo-anim-wrap svg {
  position: absolute; top:0; left:0;
  width:100%; height:100%;
}
.car-svg    { animation: carDrive 3.6s ease-in-out infinite; }
.build-svg  { animation: buildingAppear 3.6s ease-in-out infinite; }
.money-svg  { animation: moneyAppear 3.6s ease-in-out infinite; }
.money-svg .coin { animation: coinSpin 0.6s linear infinite; transform-origin:center; }

/* ===================== HEADER ===================== */
.header {
  background: var(--white);
  border-bottom: 2px solid var(--border);
  padding: 0 32px;
  height: 72px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: sticky; top:0; z-index:200;
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
}

.logo-block { display:flex; align-items:center; gap:14px; text-decoration:none; }
.logo-text  { display:flex; flex-direction:column; gap:0; }
.logo-name  {
  font-size: 22px; font-weight:900; color:var(--text);
  letter-spacing: -0.5px; line-height:1.1;
}
.logo-name span { color:var(--green); }
.logo-tag   { font-size: 11px; font-weight:700; color:var(--muted); letter-spacing:1.5px; text-transform:uppercase; }

.header-right { display:flex; align-items:center; gap:12px; }

/* XP streak badge */
.xp-badge {
  display:flex; align-items:center; gap:6px;
  background:var(--gold-pale); border:2px solid var(--gold);
  border-radius:var(--radius-pill); padding:6px 14px;
  font-weight:800; font-size:14px; color:var(--gold-dark);
  animation: bounce 2s ease-in-out infinite;
}
.streak-badge {
  display:flex; align-items:center; gap:6px;
  background:var(--green-bg); border:2px solid var(--green);
  border-radius:var(--radius-pill); padding:6px 14px;
  font-weight:800; font-size:14px; color:var(--green-dark);
}

/* ===================== STEPPER (step path style) ===================== */
.stepper-wrap {
  background: var(--white);
  border-bottom: 2px solid var(--border);
  padding: 0 32px;
  position: sticky;
  top: 72px;
  z-index: 199;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.stepper {
  display:flex; align-items:stretch;
  max-width: 1200px; margin: 0 auto;
}

.step {
  flex:1; display:flex; align-items:center; gap:10px;
  padding: 16px 12px 12px;
  cursor:pointer;
  border-bottom: 4px solid transparent;
  transition: all 0.2s;
  position: relative;
}
.step:hover:not(.locked) { background:var(--green-bg); }
.step.active { border-bottom-color: var(--green); }
.step.locked { opacity:0.4; cursor:not-allowed; }

.step-bubble {
  width:36px; height:36px; border-radius:50%;
  border:3px solid var(--border-dark);
  display:flex; align-items:center; justify-content:center;
  font-weight:900; font-size:15px; color:var(--muted);
  flex-shrink:0; transition:all 0.2s; background:var(--white);
}
.step.active .step-bubble {
  border-color:var(--green); background:var(--green); color:white;
  box-shadow: 0 3px 0 var(--green-dark);
  animation: bounce 1.5s ease-in-out infinite;
}
.step.done .step-bubble { border-color:var(--green); background:var(--green); color:white; }
.step-info { display:flex; flex-direction:column; gap:1px; }
.step-name { font-weight:800; font-size:13px; color:var(--muted); }
.step.active .step-name { color:var(--green-dark); }
.step.done  .step-name { color:var(--text); }
.step-desc  { font-size:10px; color:var(--muted2); font-weight:600; letter-spacing:0.5px; text-transform:uppercase; }

/* ===================== MAIN ===================== */
.main { max-width:1100px; margin:0 auto; padding:36px 32px 100px; }

/* ===================== CARD ===================== */
.card {
  background: var(--white);
  border: 2px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  margin-bottom: 24px;
  box-shadow: var(--shadow-card);
  transition: box-shadow 0.2s;
}
.card:hover { box-shadow: 0 4px 0 var(--border-dark); }

.card-header {
  padding: 20px 28px 16px;
  border-bottom: 2px solid var(--border);
  display:flex; align-items:center; justify-content:space-between;
  background: var(--white);
}
.card-title {
  font-size:20px; font-weight:900; color:var(--text);
  display:flex; align-items:center; gap:10px;
}
.card-title .chip {
  font-size:11px; font-weight:800; letter-spacing:1px; text-transform:uppercase;
  background:var(--green-bg); color:var(--green-dark);
  border:2px solid var(--green-pale); border-radius:var(--radius-pill);
  padding:3px 10px;
}
.card-body { padding:28px; }

/* ===================== SECTION HEADER ===================== */
.section-head {
  display:flex; align-items:center; gap:12px;
  margin-bottom:18px;
}
.section-head-line {
  font-size:13px; font-weight:900; color:var(--muted); text-transform:uppercase; letter-spacing:1.5px;
  white-space:nowrap;
}
.section-head::after {
  content:''; flex:1; height:2px; background:var(--border); border-radius:2px;
}

/* ===================== FORM ELEMENTS ===================== */
.form-grid { display:grid; gap:16px; }
.grid-2 { grid-template-columns:repeat(2,1fr); }
.grid-3 { grid-template-columns:repeat(3,1fr); }
.grid-4 { grid-template-columns:repeat(4,1fr); }
.col-2  { grid-column:span 2; }
.col-3  { grid-column:span 3; }

.form-group { display:flex; flex-direction:column; gap:7px; }

.form-label {
  font-size:13px; font-weight:800; color:var(--text);
  display:flex; align-items:center; gap:6px;
}
.form-label .opt { font-weight:600; color:var(--muted2); font-size:11px; }

.form-input, .form-select {
  background:var(--white);
  border:2px solid var(--border-dark);
  border-radius:var(--radius-md);
  color:var(--text);
  padding:12px 16px;
  font-family:'Nunito',sans-serif;
  font-size:15px; font-weight:600;
  outline:none;
  transition:border-color 0.15s, box-shadow 0.15s;
  width:100%;
  box-shadow: 0 2px 0 var(--border);
}
.form-input:focus, .form-select:focus {
  border-color:var(--blue);
  box-shadow: 0 2px 0 var(--blue-dark), 0 0 0 3px rgba(28,176,246,0.15);
}
.form-input::placeholder { color:var(--muted2); font-weight:600; }

.input-pfx { position:relative; }
.pfx-sym {
  position:absolute; left:14px; top:50%; transform:translateY(-50%);
  font-weight:800; color:var(--muted); font-size:16px; pointer-events:none;
}
.pfx-sym + .form-input { padding-left:28px; }

/* ===================== RANGE ===================== */
.range-group { display:flex; flex-direction:column; gap:8px; }
.range-vals  { display:flex; justify-content:space-between; align-items:center; }
.range-cur   { font-size:22px; font-weight:900; color:var(--green); }
.range-ends  { font-size:12px; font-weight:700; color:var(--muted2); }
input[type="range"] {
  width:100%; accent-color:var(--green);
  height:6px; border-radius:3px; background:var(--border); cursor:pointer;
}

/* ===================== CREDIT SCORE ===================== */
.score-card {
  background:var(--off-white); border:2px solid var(--border);
  border-radius:var(--radius-md); padding:16px; display:flex; flex-direction:column; gap:8px;
}
.score-num  { font-size:36px; font-weight:900; color:var(--green); line-height:1; }
.score-lbl  { font-size:13px; font-weight:700; color:var(--muted); }
.score-track{ height:10px; background:var(--border); border-radius:5px; overflow:hidden; }
.score-fill {
  height:100%; border-radius:5px; transition:width 0.5s ease;
  background:linear-gradient(90deg, #FF4B4B 0%, #FF9600 30%, #58CC02 60%, #1CB0F6 100%);
  clip-path:inset(0 calc(100% - var(--pct)) 0 0);
}
.score-ticks{ display:flex; justify-content:space-between; font-size:9px; font-weight:700; color:var(--muted2); }

/* ===================== FIN SUMMARY ===================== */
.fin-row {
  display:grid; grid-template-columns:repeat(4,1fr);
  gap:1px; background:var(--border);
  border:2px solid var(--border); border-radius:var(--radius-md); overflow:hidden; margin-top:16px;
}
.fin-cell { background:var(--white); padding:14px 16px; }
.fin-lbl  { font-size:11px; font-weight:800; text-transform:uppercase; letter-spacing:1px; color:var(--muted2); margin-bottom:4px; }
.fin-val  { font-size:22px; font-weight:900; color:var(--green); }
.fin-sub  { font-size:11px; font-weight:600; color:var(--muted2); margin-top:2px; }

/* ===================== SCALE CARDS ===================== */
.scale-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:12px; }

.scale-card {
  background:var(--white); border:3px solid var(--border);
  border-radius:var(--radius-lg); padding:18px 14px; cursor:pointer;
  transition:all 0.15s; display:flex; flex-direction:column; gap:7px;
  box-shadow: 0 3px 0 var(--border); position:relative; overflow:hidden;
}
.scale-card:hover { border-color:var(--green); transform:translateY(-2px); box-shadow:0 5px 0 var(--green-dark); }
.scale-card.sel {
  border-color:var(--green); background:var(--green-bg);
  box-shadow:0 4px 0 var(--green-dark);
}
.scale-card.sel::after {
  content:'✓'; position:absolute; top:10px; right:12px;
  width:22px; height:22px; background:var(--green); color:white;
  border-radius:50%; display:flex; align-items:center; justify-content:center;
  font-size:13px; font-weight:900; line-height:22px; text-align:center;
}
.sc-icon { font-size:30px; }
.sc-name { font-size:16px; font-weight:900; color:var(--text); }
.sc-range{ font-size:12px; font-weight:700; color:var(--green-dark); }
.sc-desc { font-size:12px; font-weight:600; color:var(--muted); line-height:1.4; }

/* ===================== TOGGLE ===================== */
.toggle-row { display:flex; align-items:center; gap:12px; }
.toggle {
  width:48px; height:28px; background:var(--border-dark);
  border-radius:14px; cursor:pointer; position:relative; transition:background 0.2s;
  border:2px solid var(--border-dark); flex-shrink:0;
}
.toggle.on { background:var(--green); border-color:var(--green-dark); }
.toggle::after {
  content:''; position:absolute; left:2px; top:2px;
  width:20px; height:20px; background:white; border-radius:50%;
  box-shadow:0 2px 4px rgba(0,0,0,0.2); transition:left 0.2s;
}
.toggle.on::after { left:22px; }
.toggle-label { font-size:15px; font-weight:700; }

/* ===================== PHASE ===================== */
.phase-list { border:2px solid var(--border); border-radius:var(--radius-md); overflow:hidden; }
.phase-row  {
  display:flex; align-items:center; gap:14px; padding:14px 18px;
  border-bottom:1px solid var(--border); transition:background 0.15s;
}
.phase-row:last-child { border-bottom:none; }
.phase-row.active { background:var(--green-bg); }
.phase-dot  {
  width:32px; height:32px; border-radius:50%; background:var(--border);
  display:flex; align-items:center; justify-content:center;
  font-weight:900; font-size:15px; color:var(--muted); flex-shrink:0;
}
.phase-row.active .phase-dot { background:var(--green); color:white; box-shadow:0 3px 0 var(--green-dark); }
.phase-info  { flex:1; }
.phase-title { font-size:14px; font-weight:800; }
.phase-desc  { font-size:12px; font-weight:600; color:var(--muted); margin-top:2px; }

/* ===================== CHECKBOXES ===================== */
.cb-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; }

.cb-item {
  display:flex; align-items:center; gap:10px;
  background:var(--white); border:2px solid var(--border);
  border-radius:var(--radius-md); padding:12px 14px; cursor:pointer;
  transition:all 0.15s; user-select:none;
  box-shadow:0 2px 0 var(--border);
}
.cb-item:hover { border-color:var(--green); transform:translateY(-1px); }
.cb-item.on { border-color:var(--green); background:var(--green-bg); box-shadow:0 2px 0 var(--green-dark); }

.cb-box {
  width:22px; height:22px; border:3px solid var(--border-dark); border-radius:6px;
  flex-shrink:0; display:flex; align-items:center; justify-content:center;
  font-size:13px; font-weight:900; color:transparent; transition:all 0.15s;
}
.cb-item.on .cb-box { border-color:var(--green); background:var(--green); color:white; }
.cb-txt  { font-size:13px; font-weight:800; color:var(--text); line-height:1.3; }
.cb-sub  { font-size:11px; font-weight:600; color:var(--muted2); margin-top:1px; }

/* ===================== RADIUS VISUAL ===================== */
.zip-grid { display:grid; grid-template-columns:1fr 2fr; gap:24px; align-items:start; }
.radius-box {
  position:relative; background:var(--green-bg);
  border:2px solid var(--green-pale); border-radius:var(--radius-md);
  height:160px; display:flex; align-items:center; justify-content:center; overflow:hidden;
}
.r-ring { position:absolute; border-radius:50%; border:2px dashed rgba(88,204,2,0.3); }
.r-dot  { width:12px; height:12px; background:var(--green); border-radius:50%; box-shadow:0 0 0 4px rgba(88,204,2,0.2); z-index:2; }
.r-label{ position:absolute; bottom:8px; right:10px; font-size:12px; font-weight:800; color:var(--green-dark); }

/* ===================== BANNERS ===================== */
.banner {
  display:flex; align-items:flex-start; gap:12px;
  border-radius:var(--radius-md); padding:14px 18px; margin-bottom:18px;
  font-size:13px; font-weight:600; line-height:1.6;
}
.banner-info    { background:var(--blue-pale); border:2px solid #AADBF5; color:#0B6E9B; }
.banner-warning { background:#FFF8E0; border:2px solid #FFD966; color:#7A5E00; }
.banner-green   { background:var(--green-bg); border:2px solid var(--green-pale); color:var(--green-deep); }
.banner-icon    { font-size:20px; flex-shrink:0; margin-top:1px; }

/* ===================== REVIEW SECTIONS ===================== */
.review-block { border:2px solid var(--border); border-radius:var(--radius-md); overflow:hidden; margin-bottom:16px; box-shadow:0 2px 0 var(--border); }
.review-hd    { display:flex; align-items:center; justify-content:space-between; padding:12px 20px; border-bottom:1px solid var(--border); background:var(--off-white); }
.review-title { font-size:14px; font-weight:900; text-transform:uppercase; letter-spacing:1px; color:var(--muted); }
.review-bd    { padding:18px 20px; }
.review-grid  { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
.rv-item      { display:flex; flex-direction:column; gap:3px; }
.rv-key       { font-size:11px; font-weight:800; text-transform:uppercase; letter-spacing:1px; color:var(--muted2); }
.rv-val       { font-size:14px; font-weight:800; color:var(--text); }
.rv-val.money { color:var(--green-dark); font-size:16px; }
.rv-val.na    { color:var(--muted2); font-weight:600; font-style:italic; font-size:12px; }
.rv-val.big   { font-size:26px; color:var(--green); }
.tag-row      { display:flex; flex-wrap:wrap; gap:6px; margin-top:6px; }
.tag {
  font-size:12px; font-weight:700; padding:4px 10px; border-radius:var(--radius-pill);
  border:2px solid var(--green-pale); background:var(--green-bg); color:var(--green-dark);
}
.tag.blue   { background:var(--blue-pale); border-color:#AADBF5; color:#0B6E9B; }
.tag.purple { background:var(--purple-pale); border-color:#D9AAFF; color:#7730AA; }

/* ===================== BUTTONS ===================== */
.btn {
  font-family:'Nunito',sans-serif;
  font-size:15px; font-weight:900; letter-spacing:0.5px;
  padding:13px 28px; border-radius:var(--radius-pill);
  border:2px solid transparent; cursor:pointer;
  transition:all 0.1s; display:inline-flex; align-items:center; gap:8px;
  text-decoration:none;
}
.btn:active { transform:translateY(2px); }

.btn-primary {
  background:var(--green); color:white;
  border-color:var(--green-dark);
  box-shadow: var(--shadow-btn);
}
.btn-primary:hover { background:var(--green-dark); }
.btn-primary:active { box-shadow:none; }

.btn-secondary {
  background:var(--white); color:var(--text);
  border-color:var(--border-dark);
  box-shadow: 0 4px 0 var(--border-dark);
}
.btn-secondary:hover { background:var(--off-white); }
.btn-secondary:active { box-shadow:none; }

.btn-blue {
  background:var(--blue); color:white;
  border-color:var(--blue-dark);
  box-shadow: 0 4px 0 var(--blue-dark);
}
.btn-blue:hover { background:var(--blue-dark); }
.btn-blue:active { box-shadow:none; }

.btn-ghost {
  background:transparent; color:var(--muted);
  border-color:var(--border-dark);
}
.btn-ghost:hover { background:var(--off-white); color:var(--text); }

.btn-danger {
  background:var(--red-pale); color:var(--red);
  border-color:#FFAAAA;
  box-shadow: 0 4px 0 #FFAAAA;
}

.btn-row { display:flex; justify-content:flex-end; gap:12px; padding-top:22px; border-top:2px solid var(--border); margin-top:24px; }

/* ===================== PROGRESS / SCAN ===================== */
.scan-progress {
  background:var(--green-bg); border:2px solid var(--green-pale);
  border-radius:var(--radius-lg); padding:22px 26px; margin-bottom:20px;
}
.scan-title { font-size:18px; font-weight:900; margin-bottom:14px; display:flex; align-items:center; gap:10px; }
.progress-track { height:12px; background:var(--border); border-radius:6px; overflow:hidden; margin-bottom:12px; }
.progress-fill  { height:100%; border-radius:6px; transition:width 0.5s ease; background:var(--green); }
.scan-status    { font-size:13px; font-weight:700; color:var(--green-dark); }

.scan-list { display:flex; flex-direction:column; gap:8px; margin-top:14px; }
.scan-row  { display:flex; align-items:center; gap:10px; font-size:14px; font-weight:600; color:var(--muted); }
.scan-dot  { width:10px; height:10px; border-radius:50%; flex-shrink:0; }
.scan-dot.done    { background:var(--green); }
.scan-dot.running {
  background:var(--green);
  animation: pulse 0.8s ease-in-out infinite;
}
@keyframes pulse {
  0%,100%{ box-shadow:0 0 0 0 rgba(88,204,2,0.5); }
  50%    { box-shadow:0 0 0 5px rgba(88,204,2,0); }
}
.scan-dot.waiting { background:var(--border-dark); }
.scan-row.done-row { color:var(--text); }

/* ===================== DATA CARDS ===================== */
.stat-row { display:grid; grid-template-columns:repeat(4,1fr); gap:16px; margin-bottom:24px; }

.stat-card {
  background:var(--white); border:2px solid var(--border);
  border-radius:var(--radius-lg); padding:18px 20px;
  box-shadow:0 3px 0 var(--border); transition:all 0.15s;
}
.stat-card:hover { transform:translateY(-2px); box-shadow:0 5px 0 var(--border-dark); }
.stat-lbl  { font-size:12px; font-weight:800; text-transform:uppercase; letter-spacing:1px; color:var(--muted2); margin-bottom:6px; }
.stat-val  { font-size:32px; font-weight:900; color:var(--green); line-height:1; }
.stat-sub  { font-size:12px; font-weight:600; color:var(--muted2); margin-top:4px; }
.stat-icon { font-size:22px; float:right; opacity:0.3; margin-top:-28px; }

/* ===================== TABLE ===================== */
.tbl-wrap { overflow-x:auto; border:2px solid var(--border); border-radius:var(--radius-md); margin-bottom:24px; }
table.tbl  { width:100%; border-collapse:collapse; font-size:12px; min-width:1400px; }
table.tbl thead tr { background:var(--off-white); border-bottom:2px solid var(--border); }
table.tbl thead th {
  padding:10px 9px; text-align:left;
  font-size:11px; font-weight:900; letter-spacing:1px; text-transform:uppercase; color:var(--muted);
  border-right:1px solid var(--border); white-space:nowrap;
}
table.tbl thead th.grp {
  text-align:center; background:var(--green-bg); color:var(--green-dark);
  border-bottom:2px solid var(--green-pale);
}
table.tbl thead th:last-child { border-right:none; }
table.tbl tbody tr { border-bottom:1px solid var(--border); transition:background 0.1s; }
table.tbl tbody tr:hover { background:var(--off-white); }
table.tbl tbody tr:last-child { border-bottom:none; }
table.tbl tbody td { padding:12px 9px; border-right:1px solid var(--border); vertical-align:middle; }
table.tbl tbody td:last-child { border-right:none; }

.biz-name  { font-weight:900; font-size:13px; color:var(--text); line-height:1.2; }
.biz-owner { font-size:11px; font-weight:700; color:var(--green-dark); margin-top:2px; }
.biz-addr  { font-size:10px; font-weight:600; color:var(--muted2); margin-top:1px; }
.biz-rating{ font-size:11px; font-weight:700; color:var(--gold-dark); margin-top:3px; }
.biz-phone { font-size:11px; font-weight:800; color:var(--blue-dark); margin-top:3px; }
.price-cell{ font-size:12px; font-weight:800; color:var(--green-dark); text-align:center; }
.price-cell.na { color:var(--muted2); font-size:10px; font-weight:600; text-align:center; }
.val-cell  { font-size:12px; font-weight:700; color:var(--text); }
.val-cell.lo{ color:var(--muted2); }

.badge-pill {
  display:inline-flex; align-items:center;
  font-size:10px; font-weight:800; letter-spacing:0.5px; text-transform:uppercase;
  padding:3px 8px; border-radius:var(--radius-pill); border:2px solid; white-space:nowrap;
}
.badge-pub  { color:var(--blue-dark); background:var(--blue-pale); border-color:#AADBF5; }
.badge-priv { color:var(--green-dark); background:var(--green-bg); border-color:var(--green-pale); }
.badge-govt { color:#7730AA; background:var(--purple-pale); border-color:#D9AAFF; }

/* ===================== GAP ANALYSIS ===================== */
.gap-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:14px; margin-top:16px; }

.gap-card {
  background:var(--white); border:2px solid var(--border);
  border-radius:var(--radius-md); padding:16px;
  box-shadow:0 2px 0 var(--border); transition:all 0.15s;
}
.gap-card:hover { transform:translateY(-1px); box-shadow:0 4px 0 var(--border-dark); }
.gap-card.hot { border-color:var(--green); background:var(--green-bg); box-shadow:0 3px 0 var(--green-dark); }
.gap-title { font-size:14px; font-weight:900; margin-bottom:8px; display:flex; align-items:center; justify-content:space-between; }
.hot-chip  { background:var(--green); color:white; font-size:10px; font-weight:900; letter-spacing:1px; padding:2px 8px; border-radius:var(--radius-pill); }
.gap-stat  { font-size:12px; font-weight:600; color:var(--muted); margin-bottom:3px; }
.gap-stat b{ color:var(--text); font-weight:800; }
.opp-track { height:6px; background:var(--border); border-radius:3px; overflow:hidden; margin-top:6px; }
.opp-fill  { height:100%; border-radius:3px; }
.opp-fill.hi  { background:var(--green); }
.opp-fill.med { background:var(--gold); }
.opp-fill.lo  { background:var(--red); }

/* ===================== BROKERS / BUILDERS ===================== */
.broker-tbl { width:100%; border-collapse:collapse; font-size:13px; }
.broker-tbl th {
  padding:10px 16px; background:var(--off-white); font-size:11px; font-weight:900;
  letter-spacing:1.5px; text-transform:uppercase; color:var(--muted);
  text-align:left; border-bottom:2px solid var(--border);
}
.broker-tbl td { padding:13px 16px; border-bottom:1px solid var(--border); vertical-align:middle; }
.broker-tbl tr:last-child td { border-bottom:none; }
.broker-tbl tr:hover td { background:var(--off-white); }
.broker-name { font-weight:900; font-size:14px; }
.broker-rate { font-weight:900; color:var(--green-dark); font-size:15px; }
.broker-ph   { font-weight:800; color:var(--blue-dark); font-size:13px; }
.broker-addr { font-size:11px; font-weight:600; color:var(--muted); margin-top:2px; }
.usda-row td { background:rgba(88,204,2,0.04); }
.usda-row:hover td { background:rgba(88,204,2,0.08) !important; }

/* Builder cards */
.builder-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin-bottom:28px; }
.builder-card {
  background:var(--white); border:2px solid var(--border);
  border-radius:var(--radius-lg); overflow:hidden;
  box-shadow:0 3px 0 var(--border); transition:all 0.15s;
}
.builder-card:hover { transform:translateY(-2px); box-shadow:0 5px 0 var(--border-dark); }
.builder-card.top { border-color:var(--green); box-shadow:0 4px 0 var(--green-dark); }
.bc-head {
  padding:16px 18px; border-bottom:2px solid var(--border);
  display:flex; align-items:flex-start; justify-content:space-between; gap:8px;
}
.bc-name { font-size:17px; font-weight:900; color:var(--text); }
.bc-loc  { font-size:11px; font-weight:700; color:var(--muted2); margin-top:2px; }
.rank-badge {
  font-size:11px; font-weight:900; letter-spacing:0.5px; text-transform:uppercase;
  padding:4px 10px; border-radius:var(--radius-pill); white-space:nowrap; flex-shrink:0;
}
.rank-1 { background:var(--green); color:white; box-shadow:0 2px 0 var(--green-dark); }
.rank-2 { background:var(--blue); color:white; box-shadow:0 2px 0 var(--blue-dark); }
.rank-3 { background:var(--gold); color:white; box-shadow:0 2px 0 var(--gold-dark); }
.bc-body { padding:16px 18px; }
.bc-stat { font-size:12px; font-weight:600; color:var(--muted); margin-bottom:4px; }
.bc-stat b{ color:var(--text); font-weight:800; }
.bc-tags { display:flex; flex-wrap:wrap; gap:5px; margin:10px 0; }
.bc-tag  { font-size:11px; font-weight:700; padding:3px 9px; border-radius:var(--radius-pill); background:var(--off-white); border:2px solid var(--border); color:var(--muted); }
.bc-why  { background:var(--off-white); border-radius:var(--radius-sm); padding:10px 12px; font-size:12px; font-weight:600; color:var(--text); line-height:1.5; margin-top:10px; }
.bc-contact { padding:14px 18px; border-top:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; background:var(--off-white); }
.bc-ph { font-size:14px; font-weight:900; color:var(--blue-dark); }
.bc-web{ font-size:12px; font-weight:700; color:var(--muted); }

/* Turnkey 2-col */
.turnkey-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:20px; }
.tk-card {
  background:var(--white); border:2px solid var(--border);
  border-radius:var(--radius-lg); overflow:hidden;
  box-shadow:0 3px 0 var(--border);
}
.tk-head {
  padding:18px 20px; border-bottom:2px solid var(--border);
  background: linear-gradient(135deg, var(--green-bg), var(--white));
  display:flex; align-items:center; justify-content:space-between; gap:10px;
}
.tk-name  { font-size:22px; font-weight:900; color:var(--text); }
.tk-award { font-size:11px; font-weight:900; background:var(--green); color:white; padding:4px 10px; border-radius:var(--radius-pill); box-shadow:0 2px 0 var(--green-dark); }
.tk-body  { padding:20px; }
.tk-grid  { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:14px; }
.tk-kv    { display:flex; flex-direction:column; gap:3px; }
.tk-k     { font-size:10px; font-weight:900; text-transform:uppercase; letter-spacing:1px; color:var(--muted2); }
.tk-v     { font-size:14px; font-weight:800; color:var(--text); }
.tk-how   { background:var(--green-bg); border:2px solid var(--green-pale); border-radius:var(--radius-md); padding:12px; font-size:13px; font-weight:600; color:var(--green-deep); line-height:1.6; margin-bottom:14px; }
.tk-foot  { padding:14px 20px; border-top:2px solid var(--border); background:var(--off-white); display:flex; justify-content:space-between; align-items:center; }
.tk-ph    { font-size:16px; font-weight:900; color:var(--blue-dark); }
.tk-web   { font-size:13px; font-weight:700; color:var(--muted); }

/* ===================== FOOTER BAR ===================== */
.footer-bar {
  position:fixed; bottom:0; left:0; right:0; z-index:100;
  background:var(--white); border-top:2px solid var(--border);
  padding:14px 32px;
  display:flex; align-items:center; justify-content:space-between;
  box-shadow: 0 -2px 12px rgba(0,0,0,0.08);
}
.footer-step { display:flex; flex-direction:column; gap:2px; }
.footer-name { font-size:16px; font-weight:900; color:var(--text); }
.footer-desc { font-size:12px; font-weight:600; color:var(--muted2); }
.footer-btns { display:flex; gap:12px; }

/* ===================== VIEW MANAGEMENT ===================== */
.view { display:none; }
.view.active { display:block; }

/* ===================== PLACEHOLDER STEPS ===================== */
.placeholder-body { text-align:center; padding:60px 40px; }
.placeholder-icon { font-size:72px; margin-bottom:18px; animation:bounce 2s ease-in-out infinite; display:block; }
.placeholder-h  { font-size:32px; font-weight:900; margin-bottom:10px; }
.placeholder-p  { font-size:16px; font-weight:600; color:var(--muted); max-width:480px; margin:0 auto 28px; line-height:1.6; }


/* ===================== SITE SELECTION ===================== */
.site-entry-card {
  background:var(--white); border:2px solid var(--border);
  border-radius:var(--radius-lg); overflow:hidden;
  box-shadow:0 3px 0 var(--border); transition:all 0.15s;
}
.site-entry-card:hover { box-shadow:0 5px 0 var(--border-dark); }
.site-entry-head {
  display:flex; align-items:center; justify-content:space-between;
  padding:16px 20px; border-bottom:2px solid var(--border);
  background:var(--off-white); gap:12px;
}
.site-entry-body { padding:20px; }
.site-num {
  width:34px; height:34px; border-radius:50%;
  background:var(--green); color:white; font-weight:900; font-size:16px;
  display:flex; align-items:center; justify-content:center;
  flex-shrink:0; box-shadow:0 3px 0 var(--green-dark);
}
.site-score-badge {
  font-size:20px; font-weight:900; color:var(--green-dark);
  background:var(--green-bg); border:2px solid var(--green-pale);
  border-radius:var(--radius-pill); padding:6px 18px; min-width:80px; text-align:center;
}
.site-criteria-grid {
  display:grid; grid-template-columns:1fr 1fr; gap:10px;
}
.sc-row {
  display:flex; align-items:center; gap:8px;
  background:var(--off-white); border-radius:var(--radius-sm); padding:8px 12px;
}
.sc-row.col-2 { grid-column:span 2; }
.sc-lbl { font-size:12px; font-weight:800; color:var(--muted); white-space:nowrap; min-width:130px; }
.sc-inp { flex:1; padding:7px 10px !important; font-size:13px !important; min-width:0; }
.sc-unit { font-size:11px; font-weight:700; color:var(--muted2); white-space:nowrap; }


/* ===================== RESOURCES PAGE ===================== */
.res-tab {
  font-family:'Nunito',sans-serif; font-size:13px; font-weight:800;
  padding:8px 16px; border-radius:var(--radius-pill);
  border:2px solid var(--border-dark); background:var(--white);
  color:var(--muted); cursor:pointer; transition:all 0.15s;
  box-shadow:0 2px 0 var(--border);
}
.res-tab:hover { border-color:var(--green); color:var(--green-dark); background:var(--green-bg); }
.res-tab.active { background:var(--green); color:white; border-color:var(--green-dark); box-shadow:0 3px 0 var(--green-dark); }

.res-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; }

.res-card {
  background:var(--white); border:2px solid var(--border);
  border-radius:var(--radius-md); padding:16px 18px;
  display:flex; gap:14px; align-items:flex-start;
  box-shadow:0 2px 0 var(--border); transition:all 0.15s;
}
.res-card:hover { transform:translateY(-1px); box-shadow:0 4px 0 var(--border-dark); border-color:var(--green-pale); }
.res-card[style*="display:none"] { display:none !important; }

.res-icon {
  width:40px; height:40px; border-radius:var(--radius-sm);
  background:var(--green-bg); border:2px solid var(--green-pale);
  display:flex; align-items:center; justify-content:center;
  font-size:20px; flex-shrink:0;
}
.res-icon.yt {
  background:#FF0000; color:white; font-size:16px; font-weight:900;
  border-color:#CC0000; border-radius:8px;
}

.res-body { flex:1; min-width:0; }
.res-name { font-size:15px; font-weight:900; color:var(--text); margin-bottom:3px; line-height:1.3; }
.res-url  { font-size:12px; font-weight:700; margin-bottom:6px; }
.res-url a { color:var(--blue-dark); text-decoration:none; }
.res-url a:hover { text-decoration:underline; }
.res-desc { font-size:12px; font-weight:600; color:var(--muted); line-height:1.6; margin-bottom:8px; }
.res-tags { display:flex; flex-wrap:wrap; gap:5px; }
.res-tag  { font-size:10px; font-weight:800; letter-spacing:0.5px; text-transform:uppercase; padding:3px 8px; border-radius:var(--radius-pill); background:var(--off-white); border:2px solid var(--border); color:var(--muted); }
.res-tag.industry { background:var(--blue-pale); border-color:#AADBF5; color:var(--blue-dark); }
.res-tag.investing { background:var(--green-bg); border-color:var(--green-pale); color:var(--green-dark); }
.res-tag.data      { background:var(--gold-pale); border-color:#FFD966; color:var(--gold-dark); }
.res-tag.software  { background:var(--purple-pale); border-color:#D9AAFF; color:#7730AA; }
.res-tag.build     { background:var(--red-pale); border-color:#FFAAAA; color:var(--red); }
.res-tag.yt-tag    { background:#FFF0F0; border-color:#FFCCCC; color:#CC0000; }

/* ===================== SCROLLBAR ===================== */
::-webkit-scrollbar { width:6px; height:6px; }
::-webkit-scrollbar-track { background:var(--off-white); }
::-webkit-scrollbar-thumb { background:var(--border-dark); border-radius:3px; }

/* ===================== DON KNOTTS CAR AVATAR ===================== */

/* Explosion burst rings */
.burst-ring {
  position:absolute;
  border-radius:50%;
  border:4px solid var(--green);
  opacity:0;
  pointer-events:none;
}

@keyframes burstExpand {
  0%   { transform:scale(0); opacity:0.9; border-color:#FFFF00; }
  30%  { opacity:0.7; border-color:#FF9600; }
  70%  { opacity:0.3; border-color:var(--green); }
  100% { transform:scale(6); opacity:0; }
}
@keyframes cardIn {
  0%   { transform:translate(-50%,-50%) scale(0) rotate(-12deg); opacity:0; }
  60%  { transform:translate(-50%,-50%) scale(1.12) rotate(3deg); opacity:1; }
  80%  { transform:translate(-50%,-50%) scale(0.96) rotate(-1deg); }
  100% { transform:translate(-50%,-50%) scale(1) rotate(0deg); opacity:1; }
}
@keyframes cardOut {
  0%   { transform:translate(-50%,-50%) scale(1); opacity:1; }
  100% { transform:translate(-50%,-50%) scale(0.5) translateY(60px); opacity:0; }
}
@keyframes waveHand {
  0%,100% { transform:rotate(0deg); }
  20%     { transform:rotate(-22deg); }
  50%     { transform:rotate(18deg); }
  75%     { transform:rotate(-15deg); }
}
@keyframes starSpin {
  0%   { transform:rotate(0deg) scale(1); opacity:1; }
  50%  { transform:rotate(180deg) scale(1.4); opacity:0.7; }
  100% { transform:rotate(360deg) scale(1); opacity:1; }
}
@keyframes bubbleIn {
  0%   { opacity:0; transform:scale(0.5) translateY(8px); }
  70%  { transform:scale(1.05) translateY(-2px); }
  100% { opacity:1; transform:scale(1) translateY(0); }
}
@keyframes confettiFall {
  0%   { transform:translateY(-20px) rotate(0deg); opacity:1; }
  100% { transform:translateY(110vh) rotate(720deg); opacity:0; }
}
@keyframes overlayFlash {
  0%   { background:rgba(255,255,100,0.5); }
  15%  { background:rgba(255,200,0,0.3); }
  40%  { background:rgba(88,204,2,0.15); }
  100% { background:rgba(0,0,0,0.45); }
}
@keyframes carBounce {
  0%,100% { transform:translateY(0); }
  50%     { transform:translateY(-6px); }
}

#donKnottsOverlay.active {
  animation: overlayFlash 0.5s ease forwards;
  background: rgba(0,0,0,0.45);
  pointer-events: all;
}
#donCard.animate-in {
  animation: cardIn 0.55s cubic-bezier(0.175,0.885,0.32,1.275) forwards;
}
#donCard.animate-out {
  animation: cardOut 0.35s ease-in forwards;
}
#donCarSvg.bouncing {
  animation: carBounce 0.6s ease-in-out infinite;
}
#waveArm.waving {
  animation: waveHand 0.5s ease-in-out infinite;
}
#speechBubble.visible {
  animation: bubbleIn 0.4s cubic-bezier(0.175,0.885,0.32,1.275) 0.3s both;
}
#donSubText.visible {
  animation: bubbleIn 0.3s ease 1.2s both;
}
#star1.spinning { animation: starSpin 1.2s linear infinite; transform-origin: 81px 30px; }
#star2.spinning { animation: starSpin 0.9s linear infinite reverse; transform-origin: 122px 28px; }
#star3.spinning { animation: starSpin 1.5s linear infinite; transform-origin: 132px 47px; }

.confetti-piece {
  position: absolute;
  width: 10px;
  height: 10px;
  border-radius: 2px;
  animation: confettiFall linear forwards;
  pointer-events: none;
}

/* ===================== MOBILE RESPONSIVE ===================== */

/* Ensure body never clips content horizontally — scrollable containers handle overflow */
body { overflow-x: hidden; }

/* Utility: any wide container that should scroll horizontally on mobile */
.mobile-scroll-x {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

@media (max-width: 768px) {

  /* ---- HEADER ---- */
  .header { padding: 0 14px; height: 58px; }
  .logo-anim-wrap { width: 36px; height: 36px; }
  .logo-name { font-size: 15px; }
  .logo-tag { display: none; }
  .logo-block { gap: 8px; }
  .header-right { gap: 6px; }
  .xp-badge { display: none; }  /* hide fire badge on mobile to save space */
  .streak-badge { padding: 5px 10px; font-size: 12px; }

  /* ---- STEPPER ---- */
  .stepper-wrap { padding: 0; top: 58px; overflow-x: auto; -webkit-overflow-scrolling: touch; }
  .stepper { min-width: max-content; }
  .step { padding: 10px 10px 8px; gap: 6px; min-width: 72px; }
  .step-bubble { width: 28px; height: 28px; font-size: 12px; }
  .step-name { font-size: 11px; }
  .step-desc { display: none; }

  /* ---- MAIN CONTENT AREA ---- */
  .main { padding: 18px 12px 110px; }

  /* ---- CARDS ---- */
  .card { margin-bottom: 16px; }
  .card-header { padding: 12px 14px 10px; flex-wrap: wrap; gap: 6px; }
  .card-title { font-size: 15px; gap: 7px; }
  .card-title .chip { font-size: 9px; padding: 2px 8px; }
  .card-body { padding: 14px; }

  /* ---- BANNERS — fix overlap/runoff ---- */
  /* Banners flex but allow the text side to shrink and wrap */
  .banner {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    font-size: 13px;
    line-height: 1.55;
    padding: 12px 13px;
    word-break: break-word;
    overflow-wrap: break-word;
    width: 100%;
    box-sizing: border-box;
  }
  .banner-icon { font-size: 18px; flex-shrink: 0; }
  /* The text div inside banner must be able to shrink */
  .banner > div:last-child {
    flex: 1;
    min-width: 0;
    word-break: break-word;
  }

  /* ---- FORM GRIDS → 1 column ---- */
  .form-grid.grid-2,
  .form-grid.grid-3,
  .form-grid.grid-4 {
    grid-template-columns: 1fr !important;
  }
  .col-2, .col-3 { grid-column: span 1 !important; }
  .form-input, .form-select { font-size: 14px; padding: 10px 12px; }

  /* ---- FINANCIAL SUMMARY ROW ---- */
  .fin-row { grid-template-columns: 1fr 1fr !important; }
  .fin-val { font-size: 18px; }

  /* ---- SCALE CARDS (Facility Vision) ---- */
  .scale-grid { grid-template-columns: 1fr 1fr !important; gap: 8px; }
  .sc-icon { font-size: 22px; }
  .sc-name { font-size: 13px; }
  .sc-range { font-size: 11px; }
  .sc-desc { font-size: 11px; }

  /* ---- UNIT TYPE CHECKBOXES ---- */
  /* Fix: checkboxes were disappearing off right edge. Force single col, full width. */
  .cb-grid {
    display: grid !important;
    grid-template-columns: 1fr !important;
    gap: 8px;
  }
  .cb-item {
    width: 100%;
    box-sizing: border-box;
    padding: 10px 12px;
    min-width: 0;
  }
  .cb-txt { font-size: 13px; }
  .cb-sub { font-size: 11px; }

  /* ---- ZIP CODE & RADIUS ---- */
  .zip-grid { grid-template-columns: 1fr !important; gap: 16px; }
  /* ZIP input was getting clipped — reduce large font on small screens */
  #f_zip {
    font-size: 22px !important;
    padding: 14px !important;
    letter-spacing: 4px !important;
    width: 100% !important;
    box-sizing: border-box !important;
  }
  .radius-box { height: 130px; }
  /* Inline info row under zip — allow wrapping */
  .zip-grid > div > div[style*="display:flex;gap:20px"] {
    flex-wrap: wrap;
    gap: 8px 14px !important;
  }

  /* ---- STATS GRID ---- */
  .stat-row { grid-template-columns: 1fr 1fr !important; gap: 10px; }
  .stat-val { font-size: 20px; }

  /* ---- GAP ANALYSIS ---- */
  .gap-grid { grid-template-columns: 1fr !important; }

  /* ---- BUILDER CARDS ---- */
  .builder-grid { grid-template-columns: 1fr !important; }
  .bc-head { flex-wrap: wrap; gap: 6px; }
  .bc-contact { flex-direction: column; align-items: flex-start; gap: 4px; }

  /* ---- TURNKEY / SHAKE-N-BAKE VENDORS ----
     Fix: cards and their internal table were clipping off right edge.
     Stack to single column, make content wrap. */
  .turnkey-grid { grid-template-columns: 1fr !important; gap: 14px; }
  .tk-head { flex-wrap: wrap; gap: 8px; }
  .tk-grid { grid-template-columns: 1fr 1fr !important; gap: 8px; }
  .tk-name { font-size: 18px; }
  .tk-foot { flex-wrap: wrap; gap: 8px; }
  .tk-how { font-size: 12px; line-height: 1.5; }

  /* Comparison table inside Advisory (broker-tbl) — horizontal scroll wrapper */
  .tbl-wrap,
  .broker-tbl-wrap {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    border-radius: var(--radius-md);
  }
  .broker-tbl { font-size: 12px; min-width: 560px; }
  .broker-tbl th, .broker-tbl td { padding: 9px 10px; white-space: nowrap; }

  /* ---- SITE SELECTION — CANDIDATE SITE CARDS ---- */
  /* Site entry head: wrap on mobile so score badge doesn't push off screen */
  .site-entry-head {
    flex-wrap: wrap;
    gap: 10px;
    align-items: flex-start;
  }
  /* Site name editable div — allow it to shrink */
  .site-entry-head .form-input[contenteditable] {
    min-width: 0 !important;
    width: 100% !important;
    box-sizing: border-box;
    font-size: 14px !important;
    word-break: break-word;
  }
  /* Site criteria grid: single column, each row scrollable if needed */
  .site-criteria-grid {
    grid-template-columns: 1fr !important;
    gap: 8px;
  }
  .sc-row.col-2 { grid-column: span 1 !important; }
  .sc-row {
    flex-wrap: wrap;
    gap: 6px;
  }
  .sc-lbl { min-width: 0; font-size: 12px; width: 100%; }
  .sc-inp { width: 100% !important; min-width: 0; }
  .sc-unit { font-size: 11px; }

  /* SITE COMPARISON SCORECARD — horizontal scroll */
  #siteCompTable,
  .tbl-wrap table {
    min-width: 700px;
  }

  /* Wrap the site comparison table section in a horizontal scroller */
  /* Applied via JS below — also add CSS for the wrapper class */
  .scorecard-scroll-wrap {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    margin-bottom: 20px;
    border: 2px solid var(--border);
    border-radius: var(--radius-md);
  }
  .scorecard-scroll-wrap .tbl-wrap {
    border: none;
    border-radius: 0;
    margin-bottom: 0;
  }

  /* Due Diligence checklist — single column */
  #view-4 div[style*="grid-template-columns:1fr 1fr"] {
    grid-template-columns: 1fr !important;
  }

  /* ---- BUSINESS PLAN — give it more breathing room ---- */
  /* Key metrics row: 2×2 instead of 4-across */
  .bp-metrics-grid,
  #view-5 div[style*="grid-template-columns:repeat(4,1fr)"] {
    grid-template-columns: 1fr 1fr !important;
  }
  /* Break-even: 1 col */
  .bp-breakeven-grid,
  #view-5 div[style*="grid-template-columns:1fr 1fr 1fr"] {
    grid-template-columns: 1fr 1fr !important;
  }

  /* Increase vertical spacing between business plan sections */
  #view-5 .section-head { margin-top: 22px; }
  #view-5 .form-group { margin-bottom: 4px; }
  #view-5 .card-body { padding: 16px; }

  /* Range sliders — more vertical breathing room */
  .range-group { gap: 10px; }
  .range-cur { font-size: 20px; }
  input[type="range"] { height: 8px; }

  /* ---- REVIEW PAGE ---- */
  .review-grid { grid-template-columns: 1fr 1fr !important; }
  .review-hd { flex-wrap: wrap; gap: 6px; }

  /* ---- DISCLAIMER MODAL ---- */
  /* Give it a visible scrollbar track so users know it's scrollable */
  #disclaimerOverlay { padding: 16px; }
  #disclaimerOverlay > div {
    width: 100% !important;
    max-width: 520px !important;
    border-radius: 14px !important;
    margin: auto;
  }
  /* The scrollable content area: show a visible scrollbar on iOS/Safari */
  #disclaimerOverlay > div > div[style*="overflow-y:auto"] {
    max-height: 65vh !important;
    overflow-y: scroll !important;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    scrollbar-color: var(--border-dark) var(--off-white);
  }
  /* Webkit scrollbar — visible so low-sensitivity users can grab it */
  #disclaimerOverlay > div > div[style*="overflow-y:auto"]::-webkit-scrollbar {
    width: 8px;
    background: var(--off-white);
  }
  #disclaimerOverlay > div > div[style*="overflow-y:auto"]::-webkit-scrollbar-thumb {
    background: var(--border-dark);
    border-radius: 4px;
    min-height: 40px; /* big enough to grab */
  }
  #disclaimerOverlay > div > div[style*="overflow-y:auto"]::-webkit-scrollbar-track {
    background: var(--off-white);
    border-radius: 4px;
  }
  /* Tighten disclaimer padding on mobile */
  #disclaimerOverlay > div > div[style*="padding:26px 28px"] {
    padding: 18px 16px !important;
  }
  #disclaimerOverlay > div > div[style*="padding:22px 28px"] {
    padding: 16px 18px !important;
  }

  /* ---- FOOTER BAR ---- */
  .footer-bar { padding: 10px 14px; }
  .footer-step { display: none; }
  .footer-btns { width: 100%; justify-content: space-between; gap: 10px; }
  .footer-btns .btn { flex: 1; justify-content: center; font-size: 13px; padding: 11px 14px; }

  /* ---- PHASE ROWS ---- */
  .phase-row { padding: 10px 12px; gap: 10px; flex-wrap: wrap; }
  .phase-row select { width: 100% !important; }

  /* ---- SECTION HEADS ---- */
  .section-head { margin-bottom: 12px; }
  .section-head-line { font-size: 11px; }

  /* ---- RESOURCES PAGE ---- */
  .res-grid { grid-template-columns: 1fr !important; }
  .res-tab { font-size: 11px; padding: 6px 12px; }

  /* ---- SCORE CARD ---- */
  .score-num { font-size: 28px; }

  /* ---- BUTTONS ---- */
  .btn { font-size: 13px; padding: 11px 18px; }
  .btn-row { flex-wrap: wrap; gap: 8px; padding-top: 16px; }

  /* ---- SCAN / PROGRESS ---- */
  .scan-progress { padding: 16px 18px; }
  .scan-title { font-size: 16px; }

}

/* ---- Extra small screens (<= 390px) ---- */
@media (max-width: 390px) {
  .scale-grid { grid-template-columns: 1fr !important; }
  .fin-row { grid-template-columns: 1fr 1fr !important; }
  .stat-row { grid-template-columns: 1fr 1fr !important; }
  .review-grid { grid-template-columns: 1fr !important; }
  .logo-name { font-size: 13px; }
  .card-title { font-size: 14px; }
  .card-body { padding: 12px; }
  .main { padding: 14px 10px 110px; }
  .footer-btns .btn { font-size: 12px; padding: 10px 10px; }
}
</style>
</head>
<body>

<!-- =================== HEADER =================== -->

<!-- =================== CARS-STYLE CAR CELEBRATION OVERLAY =================== -->
<div id="donKnottsOverlay" style="display:none;position:fixed;inset:0;z-index:2000;pointer-events:none;">

  <!-- Explosion burst rings -->
  <div id="burstRings" style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;">
    <div class="burst-ring" id="br1"></div>
    <div class="burst-ring" id="br2"></div>
    <div class="burst-ring" id="br3"></div>
  </div>

  <!-- Confetti particles (generated by JS) -->
  <div id="confettiContainer" style="position:absolute;inset:0;overflow:hidden;pointer-events:none;"></div>

  <!-- Main car card -->
  <div id="donCard" style="
    position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(0);
    background:white;border-radius:24px;
    border:4px solid #58CC02;box-shadow:0 8px 0 #46A302,0 0 60px rgba(88,204,2,0.4);
    padding:20px 28px 22px;text-align:center;
    min-width:290px;max-width:350px;width:90%;
    pointer-events:none;
  ">

    <!-- CARS-style car SVG — face lives in the front grille/hood -->
    <div id="carWrap" style="position:relative;display:inline-block;margin-bottom:10px;">
      <svg id="donCarSvg" viewBox="0 0 260 160" width="240" height="148" style="overflow:visible;">
        <defs>
          <!-- Main body gradient — rich racing green -->
          <linearGradient id="bodyTop" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%"   stop-color="#78E820"/>
            <stop offset="45%"  stop-color="#58CC02"/>
            <stop offset="100%" stop-color="#2E7200"/>
          </linearGradient>
          <!-- Hood gradient -->
          <linearGradient id="hoodGrad" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%"   stop-color="#8AF030"/>
            <stop offset="100%" stop-color="#46A302"/>
          </linearGradient>
          <!-- Windshield glass -->
          <linearGradient id="windGrad" x1="0" y1="0" x2="0.3" y2="1">
            <stop offset="0%"   stop-color="#C8F0FF" stop-opacity="0.95"/>
            <stop offset="100%" stop-color="#4AB8E8" stop-opacity="0.85"/>
          </linearGradient>
          <!-- Chrome bumper -->
          <linearGradient id="chromeGrad" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%"   stop-color="#EEEEEE"/>
            <stop offset="50%"  stop-color="#AAAAAA"/>
            <stop offset="100%" stop-color="#DDDDDD"/>
          </linearGradient>
          <!-- Tire -->
          <radialGradient id="tireGrad" cx="40%" cy="35%" r="60%">
            <stop offset="0%"   stop-color="#555"/>
            <stop offset="100%" stop-color="#111"/>
          </radialGradient>
          <!-- Eye white -->
          <radialGradient id="eyeGrad" cx="35%" cy="30%" r="65%">
            <stop offset="0%"   stop-color="#FFFFFF"/>
            <stop offset="100%" stop-color="#D8F0FF"/>
          </radialGradient>
          <!-- Body shine streak -->
          <linearGradient id="shineGrad" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%"  stop-color="white" stop-opacity="0.35"/>
            <stop offset="100%" stop-color="white" stop-opacity="0"/>
          </linearGradient>
        </defs>

        <!-- ═══ SHADOW ═══ -->
        <ellipse cx="130" cy="153" rx="95" ry="9" fill="rgba(0,0,0,0.18)"/>

        <!-- ═══ REAR WHEEL ═══ -->
        <circle cx="190" cy="128" r="24" fill="url(#tireGrad)" stroke="#000" stroke-width="2"/>
        <circle cx="190" cy="128" r="16" fill="#333"/>
        <circle cx="190" cy="128" r="8"  fill="#888"/>
        <circle cx="190" cy="128" r="4"  fill="#CCC"/>
        <!-- Spoke details -->
        <line x1="190" y1="112" x2="190" y2="144" stroke="#666" stroke-width="2.5"/>
        <line x1="174" y1="128" x2="206" y2="128" stroke="#666" stroke-width="2.5"/>
        <line x1="179" y1="117" x2="201" y2="139" stroke="#666" stroke-width="2"/>
        <line x1="179" y1="139" x2="201" y2="117" stroke="#666" stroke-width="2"/>

        <!-- ═══ FRONT WHEEL ═══ -->
        <circle cx="68"  cy="128" r="24" fill="url(#tireGrad)" stroke="#000" stroke-width="2"/>
        <circle cx="68"  cy="128" r="16" fill="#333"/>
        <circle cx="68"  cy="128" r="8"  fill="#888"/>
        <circle cx="68"  cy="128" r="4"  fill="#CCC"/>
        <line x1="68"  y1="112" x2="68"  y2="144" stroke="#666" stroke-width="2.5"/>
        <line x1="52"  y1="128" x2="84"  y2="128" stroke="#666" stroke-width="2.5"/>
        <line x1="57"  y1="117" x2="79"  y2="139" stroke="#666" stroke-width="2"/>
        <line x1="57"  y1="139" x2="79"  y2="117" stroke="#666" stroke-width="2"/>

        <!-- ═══ MAIN BODY — CARS-style low-slung racer ═══ -->
        <!-- Underbody / skirt -->
        <path d="M30 118 Q28 122 30 126 L230 126 Q232 122 230 118 Z"
              fill="#2A6B00" stroke="#1A4800" stroke-width="1.5"/>
        <!-- Main body shape — CARS proportions: wide, low, aerodynamic -->
        <path d="M28 118
                 L28 100
                 Q28 88 38 82
                 L62 70
                 Q78 56 100 50
                 L175 50
                 Q205 50 220 68
                 L235 88
                 Q240 96 238 108
                 L238 118 Z"
              fill="url(#bodyTop)" stroke="#2A6B00" stroke-width="2"/>

        <!-- Hood — slopes steeply down toward the face -->
        <path d="M28 100 Q28 88 38 82 L62 70 Q50 72 40 82 Q32 90 30 100 Z"
              fill="url(#hoodGrad)" stroke="#2A6B00" stroke-width="1.5"/>

        <!-- Body shine streak (top highlight) -->
        <path d="M80 52 Q130 48 175 52 L165 62 Q115 58 72 62 Z"
              fill="url(#shineGrad)"/>

        <!-- Racing stripe down the side -->
        <path d="M60 118 L60 76 Q62 70 68 68 L220 68 L220 78 Q218 82 212 84 L68 84 Q64 86 62 90 L62 118 Z"
              fill="#46A302" opacity="0.45"/>

        <!-- Side panel line detail -->
        <path d="M45 105 Q48 92 60 86 L220 86" stroke="#2A6B00" stroke-width="1.5" fill="none" opacity="0.6"/>

        <!-- Windshield — raked back like a sports car -->
        <path d="M100 52 Q112 44 145 44 L175 50 Q198 52 210 66 L195 80 Q190 86 178 88 L115 88 Q102 86 96 76 Q90 66 100 52 Z"
              fill="url(#windGrad)" stroke="#0E8FC0" stroke-width="2"/>
        <!-- Windshield glare -->
        <path d="M108 56 Q130 50 158 54 L150 68 Q128 64 106 68 Z"
              fill="white" opacity="0.22"/>
        <!-- Windshield frame pillar -->
        <path d="M100 52 Q96 62 96 76 Q96 84 102 88" stroke="#1A6000" stroke-width="3" fill="none" stroke-linecap="round"/>
        <path d="M210 66 Q214 76 210 86" stroke="#1A6000" stroke-width="3" fill="none" stroke-linecap="round"/>

        <!-- ═══ CARS-STYLE FACE — IN THE FRONT GRILLE / HOOD ═══ -->
        <!-- The face is forward-facing, built into the front of the car -->
        <!-- Grille surround — the "face frame" -->
        <path d="M28 94 Q26 100 28 108 L52 108 Q56 106 56 100 Q56 94 52 92 L32 92 Q28 92 28 94 Z"
              fill="#1A5500" stroke="#0E3800" stroke-width="1.5"/>

        <!-- HEADLIGHT EYES — large round lenses like CARS movie -->
        <!-- Left eye (from car's perspective = right side visually since we face it head-on
             but car faces RIGHT so left eye is on the left of the image) -->
        <!-- Eye sockets / brow ridges -->
        <ellipse cx="41" cy="80" rx="16" ry="10" fill="#1A5500" stroke="#0E3800" stroke-width="1.5"/>
        <!-- Eye lens — large, expressive -->
        <ellipse cx="41" cy="81" rx="13" ry="9"  fill="url(#eyeGrad)" stroke="#0099CC" stroke-width="2"/>
        <!-- Iris -->
        <ellipse cx="41" cy="82" rx="8"  ry="6"  fill="#4AB8F0"/>
        <!-- Pupil -->
        <ellipse cx="41" cy="82" rx="4.5" ry="4" fill="#1A2A3A"/>
        <!-- Pupil highlight -->
        <circle  cx="39" cy="80" r="2"   fill="white" opacity="0.9"/>
        <!-- Eyelid / brow crease (gives character) -->
        <path d="M29 74 Q41 70 53 74" stroke="#0E3800" stroke-width="3" fill="none" stroke-linecap="round"/>
        <!-- Eyebrow — arched, friendly/excited -->
        <path d="M30 72 Q41 67 52 72" stroke="#2A6B00" stroke-width="4" fill="none" stroke-linecap="round"/>
        <!-- Eye rim chrome -->
        <ellipse cx="41" cy="81" rx="13" ry="9" fill="none" stroke="url(#chromeGrad)" stroke-width="2.5"/>

        <!-- ═══ GRILLE MOUTH — wide grin ═══ -->
        <!-- Grille opening — the "mouth" -->
        <path d="M26 108 Q28 114 34 116 L56 116 Q62 114 62 108 L56 108 Q54 112 50 113 L38 113 Q34 112 32 108 Z"
              fill="#111" stroke="#0E3800" stroke-width="1.5"/>
        <!-- Grille teeth bars -->
        <rect x="30" y="109" width="3" height="4" rx="1" fill="#555"/>
        <rect x="36" y="109" width="3" height="5" rx="1" fill="#555"/>
        <rect x="42" y="109" width="3" height="5" rx="1" fill="#555"/>
        <rect x="48" y="109" width="3" height="4" rx="1" fill="#555"/>
        <!-- Grin curve inside mouth -->
        <path d="M29 108 Q44 116 61 108" stroke="#58CC02" stroke-width="2" fill="none" opacity="0.5"/>

        <!-- Nose — hood ornament / front badge -->
        <ellipse cx="44" cy="96" rx="5" ry="4" fill="#FFDD00" stroke="#CC9900" stroke-width="1.5"/>
        <text x="44" y="99" font-size="5" font-weight="900" fill="#CC5500" text-anchor="middle">S</text>

        <!-- ═══ REAR DETAILS ═══ -->
        <!-- Tail light strip -->
        <path d="M222 80 Q232 82 236 90 L236 108 Q232 112 224 114 L220 114 L220 80 Z"
              fill="#CC0000" stroke="#880000" stroke-width="1.5"/>
        <path d="M220 82 L234 92 L234 106 L220 110 Z" fill="#FF3333" opacity="0.6"/>
        <!-- Spoiler -->
        <path d="M180 48 L215 48 Q220 46 220 42 L215 38 Q212 36 208 38 L180 42 Q178 44 180 48 Z"
              fill="#2A6B00" stroke="#1A4800" stroke-width="1.5"/>
        <path d="M180 44 L215 44" stroke="#46A302" stroke-width="2" opacity="0.6"/>

        <!-- Side mirror (small detail) -->
        <ellipse cx="100" cy="62" rx="6" ry="4" fill="#3A9200" stroke="#2A6B00" stroke-width="1"/>
        <ellipse cx="100" cy="62" rx="4" ry="2.5" fill="#C8F0FF" opacity="0.7"/>

        <!-- Door seam -->
        <path d="M130 88 L130 118" stroke="#2A6B00" stroke-width="2" opacity="0.5"/>
        <!-- Door handle -->
        <rect x="148" y="98" width="18" height="5" rx="2.5" fill="url(#chromeGrad)" stroke="#888" stroke-width="1"/>

        <!-- ═══ WAVING ARM — pops out from driver window ═══ -->
        <!-- This is a small arm/tire arm waving from the side window -->
        <g id="waveArm" style="transform-origin:215px 72px;">
          <!-- Window opening it waves from -->
          <!-- Arm — stubby car-character arm -->
          <ellipse cx="222" cy="60" rx="7" ry="5" fill="#58CC02" stroke="#2A6B00" stroke-width="1.5" transform="rotate(-30,222,60)"/>
          <!-- Hand - round like CARS characters -->
          <circle cx="228" cy="48" r="9" fill="#FDDBB4" stroke="#C8A070" stroke-width="1.5"/>
          <!-- Thumb -->
          <ellipse cx="221" cy="44" rx="4" ry="3" fill="#FDDBB4" stroke="#C8A070" stroke-width="1" transform="rotate(-30,221,44)"/>
          <!-- Fingers -->
          <path d="M223 40 Q225 35 228 37" stroke="#C8A070" stroke-width="2.5" fill="none" stroke-linecap="round"/>
          <path d="M228 39 Q231 34 233 36" stroke="#C8A070" stroke-width="2.5" fill="none" stroke-linecap="round"/>
          <path d="M232 40 Q236 36 237 39" stroke="#C8A070" stroke-width="2.5" fill="none" stroke-linecap="round"/>
          <!-- Knuckle dots -->
          <circle cx="225" cy="46" r="1.2" fill="#C8A070" opacity="0.6"/>
          <circle cx="230" cy="45" r="1.2" fill="#C8A070" opacity="0.6"/>
          <circle cx="234" cy="46" r="1.2" fill="#C8A070" opacity="0.6"/>
        </g>

        <!-- ═══ SPARKLE STARS ═══ -->
        <text x="10"  y="60"  font-size="13" id="star1" style="transform-origin:16px 53px">⭐</text>
        <text x="240" y="48"  font-size="11" id="star2" style="transform-origin:246px 41px">✨</text>
        <text x="240" y="115" font-size="10" id="star3" style="transform-origin:245px 110px">⭐</text>

      </svg>
    </div>

    <!-- Speech bubble — sits ABOVE the car, pointer points down to car face -->
    <div id="speechBubble" style="
      background:#F0FDE4;border:3px solid #58CC02;border-radius:16px;
      padding:10px 18px;margin-bottom:14px;
      font-size:21px;font-weight:900;
      color:#2A6B00;position:relative;opacity:0;
      order:-1;
    ">
      <span id="bubbleText">Way to go! 🎉</span>
      <!-- Bubble tail pointing DOWN toward the car -->
      <div style="
        position:absolute;bottom:-16px;left:50%;transform:translateX(-50%);
        width:0;height:0;
        border-left:12px solid transparent;border-right:12px solid transparent;
        border-top:16px solid #58CC02;
      "></div>
      <div style="
        position:absolute;bottom:-11px;left:50%;transform:translateX(-50%);
        width:0;height:0;
        border-left:10px solid transparent;border-right:10px solid transparent;
        border-top:13px solid #F0FDE4;
      "></div>
    </div>

    <!-- Sub-text -->
    <div id="donSubText" style="font-size:13px;font-weight:700;color:#777;margin-top:4px;opacity:0;">
      Heading to the next step…
    </div>
  </div>

</div>

<!-- =================== DISCLAIMER MODAL =================== -->
<div id="disclaimerOverlay" style="display:none;position:fixed;inset:0;z-index:1000;background:rgba(0,0,0,0.55);backdrop-filter:blur(3px);align-items:center;justify-content:center;overflow-y:auto;padding:20px 0;">
  <div style="background:white;border-radius:20px;max-width:560px;width:90%;box-shadow:0 20px 60px rgba(0,0,0,0.3);overflow:hidden;animation:panelIn 0.3s ease;margin:auto;">
    <div style="background:var(--gold-pale);border-bottom:2px solid #FFD966;padding:22px 28px;display:flex;align-items:center;gap:14px;">
      <span style="font-size:36px;">⚠️</span>
      <div>
        <div style="font-size:20px;font-weight:900;color:var(--text);">Data Accuracy Disclaimer</div>
        <div style="font-size:13px;font-weight:600;color:var(--muted);margin-top:2px;">Please read before proceeding</div>
      </div>
    </div>
    <div style="padding:26px 28px;max-height:70vh;overflow-y:auto;">
      <p style="font-size:14px;font-weight:600;color:var(--text);line-height:1.75;margin-bottom:14px;">This tool is a <strong>prototype</strong> that compiles publicly available data for informational and planning purposes only. Before making any financial, legal, or development decisions, you should be aware of the following:</p>
      <div style="display:flex;flex-direction:column;gap:10px;margin-bottom:20px;">
        <div style="display:flex;gap:12px;align-items:flex-start;background:var(--off-white);border-radius:10px;padding:12px 14px;">
          <span style="font-size:18px;flex-shrink:0;">📍</span>
          <div style="font-size:13px;font-weight:600;color:var(--text);line-height:1.6;"><strong>Competitor pricing</strong> is sourced from public websites, Google Business profiles, and online listings. Prices change frequently and may not reflect current rates.</div>
        </div>
        <div style="display:flex;gap:12px;align-items:flex-start;background:var(--off-white);border-radius:10px;padding:12px 14px;">
          <span style="font-size:18px;flex-shrink:0;">🏛️</span>
          <div style="font-size:13px;font-weight:600;color:var(--text);line-height:1.6;"><strong>Property tax assessments</strong> are from publicly available county records and may lag actual market values by 1–3 years.</div>
        </div>
        <div style="display:flex;gap:12px;align-items:flex-start;background:var(--off-white);border-radius:10px;padding:12px 14px;">
          <span style="font-size:18px;flex-shrink:0;">📋</span>
          <div style="font-size:13px;font-weight:600;color:var(--text);line-height:1.6;"><strong>Business ownership</strong> is from KS Secretary of State filings, which may not reflect recent transfers or unreported changes.</div>
        </div>
        <div style="display:flex;gap:12px;align-items:flex-start;background:var(--off-white);border-radius:10px;padding:12px 14px;">
          <span style="font-size:18px;flex-shrink:0;">💰</span>
          <div style="font-size:13px;font-weight:600;color:var(--text);line-height:1.6;"><strong>Financial projections</strong> in Steps 4 and 5 are illustrative estimates based on typical self-storage industry benchmarks. Actual results will vary. This is not financial advice.</div>
        </div>
        <div style="display:flex;gap:12px;align-items:flex-start;background:var(--off-white);border-radius:10px;padding:12px 14px;">
          <span style="font-size:18px;flex-shrink:0;">⚖️</span>
          <div style="font-size:13px;font-weight:600;color:var(--text);line-height:1.6;"><strong>Zoning, permitting, and regulatory</strong> data should be independently verified with the applicable county or city planning department before acquiring any property.</div>
        </div>
      </div>
      <div style="display:flex;align-items:center;gap:10px;background:var(--green-bg);border:2px solid var(--green-pale);border-radius:10px;padding:14px;margin-bottom:22px;cursor:pointer;" onclick="toggleDisclaimerCb(this)" id="disclaimerCbRow">
        <div id="disclaimerCb" style="width:24px;height:24px;border:3px solid var(--border-dark);border-radius:6px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:900;color:transparent;background:white;transition:all 0.15s;"></div>
        <div style="font-size:14px;font-weight:800;color:var(--green-deep);">I understand this is prototype data for planning purposes only. I will verify all information independently before making financial decisions.</div>
      </div>
      <div style="display:flex;gap:12px;justify-content:flex-end;">
        <button class="btn btn-ghost" onclick="closeDisclaimer()">Cancel</button>
        <button class="btn btn-primary" id="disclaimerOkBtn" onclick="acceptDisclaimer()" style="opacity:0.4;pointer-events:none;">✅ I Understand — Run Advisory</button>
      </div>
    </div>
  </div>
</div>

<header class="header">
  <div class="logo-block">

    <!-- ANIMATED LOGO: Car → Building → Money -->
    <div class="logo-anim-wrap">
      <!-- CAR SVG -->
      <svg class="car-svg" viewBox="0 0 56 56" fill="none">
        <rect x="4" y="28" width="48" height="18" rx="4" fill="#58CC02"/>
        <path d="M14 28 L20 16 L38 16 L44 28 Z" fill="#46A302"/>
        <rect x="20" y="17" width="8" height="10" rx="2" fill="#DFF4FF" opacity="0.9"/>
        <rect x="30" y="17" width="8" height="10" rx="2" fill="#DFF4FF" opacity="0.9"/>
        <circle cx="16" cy="46" r="6" fill="#1C1C1C"/>
        <circle cx="16" cy="46" r="3" fill="#777"/>
        <circle cx="40" cy="46" r="6" fill="#1C1C1C"/>
        <circle cx="40" cy="46" r="3" fill="#777"/>
        <rect x="44" y="31" width="6" height="5" rx="2" fill="#FFF8E0"/>
        <rect x="6" y="31" width="5" height="5" rx="2" fill="#FF4B4B" opacity="0.8"/>
      </svg>

      <!-- BUILDING SVG -->
      <svg class="build-svg" viewBox="0 0 56 56" fill="none">
        <rect x="8" y="14" width="40" height="38" rx="4" fill="#58CC02"/>
        <rect x="8" y="10" width="40" height="7" rx="3" fill="#46A302"/>
        <rect x="20" y="6" width="16" height="6" rx="3" fill="#2A6B00"/>
        <rect x="14" y="20" width="8" height="8" rx="2" fill="white" opacity="0.9"/>
        <rect x="26" y="20" width="8" height="8" rx="2" fill="white" opacity="0.9"/>
        <rect x="38" y="20" width="6" height="8" rx="2" fill="white" opacity="0.9"/>
        <rect x="14" y="34" width="8" height="8" rx="2" fill="white" opacity="0.9"/>
        <rect x="38" y="34" width="6" height="8" rx="2" fill="white" opacity="0.9"/>
        <rect x="22" y="36" width="12" height="16" rx="3" fill="#2A6B00"/>
        <rect x="8" y="50" width="40" height="2" rx="1" fill="#2A6B00"/>
        <!-- sparkles -->
        <circle cx="6" cy="10" r="2" fill="#FF9600" style="animation:sparkle 3.6s 1.6s infinite"/>
        <circle cx="50" cy="8"  r="2" fill="#1CB0F6" style="animation:sparkle 3.6s 1.8s infinite"/>
        <circle cx="52" cy="22" r="2" fill="#FF9600" style="animation:sparkle 3.6s 2s infinite"/>
      </svg>

      <!-- MONEY SVG -->
      <svg class="money-svg" viewBox="0 0 56 56" fill="none">
        <!-- bag body -->
        <ellipse cx="28" cy="38" rx="18" ry="16" fill="#FF9600"/>
        <ellipse cx="28" cy="38" rx="18" ry="16" fill="url(#mgr)"/>
        <defs>
          <radialGradient id="mgr" cx="40%" cy="35%">
            <stop offset="0%" stop-color="white" stop-opacity="0.15"/>
            <stop offset="100%" stop-color="black" stop-opacity="0.1"/>
          </radialGradient>
        </defs>
        <!-- bag tie -->
        <rect x="21" y="22" width="14" height="5" rx="2" fill="#CC7700"/>
        <!-- knot -->
        <ellipse cx="28" cy="21" rx="7" ry="5" fill="#FF9600" stroke="#CC7700" stroke-width="2"/>
        <!-- dollar sign -->
        <text x="28" y="44" font-family="Nunito,sans-serif" font-size="20" font-weight="900" fill="white" text-anchor="middle">$</text>
        <!-- sparkle coins -->
        <circle cx="8"  cy="20" r="5" fill="#FF9600" stroke="#CC7700" stroke-width="2" style="animation:sparkle 0.5s 0s infinite"/>
        <circle cx="48" cy="18" r="5" fill="#FF9600" stroke="#CC7700" stroke-width="2" style="animation:sparkle 0.5s 0.1s infinite"/>
        <circle cx="14" cy="8"  r="4" fill="#FF9600" stroke="#CC7700" stroke-width="2" style="animation:sparkle 0.5s 0.2s infinite"/>
        <circle cx="42" cy="8"  r="3" fill="#FFD966" stroke="#CC7700" stroke-width="1.5" style="animation:sparkle 0.5s 0.15s infinite"/>
      </svg>
    </div>

    <div class="logo-text">
      <div class="logo-name">Self-Storage <span>Business Planner</span></div>
      <div class="logo-tag">Opportunity Intelligence Platform</div>
    </div>
  </div>

  <div class="header-right">
    <div class="xp-badge">🔥 Session Active</div>
    <div class="streak-badge">✅ Prototype v1.0</div>
  </div>
</header>

<!-- =================== STEPPER =================== -->
<div class="stepper-wrap">
  <div class="stepper">
    <div class="step active" id="step-tab-1" onclick="goToStep(1)">
      <div class="step-bubble" id="step-bub-1">1</div>
      <div class="step-info"><div class="step-name">Interview</div><div class="step-desc">Profile</div></div>
    </div>
    <div class="step locked" id="step-tab-2" onclick="goToStep(2)">
      <div class="step-bubble" id="step-bub-2">2</div>
      <div class="step-info"><div class="step-name">Review</div><div class="step-desc">Confirm</div></div>
    </div>
    <div class="step locked" id="step-tab-3" onclick="goToStep(3)">
      <div class="step-bubble" id="step-bub-3">3</div>
      <div class="step-info"><div class="step-name">Advisory</div><div class="step-desc">Market Intel</div></div>
    </div>
    <div class="step locked" id="step-tab-4" onclick="goToStep(4)">
      <div class="step-bubble" id="step-bub-4">4</div>
      <div class="step-info"><div class="step-name">Selection</div><div class="step-desc">Site</div></div>
    </div>
    <div class="step locked" id="step-tab-5" onclick="goToStep(5)">
      <div class="step-bubble" id="step-bub-5">5</div>
      <div class="step-info"><div class="step-name">Business Plan</div><div class="step-desc">Projections</div></div>
    </div>
    <div class="step locked" id="step-tab-6" onclick="goToStep(6)">
      <div class="step-bubble" id="step-bub-6">6</div>
      <div class="step-info"><div class="step-name">Resources</div><div class="step-desc">Partners</div></div>
    </div>
  </div>
</div>

<!-- =================== STEP 1: INTERVIEW =================== -->
<div class="view active" id="view-1">
<div class="main">

  <div class="card">
    <div class="card-header">
      <div class="card-title">👤 Personal Profile <span class="chip">Step 1 of 6</span></div>
      <div style="font-size:13px;font-weight:700;color:var(--muted2);">All fields optional — more data = better recommendations</div>
    </div>
    <div class="card-body">
      <div class="section-head"><span class="section-head-line">Your Identity</span></div>
      <div class="form-grid grid-3">
        <div class="form-group">
          <label class="form-label">First Name <span class="opt">optional</span></label>
          <input class="form-input" type="text" id="f_fname" placeholder="John">
        </div>
        <div class="form-group">
          <label class="form-label">Last Name <span class="opt">optional</span></label>
          <input class="form-input" type="text" id="f_lname" placeholder="Smith">
        </div>
        <div class="form-group">
          <label class="form-label">Email <span class="opt">optional</span></label>
          <input class="form-input" type="email" id="f_email" placeholder="john@email.com">
        </div>
        <div class="form-group col-2">
          <label class="form-label">Street Address <span class="opt">optional</span></label>
          <input class="form-input" type="text" id="f_address" placeholder="123 Main Street, City, State ZIP">
        </div>
        <div class="form-group">
          <label class="form-label">Phone <span class="opt">optional</span></label>
          <input class="form-input" type="tel" id="f_phone" placeholder="(555) 000-0000">
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header"><div class="card-title">💰 Financial Profile</div></div>
    <div class="card-body">
      <div class="banner banner-info">
        <span class="banner-icon">ℹ️</span>
        <div>This helps match you with the right facility scale and financing options. Everything stays private within this session. More detail = more precise recommendations — but nothing is required.</div>
      </div>
      <div class="section-head"><span class="section-head-line">Available Capital</span></div>
      <div class="form-grid grid-2">
        <div class="form-group">
          <label class="form-label">Cash on Hand</label>
          <div class="input-pfx"><span class="pfx-sym">$</span><input class="form-input" type="text" id="f_cash" placeholder="0" oninput="updateFin()"></div>
        </div>
        <div class="form-group">
          <label class="form-label">Liquid Assets <span class="opt">stocks, savings</span></label>
          <div class="input-pfx"><span class="pfx-sym">$</span><input class="form-input" type="text" id="f_liquid" placeholder="0" oninput="updateFin()"></div>
        </div>
        <div class="form-group">
          <label class="form-label">Secondary Sources <span class="opt">IRA, 401k, equity</span></label>
          <div class="input-pfx"><span class="pfx-sym">$</span><input class="form-input" type="text" id="f_secondary" placeholder="0" oninput="updateFin()"></div>
        </div>
        <div class="form-group">
          <label class="form-label">Comfortable Borrowing Amount</label>
          <div class="input-pfx"><span class="pfx-sym">$</span><input class="form-input" type="text" id="f_borrow" placeholder="0" oninput="updateFin()"></div>
        </div>
      </div>
      <div class="fin-row">
        <div class="fin-cell"><div class="fin-lbl">Cash + Liquid</div><div class="fin-val" id="fin_cl">$0</div><div class="fin-sub">Immediately available</div></div>
        <div class="fin-cell"><div class="fin-lbl">With Secondary</div><div class="fin-val" id="fin_sec">$0</div><div class="fin-sub">Including secondary</div></div>
        <div class="fin-cell"><div class="fin-lbl">Total w/ Financing</div><div class="fin-val" id="fin_tot">$0</div><div class="fin-sub">Maximum capacity</div></div>
        <div class="fin-cell"><div class="fin-lbl">Borrowing</div><div class="fin-val" id="fin_bor">$0</div><div class="fin-sub">Comfortable debt</div></div>
      </div>

      <div class="section-head" style="margin-top:24px;"><span class="section-head-line">Financing Preferences</span></div>
      <div class="form-grid grid-3">
        <div class="form-group">
          <label class="form-label">Target Interest Rate</label>
          <div class="range-group">
            <div class="range-vals">
              <span class="range-ends">4%</span>
              <span class="range-cur" id="rate_cur">7.5%</span>
              <span class="range-ends">15%</span>
            </div>
            <input type="range" min="4" max="15" step="0.5" value="7.5" id="f_rate" oninput="document.getElementById('rate_cur').textContent=this.value+'%'">
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Estimated Credit Score</label>
          <input class="form-input" type="number" id="f_credit" min="300" max="850" placeholder="720" oninput="updateCredit()">
        </div>
        <div class="form-group">
          <div class="score-card">
            <div class="score-num" id="scoreNum">—</div>
            <div class="score-lbl" id="scoreLbl">Enter your credit score</div>
            <div class="score-track"><div class="score-fill" id="scoreBar" style="--pct:0%"></div></div>
            <div class="score-ticks"><span>300</span><span>Poor</span><span>Fair</span><span>Good</span><span>Excl.</span><span>850</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header"><div class="card-title">🏗️ Facility Vision</div></div>
    <div class="card-body">

      <div class="section-head"><span class="section-head-line">Facility Scale</span></div>
      <div class="scale-grid">
        <div class="scale-card" onclick="selCard(this,'scale')">
          <div class="sc-icon">🏪</div><div class="sc-name">Small</div>
          <div class="sc-range">25–75 units</div>
          <div class="sc-desc">Starter facility, lower land cost, simple ops</div>
        </div>
        <div class="scale-card sel" onclick="selCard(this,'scale')">
          <div class="sc-icon">🏬</div><div class="sc-name">Medium</div>
          <div class="sc-range">75–200 units</div>
          <div class="sc-desc">Best ROI balance, can support a full-time manager</div>
        </div>
        <div class="scale-card" onclick="selCard(this,'scale')">
          <div class="sc-icon">🏢</div><div class="sc-name">Large</div>
          <div class="sc-range">200–500 units</div>
          <div class="sc-desc">Institutional-grade, higher cap rates, climate control</div>
        </div>
        <div class="scale-card" onclick="selCard(this,'scale')">
          <div class="sc-icon">🏙️</div><div class="sc-name">Mega</div>
          <div class="sc-range">500+ units</div>
          <div class="sc-desc">REIT-attractive, multi-story, premium submarkets</div>
        </div>
      </div>

      <div class="section-head" style="margin-top:26px;"><span class="section-head-line">Phased Development</span></div>
      <div style="display:flex;align-items:center;gap:14px;margin-bottom:16px;">
        <div class="toggle on" id="phaseToggle" onclick="togglePhase()"></div>
        <span class="toggle-label">Enable phased development <span style="font-size:13px;font-weight:600;color:var(--muted2);">— build in stages to spread capital requirements</span></span>
      </div>
      <div class="phase-list" id="phaseList">
        <div class="phase-row active">
          <div class="phase-dot">1</div>
          <div class="phase-info"><div class="phase-title">Phase 1 — Foundation Build</div><div class="phase-desc">Land, site prep, core units. Target: 40–60% of total unit count.</div></div>
          <select class="form-select" style="width:140px"><option>Year 1–2</option><option>Year 1</option><option>Year 1–3</option></select>
        </div>
        <div class="phase-row">
          <div class="phase-dot">2</div>
          <div class="phase-info"><div class="phase-title">Phase 2 — Expansion</div><div class="phase-desc">Additional rows, climate wing, covered parking expansion.</div></div>
          <select class="form-select" style="width:140px"><option>Year 2–3</option><option>Year 2</option><option>Year 3–4</option></select>
        </div>
        <div class="phase-row">
          <div class="phase-dot">3</div>
          <div class="phase-info"><div class="phase-title">Phase 3 — Premium Amenities</div><div class="phase-desc">Covered canopies, kiosk automation, solar, security upgrades.</div></div>
          <select class="form-select" style="width:140px"><option>Year 3–5</option><option>Year 3</option><option>Year 4–5</option></select>
        </div>
      </div>

      <div class="section-head" style="margin-top:26px;"><span class="section-head-line">Unit Types to Offer</span></div>
      <div class="banner banner-green" style="margin-bottom:14px;">
        <span class="banner-icon">💡</span>
        <div>Select all unit types you plan to include. These drive the competitive gap analysis and financial projections.</div>
      </div>

      <div style="font-size:13px;font-weight:800;color:var(--blue-dark);margin-bottom:10px;text-transform:uppercase;letter-spacing:1px;">🚗 Vehicle & Outdoor Storage</div>
      <div class="cb-grid" style="margin-bottom:18px;">
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">🚤 Boat/Trailer — Covered</div><div class="cb-sub">Enclosed or canopied bay</div></div></div>
        <div class="cb-item on" onclick="toggleCb(this)"><div class="cb-box">✓</div><div><div class="cb-txt">⛵ Boat/Trailer — Uncovered</div><div class="cb-sub">Open lot, lower cost</div></div></div>
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">🚘 Vehicle — Covered</div><div class="cb-sub">Premium car storage</div></div></div>
        <div class="cb-item on" onclick="toggleCb(this)"><div class="cb-box">✓</div><div><div class="cb-txt">🅿️ Vehicle — Uncovered</div><div class="cb-sub">Standard parking</div></div></div>
      </div>

      <div style="font-size:13px;font-weight:800;color:var(--gold-dark);margin-bottom:10px;text-transform:uppercase;letter-spacing:1px;">📦 Non-Climate Controlled</div>
      <div class="cb-grid" style="margin-bottom:18px;">
        <div class="cb-item on" onclick="toggleCb(this)"><div class="cb-box">✓</div><div><div class="cb-txt">5×5 Non-Climate</div><div class="cb-sub">25 sq ft · closet-size</div></div></div>
        <div class="cb-item on" onclick="toggleCb(this)"><div class="cb-box">✓</div><div><div class="cb-txt">10×15 Non-Climate</div><div class="cb-sub">150 sq ft · 1-bedroom</div></div></div>
        <div class="cb-item on" onclick="toggleCb(this)"><div class="cb-box">✓</div><div><div class="cb-txt">10×20 Non-Climate</div><div class="cb-sub">200 sq ft · 2-bedroom</div></div></div>
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">10×30 Non-Climate</div><div class="cb-sub">300 sq ft · large haul</div></div></div>
      </div>

      <div style="font-size:13px;font-weight:800;color:var(--green-dark);margin-bottom:10px;text-transform:uppercase;letter-spacing:1px;">❄️ Climate Controlled</div>
      <div class="cb-grid">
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">5×5 Climate</div><div class="cb-sub">25 sq ft · wine/docs</div></div></div>
        <div class="cb-item on" onclick="toggleCb(this)"><div class="cb-box">✓</div><div><div class="cb-txt">10×15 Climate</div><div class="cb-sub">150 sq ft · premium</div></div></div>
        <div class="cb-item on" onclick="toggleCb(this)"><div class="cb-box">✓</div><div><div class="cb-txt">10×20 Climate</div><div class="cb-sub">200 sq ft · premium</div></div></div>
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">10×30 Climate</div><div class="cb-sub">300 sq ft · max premium</div></div></div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header"><div class="card-title">📍 Target Search Area</div></div>
    <div class="card-body">
      <div class="section-head"><span class="section-head-line">Define Your Market</span></div>
      <div class="zip-grid">
        <div>
          <div class="form-group" style="margin-bottom:18px;">
            <label class="form-label">ZIP Code</label>
            <input class="form-input" type="text" id="f_zip" maxlength="5" placeholder="64133" style="font-size:28px;font-weight:900;padding:18px;letter-spacing:5px;" oninput="updateRadius()">
          </div>
          <div class="form-group">
            <label class="form-label">Search Radius</label>
            <div class="range-group">
              <div class="range-vals">
                <span class="range-ends">1 mi</span>
                <span class="range-cur" id="miles_cur">10 mi</span>
                <span class="range-ends">20 mi</span>
              </div>
              <input type="range" min="1" max="20" step="1" value="10" id="f_miles" oninput="updateRadius()">
            </div>
          </div>
          <div style="display:flex;gap:20px;margin-top:12px;font-size:13px;font-weight:700;color:var(--muted);">
            <span>ZIP: <span style="color:var(--green-dark);font-weight:900;" id="zip_pr">64133</span></span>
            <span>Radius: <span style="color:var(--green-dark);font-weight:900;" id="rad_pr">10 miles</span></span>
            <span>Area: <span style="color:var(--green-dark);font-weight:900;" id="area_pr">~314 sq mi</span></span>
          </div>
        </div>
        <div>
          <div class="radius-box" id="radViz">
            <div class="r-ring" id="ring1" style="width:140px;height:140px;"></div>
            <div class="r-ring" id="ring2" style="width:100px;height:100px;"></div>
            <div class="r-ring" id="ring3" style="width:60px;height:60px;"></div>
            <div class="r-dot"></div>
            <div class="r-label" id="radLbl">📍 10 Mile Radius</div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
<div class="footer-bar">
  <div class="footer-step"><div class="footer-name">Step 1: Interview</div><div class="footer-desc">Complete your profile to proceed</div></div>
  <div class="footer-btns">
    <button class="btn btn-ghost">Clear Form</button>
    <button class="btn btn-primary" onclick="goToStep(2)">Continue →</button>
  </div>
</div>
</div>

<!-- =================== STEP 2: REVIEW =================== -->
<div class="view" id="view-2">
<div class="main">
  <div class="card">
    <div class="card-header">
      <div class="card-title">🔍 Review Your Selections <span class="chip">Step 2 of 6</span></div>
    </div>
    <div class="card-body">
      <div class="banner banner-info">
        <span class="banner-icon">ℹ️</span>
        <div>Review everything below before proceeding. Once confirmed, the app scans your target market for competitive intelligence. You can edit any section before running.</div>
      </div>

      <div class="review-block">
        <div class="review-hd"><span class="review-title">👤 Personal Profile</span><button class="btn btn-ghost" style="padding:6px 14px;font-size:12px;" onclick="goToStep(1)">✏️ Edit</button></div>
        <div class="review-bd">
          <div class="review-grid">
            <div class="rv-item"><div class="rv-key">Name</div><div class="rv-val" id="rv_name">Not provided</div></div>
            <div class="rv-item"><div class="rv-key">Email</div><div class="rv-val na" id="rv_email">Not provided</div></div>
            <div class="rv-item"><div class="rv-key">Phone</div><div class="rv-val na" id="rv_phone">Not provided</div></div>
          </div>
        </div>
      </div>

      <div class="review-block">
        <div class="review-hd"><span class="review-title">💰 Financial Profile</span><button class="btn btn-ghost" style="padding:6px 14px;font-size:12px;" onclick="goToStep(1)">✏️ Edit</button></div>
        <div class="review-bd">
          <div class="review-grid">
            <div class="rv-item"><div class="rv-key">Cash on Hand</div><div class="rv-val money" id="rv_cash">$0</div></div>
            <div class="rv-item"><div class="rv-key">Liquid Assets</div><div class="rv-val money" id="rv_liquid">$0</div></div>
            <div class="rv-item"><div class="rv-key">Secondary Sources</div><div class="rv-val money" id="rv_secondary">$0</div></div>
            <div class="rv-item"><div class="rv-key">Borrowing Comfort</div><div class="rv-val money" id="rv_borrow">$0</div></div>
            <div class="rv-item"><div class="rv-key">Target Rate</div><div class="rv-val" id="rv_rate">7.5%</div></div>
            <div class="rv-item"><div class="rv-key">Credit Score</div><div class="rv-val na" id="rv_credit">Not provided</div></div>
          </div>
        </div>
      </div>

      <div class="review-block">
        <div class="review-hd"><span class="review-title">🏗️ Facility Vision</span><button class="btn btn-ghost" style="padding:6px 14px;font-size:12px;" onclick="goToStep(1)">✏️ Edit</button></div>
        <div class="review-bd">
          <div class="review-grid">
            <div class="rv-item"><div class="rv-key">Scale</div><div class="rv-val" id="rv_scale">Medium (75–200 units)</div></div>
            <div class="rv-item"><div class="rv-key">Phased Dev.</div><div class="rv-val" id="rv_phase">Yes — 3 Phases</div></div>
            <div class="rv-item"><div class="rv-key">Unit Types</div><div class="rv-val" id="rv_units">7 selected</div></div>
          </div>
          <div style="margin-top:12px;"><div class="rv-key" style="margin-bottom:6px;">Selected Unit Types</div>
            <div class="tag-row">
              <span class="tag blue">⛵ Boat/Trailer Uncovered</span>
              <span class="tag blue">🅿️ Vehicle Uncovered</span>
              <span class="tag">📦 5×5 NC</span><span class="tag">📦 10×15 NC</span>
              <span class="tag">📦 10×20 NC</span>
              <span class="tag purple">❄️ 10×15 CC</span>
              <span class="tag purple">❄️ 10×20 CC</span>
            </div>
          </div>
        </div>
      </div>

      <div class="review-block">
        <div class="review-hd"><span class="review-title">📍 Target Area</span><button class="btn btn-ghost" style="padding:6px 14px;font-size:12px;" onclick="goToStep(1)">✏️ Edit</button></div>
        <div class="review-bd">
          <div class="review-grid">
            <div class="rv-item"><div class="rv-key">ZIP Code</div><div class="rv-val big" id="rv_zip">64133</div></div>
            <div class="rv-item"><div class="rv-key">Search Radius</div><div class="rv-val big" id="rv_miles">10 miles</div></div>
            <div class="rv-item"><div class="rv-key">Coverage</div><div class="rv-val big" id="rv_area">~314 sq mi</div></div>
          </div>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn btn-danger" onclick="goToStep(1)">↩ Start Over</button>
        <button class="btn btn-secondary" onclick="goToStep(1)">✏️ Edit</button>
        <button class="btn btn-primary" onclick="goToStep(3)">✅ Confirm & Run Advisory →</button>
      </div>
    </div>
  </div>
</div>
<div class="footer-bar">
  <div class="footer-step"><div class="footer-name">Step 2: Review</div><div class="footer-desc">Verify before market scan runs</div></div>
  <div class="footer-btns">
    <button class="btn btn-ghost" onclick="goToStep(1)">← Back</button>
    <button class="btn btn-primary" onclick="goToStep(3)">Confirm & Launch →</button>
  </div>
</div>
</div>

<!-- =================== STEP 3: ADVISORY =================== -->
<div class="view" id="view-3">
<div class="main">

  <!-- SCAN PANEL -->
  <div class="scan-progress" id="scanPanel">
    <div class="scan-title">📡 Scanning Market <span id="scanStatus" style="font-size:14px;font-weight:700;color:var(--green-dark);">— initializing…</span></div>
    <div class="progress-track"><div class="progress-fill" id="scanBar" style="width:0%"></div></div>
    <div class="scan-status" id="scanMsg">Preparing market scan for ZIP 64133…</div>
    <div class="scan-list" id="scanList">
      <div class="scan-row"><div class="scan-dot running"></div>Locating self-storage businesses within 10 miles of 64133…</div>
      <div class="scan-row"><div class="scan-dot waiting"></div>Retrieving pricing data from business websites…</div>
      <div class="scan-row"><div class="scan-dot waiting"></div>Querying Jackson County property tax assessments…</div>
      <div class="scan-row"><div class="scan-dot waiting"></div>Looking up Kansas Secretary of State business records…</div>
      <div class="scan-row"><div class="scan-dot waiting"></div>Checking publicly traded parent companies (REIT data)…</div>
      <div class="scan-row"><div class="scan-dot waiting"></div>Retrieving cap rates & NOI data from sale records…</div>
      <div class="scan-row"><div class="scan-dot waiting"></div>Compiling brokers, lending rates & USDA FSA office…</div>
    </div>
  </div>

  <div id="results" style="display:none;">

    <div class="banner banner-warning">
      <span class="banner-icon">⚠️</span>
      <div><strong>Data Accuracy Notice:</strong> Pricing sourced from public websites & Google Business profiles. Property assessments from county records. Ownership from MO SOS filings. Blank cells indicate unavailable public data. Verify before financial commitments.</div>
    </div>

    <!-- STAT CARDS -->
    <div class="stat-row">
      <div class="stat-card"><div class="stat-lbl">Competitors Found</div><div class="stat-val">10</div><div class="stat-sub">Within 10-mile radius</div><div class="stat-icon">🏢</div></div>
      <div class="stat-card"><div class="stat-lbl">Avg 10×10 Rate</div><div class="stat-val">$89</div><div class="stat-sub">Non-climate, monthly</div><div class="stat-icon">💰</div></div>
      <div class="stat-card"><div class="stat-lbl">Avg. Cap Rate</div><div class="stat-val">6.2%</div><div class="stat-sub">Self-storage, KS market</div><div class="stat-icon">📈</div></div>
      <div class="stat-card"><div class="stat-lbl">Avg. Lending Rate</div><div class="stat-val">7.4%</div><div class="stat-sub">Commercial SBA 504</div><div class="stat-icon">🏦</div></div>
    </div>

    <!-- COMPETITOR TABLE -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">📊 Competitor Analysis</div>
        <div style="display:flex;gap:8px;">
          <button class="btn btn-secondary" style="padding:8px 16px;font-size:12px;">⬇ Export CSV</button>
          <button class="btn btn-secondary" style="padding:8px 16px;font-size:12px;">🖨 Print</button>
        </div>
      </div>
      <div class="tbl-wrap">
        <table class="tbl">
          <thead>
            <tr>
              <th rowspan="2" style="min-width:165px;">Business</th>
              <th rowspan="2" style="min-width:130px;">Owner / SOS</th>
              <th colspan="2" class="grp">Boat & Trailer</th>
              <th colspan="2" class="grp">Vehicle</th>
              <th colspan="4" class="grp">Non-Climate / mo</th>
              <th colspan="4" class="grp">Climate Controlled / mo</th>
              <th rowspan="2" style="min-width:110px;">Est. Biz Value</th>
              <th rowspan="2" style="min-width:110px;">Tax Assessment</th>
            </tr>
            <tr>
              <th>Covered</th><th>Uncovered</th><th>Covered</th><th>Uncovered</th>
              <th>5×5</th><th>10×15</th><th>10×20</th><th>10×30</th>
              <th>5×5</th><th>10×15</th><th>10×20</th><th>10×30</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><div class="biz-name">Public Storage</div><div class="biz-owner">E 67th Terrace</div><div class="biz-addr">8601 E 67th Terrace, KC MO 64133</div><div class="biz-rating">⭐ 4.5 (372)</div><div class="biz-phone">📞 (816) 291-4217</div><span class="badge-pill badge-pub">PUBLIC · PSA</span></td>
              <td><div style="font-size:12px;font-weight:800;">Public Storage Inc.</div><div style="font-size:10px;color:var(--muted2);">NYSE: PSA · Corp. Registered Agent</div><div style="font-size:11px;font-weight:700;color:var(--blue-dark);margin-top:5px;">Corp. IR: (818) 244-8080</div><div style="font-size:10px;color:var(--muted2);font-weight:600;font-style:italic;">Distinct from store number ↑</div></td>
              <td class="price-cell">$17</td><td class="price-cell na">—</td><td class="price-cell na">—</td><td class="price-cell na">—</td>
              <td class="price-cell">$40</td><td class="price-cell">$72</td><td class="price-cell">$95</td><td class="price-cell na">—</td>
              <td class="price-cell na">—</td><td class="price-cell">$110</td><td class="price-cell">$140</td><td class="price-cell na">—</td>
              <td class="val-cell">Corporate owned<br><span style="font-size:9px;color:var(--muted2);">~$1.8M est. value</span></td>
              <td class="val-cell">$618,000<br><span style="font-size:9px;color:var(--muted2);">2024 Assessment</span></td>
            </tr>
            <tr>
              <td><div class="biz-name">Public Storage</div><div class="biz-owner">E 47th Street</div><div class="biz-addr">9104 E 47th St, KC MO 64133</div><div class="biz-rating">⭐ 4.6 (425)</div><div class="biz-phone">📞 (816) 298-9771</div><span class="badge-pill badge-pub">PUBLIC · PSA</span></td>
              <td><div style="font-size:12px;font-weight:800;">Public Storage Inc.</div><div style="font-size:10px;color:var(--muted2);">NYSE: PSA · Corp. Registered Agent</div><div style="font-size:11px;font-weight:700;color:var(--blue-dark);margin-top:5px;">Corp. IR: (818) 244-8080</div><div style="font-size:10px;color:var(--muted2);font-weight:600;font-style:italic;">Distinct from store number ↑</div></td>
              <td class="price-cell">$33</td><td class="price-cell na">—</td><td class="price-cell na">—</td><td class="price-cell na">—</td>
              <td class="price-cell">$64</td><td class="price-cell">$95</td><td class="price-cell">$120</td><td class="price-cell na">—</td>
              <td class="price-cell na">—</td><td class="price-cell">$130</td><td class="price-cell">$165</td><td class="price-cell na">—</td>
              <td class="val-cell">Corporate owned</td><td class="val-cell">$892,000<br><span style="font-size:9px;color:var(--muted2);">2024 Assessment</span></td>
            </tr>
            <tr>
              <td><div class="biz-name">UpLift Self Storage</div><div class="biz-owner">63rd St / James A Reed Rd</div><div class="biz-addr">6301 James A Reed Rd, KC MO 64133</div><div class="biz-rating">⭐ 4.8 (94)</div><div class="biz-phone">📞 (816) 888-8046</div><span class="badge-pill badge-priv">PRIVATE</span></td>
              <td><div style="font-size:12px;font-weight:800;">UpLift Self Storage LLC</div><div style="font-size:10px;color:var(--muted2);">MO SOS — Active</div><div style="font-size:10px;color:var(--muted2);font-weight:600;font-style:italic;margin-top:5px;">No separate SOS phone on file — same as store line ↑</div></td>
              <td class="price-cell">$19</td><td class="price-cell na">—</td><td class="price-cell na">—</td><td class="price-cell na">—</td>
              <td class="price-cell">$55</td><td class="price-cell">$85</td><td class="price-cell">$110</td><td class="price-cell na">—</td>
              <td class="price-cell">$75</td><td class="price-cell">$115</td><td class="price-cell">$149</td><td class="price-cell na">—</td>
              <td class="val-cell">$700K–$1.1M</td><td class="val-cell">$341,200<br><span style="font-size:9px;color:var(--muted2);">2024 Assessment</span></td>
            </tr>
            <tr>
              <td><div class="biz-name">Simply Self Storage</div><div class="biz-owner">Raytown</div><div class="biz-addr">9624 E 350 Hwy, Raytown MO 64133</div><div class="biz-rating">⭐ 4.4 (88)</div><div class="biz-phone">📞 (816) 356-8321</div><span class="badge-pill badge-priv">PRIVATE</span></td>
              <td><div style="font-size:12px;font-weight:800;">Simply Self Storage LLC</div><div style="font-size:10px;color:var(--muted2);">MO SOS — Active</div><div style="font-size:10px;color:var(--muted2);font-weight:600;font-style:italic;margin-top:5px;">No separate SOS phone on file — same as store line ↑</div></td>
              <td class="price-cell na">—</td><td class="price-cell na">—</td><td class="price-cell na">—</td><td class="price-cell na">—</td>
              <td class="price-cell">$49</td><td class="price-cell">$79</td><td class="price-cell">$99</td><td class="price-cell">$139</td>
              <td class="price-cell na">—</td><td class="price-cell na">—</td><td class="price-cell na">—</td><td class="price-cell na">—</td>
              <td class="val-cell lo">$500K–$850K</td><td class="val-cell">$228,400</td>
            </tr>
            <tr>
              <td><div class="biz-name">CubeSmart Self Storage</div><div class="biz-owner">US Hwy 40</div><div class="biz-addr">14400 E US Hwy 40, KC MO 64136</div><div class="biz-rating">⭐ 4.7 (274)</div><div class="biz-phone">📞 (816) 298-5087</div><span class="badge-pill badge-pub">PUBLIC · CUBE</span></td>
              <td><div style="font-size:12px;font-weight:800;">CubeSmart L.P.</div><div style="font-size:10px;color:var(--muted2);">NYSE: CUBE · Corp. Registered Agent</div><div style="font-size:11px;font-weight:700;color:var(--blue-dark);margin-top:5px;">Corp. IR: (610) 293-5700</div><div style="font-size:10px;color:var(--muted2);font-weight:600;font-style:italic;">Distinct from store number ↑</div></td>
              <td class="price-cell">$14</td><td class="price-cell na">—</td><td class="price-cell na">—</td><td class="price-cell na">—</td>
              <td class="price-cell">$55</td><td class="price-cell">$88</td><td class="price-cell">$109</td><td class="price-cell">$145</td>
              <td class="price-cell na">—</td><td class="price-cell">$119</td><td class="price-cell">$155</td><td class="price-cell na">—</td>
              <td class="val-cell">Corporate owned</td><td class="val-cell">$774,000<br><span style="font-size:9px;color:var(--muted2);">2024 Assessment</span></td>
            </tr>
            <tr>
              <td><div class="biz-name">Public Storage</div><div class="biz-owner">Raytown — Woodson Rd</div><div class="biz-addr">7900 Woodson Rd, Raytown MO 64138</div><div class="biz-rating">⭐ 4.7 (469)</div><div class="biz-phone">📞 (816) 256-3156</div><span class="badge-pill badge-pub">PUBLIC · PSA</span></td>
              <td><div style="font-size:12px;font-weight:800;">Public Storage Inc.</div><div style="font-size:10px;color:var(--muted2);">NYSE: PSA · Corp. Registered Agent</div><div style="font-size:11px;font-weight:700;color:var(--blue-dark);margin-top:5px;">Corp. IR: (818) 244-8080</div><div style="font-size:10px;color:var(--muted2);font-weight:600;font-style:italic;">Distinct from store number ↑</div></td>
              <td class="price-cell">$30</td><td class="price-cell na">—</td><td class="price-cell na">—</td><td class="price-cell na">—</td>
              <td class="price-cell">$60</td><td class="price-cell">$89</td><td class="price-cell">$110</td><td class="price-cell na">—</td>
              <td class="price-cell na">—</td><td class="price-cell">$120</td><td class="price-cell">$150</td><td class="price-cell na">—</td>
              <td class="val-cell">Corporate owned</td><td class="val-cell">$541,800</td>
            </tr>
            <tr>
              <td><div class="biz-name">Public Storage</div><div class="biz-owner">Blue Pkwy</div><div class="biz-addr">13824 Blue Pkwy, KC MO 64139</div><div class="biz-rating">⭐ 4.5 (110)</div><div class="biz-phone">📞 (816) 479-7562</div><span class="badge-pill badge-pub">PUBLIC · PSA</span></td>
              <td><div style="font-size:12px;font-weight:800;">Public Storage Inc.</div><div style="font-size:10px;color:var(--muted2);">NYSE: PSA · Corp. Registered Agent</div><div style="font-size:11px;font-weight:700;color:var(--blue-dark);margin-top:5px;">Corp. IR: (818) 244-8080</div><div style="font-size:10px;color:var(--muted2);font-weight:600;font-style:italic;">Distinct from store number ↑</div></td>
              <td class="price-cell">$34</td><td class="price-cell na">—</td><td class="price-cell na">—</td><td class="price-cell na">—</td>
              <td class="price-cell">$65</td><td class="price-cell">$92</td><td class="price-cell">$115</td><td class="price-cell na">—</td>
              <td class="price-cell na">—</td><td class="price-cell">$125</td><td class="price-cell">$158</td><td class="price-cell na">—</td>
              <td class="val-cell">Corporate owned</td><td class="val-cell">$488,600</td>
            </tr>
            <tr>
              <td><div class="biz-name">Extra Space Storage</div><div class="biz-owner">Independence — E 42nd Terr</div><div class="biz-addr">13610 E 42nd Terr S, Indep. MO 64055</div><div class="biz-rating">⭐ 4.3 (532)</div><div class="biz-phone">📞 (816) 298-9775</div><span class="badge-pill badge-pub">PUBLIC · EXR</span></td>
              <td><div style="font-size:12px;font-weight:800;">Extra Space Storage Inc.</div><div style="font-size:10px;color:var(--muted2);">NYSE: EXR · Corp. Registered Agent</div><div style="font-size:11px;font-weight:700;color:var(--blue-dark);margin-top:5px;">Corp. IR: (801) 365-4600</div><div style="font-size:10px;color:var(--muted2);font-weight:600;font-style:italic;">Distinct from store number ↑</div></td>
              <td class="price-cell">$10</td><td class="price-cell na">—</td><td class="price-cell na">—</td><td class="price-cell na">—</td>
              <td class="price-cell">$45</td><td class="price-cell">$75</td><td class="price-cell">$95</td><td class="price-cell">$125</td>
              <td class="price-cell na">—</td><td class="price-cell">$105</td><td class="price-cell">$140</td><td class="price-cell na">—</td>
              <td class="val-cell">Corporate owned</td><td class="val-cell">$1,120,000<br><span style="font-size:9px;color:var(--muted2);">2024 Assessment</span></td>
            </tr>
            <tr>
              <td><div class="biz-name">Public Storage</div><div class="biz-owner">E US Hwy 40</div><div class="biz-addr">14400 E US Hwy 40, KC MO 64136</div><div class="biz-rating">⭐ 4.5 (274)</div><div class="biz-phone">📞 (816) 339-0434</div><span class="badge-pill badge-pub">PUBLIC · PSA</span></td>
              <td><div style="font-size:12px;font-weight:800;">Public Storage Inc.</div><div style="font-size:10px;color:var(--muted2);">NYSE: PSA · Corp. Registered Agent</div><div style="font-size:11px;font-weight:700;color:var(--blue-dark);margin-top:5px;">Corp. IR: (818) 244-8080</div><div style="font-size:10px;color:var(--muted2);font-weight:600;font-style:italic;">Distinct from store number ↑</div></td>
              <td class="price-cell">$11</td><td class="price-cell na">—</td><td class="price-cell na">—</td><td class="price-cell na">—</td>
              <td class="price-cell">$40</td><td class="price-cell">$70</td><td class="price-cell">$90</td><td class="price-cell na">—</td>
              <td class="price-cell na">—</td><td class="price-cell">$100</td><td class="price-cell">$130</td><td class="price-cell na">—</td>
              <td class="val-cell">Corporate owned</td><td class="val-cell">$612,400</td>
            </tr>
            <tr>
              <td><div class="biz-name">StorageMart</div><div class="biz-owner">Hwy 40 / Blue Springs</div><div class="biz-addr">2300 US-40, Blue Springs MO 64015</div><div class="biz-rating">⭐ 4.6 (201)</div><div class="biz-phone">📞 (816) 229-5050</div><span class="badge-pill badge-priv">PRIVATE</span></td>
              <td><div style="font-size:12px;font-weight:800;">StorageMart Holdings LLC</div><div style="font-size:10px;color:var(--muted2);">MO SOS — Active · Private</div><div style="font-size:10px;color:var(--muted2);font-weight:600;font-style:italic;margin-top:5px;">No separate SOS phone on file — same as store line ↑</div></td>
              <td class="price-cell na">—</td><td class="price-cell na">—</td><td class="price-cell na">—</td><td class="price-cell na">—</td>
              <td class="price-cell">$50</td><td class="price-cell">$80</td><td class="price-cell">$105</td><td class="price-cell">$140</td>
              <td class="price-cell">$65</td><td class="price-cell">$110</td><td class="price-cell">$145</td><td class="price-cell na">—</td>
              <td class="val-cell">$1.2M–$2.0M</td><td class="val-cell">$558,800</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- OPPORTUNITY GAP -->
    <div class="card">
      <div class="card-header"><div class="card-title">🎯 Opportunity Gap Analysis</div></div>
      <div class="card-body">
        <div style="font-size:14px;font-weight:600;color:var(--muted);margin-bottom:4px;">Unit types with the strongest unmet demand based on your selections vs. market supply:</div>
        <div class="gap-grid">
          <div class="gap-card hot">
            <div class="gap-title">❄️ Climate Controlled <span class="hot-chip">HOT</span></div>
            <div class="gap-stat">Providers in market: <b>2 of 10</b></div>
            <div class="gap-stat">Avg rate: <b>$99–$159/mo</b></div>
            <div class="gap-stat">Gap score: <b>HIGH</b></div>
            <div class="opp-track"><div class="opp-fill hi" style="width:88%"></div></div>
          </div>
          <div class="gap-card hot">
            <div class="gap-title">🚤 Covered Boat/Trailer <span class="hot-chip">HOT</span></div>
            <div class="gap-stat">Providers in market: <b>0 of 10</b></div>
            <div class="gap-stat">Avg rate: <b>$120–$200/mo</b></div>
            <div class="gap-stat">Gap score: <b>VERY HIGH</b></div>
            <div class="opp-track"><div class="opp-fill hi" style="width:97%"></div></div>
          </div>
          <div class="gap-card">
            <div class="gap-title">🚘 Covered Vehicle Storage</div>
            <div class="gap-stat">Providers in market: <b>1 of 10</b></div>
            <div class="gap-stat">Avg rate: <b>$75–$120/mo</b></div>
            <div class="gap-stat">Gap score: <b>MEDIUM</b></div>
            <div class="opp-track"><div class="opp-fill med" style="width:58%"></div></div>
          </div>
          <div class="gap-card">
            <div class="gap-title">📦 10×30 Non-Climate</div>
            <div class="gap-stat">Providers in market: <b>3 of 10</b></div>
            <div class="gap-stat">Avg rate: <b>$129–$152/mo</b></div>
            <div class="gap-stat">Gap score: <b>MEDIUM</b></div>
            <div class="opp-track"><div class="opp-fill med" style="width:52%"></div></div>
          </div>
          <div class="gap-card">
            <div class="gap-title">📦 5×5 Small Units</div>
            <div class="gap-stat">Providers in market: <b>5 of 10</b></div>
            <div class="gap-stat">Avg rate: <b>$18–$45/mo</b></div>
            <div class="gap-stat">Gap score: <b>LOW</b></div>
            <div class="opp-track"><div class="opp-fill lo" style="width:28%"></div></div>
          </div>
          <div class="gap-card">
            <div class="gap-title">📦 10×15–10×20 Standard</div>
            <div class="gap-stat">Providers in market: <b>8 of 10</b></div>
            <div class="gap-stat">Avg rate: <b>$65–$119/mo</b></div>
            <div class="gap-stat">Gap score: <b>LOW</b></div>
            <div class="opp-track"><div class="opp-fill lo" style="width:18%"></div></div>
          </div>
        </div>
      </div>
    </div>

    <!-- BROKERS & USDA -->
    <div class="card">
      <div class="card-header"><div class="card-title">🏦 Lenders, Brokers & USDA FSA</div></div>
      <div class="card-body" style="padding:0;">
        <div class="broker-tbl-wrap" style="overflow-x:auto;-webkit-overflow-scrolling:touch;">
        <table class="broker-tbl">
          <thead>
            <tr><th>Institution</th><th>Type</th><th>Rate</th><th>Loan Types</th><th>Specialty</th><th>Address</th><th>Phone</th></tr>
          </thead>
          <tbody>
            <tr>
              <td><div class="broker-name">Landmark National Bank</div><div style="font-size:11px;color:var(--muted2);">Kansas City, MO</div></td>
              <td><span class="badge-pill badge-priv">Regional Bank</span></td>
              <td><span class="broker-rate">7.25%</span></td>
              <td>SBA 7(a), Conventional</td><td>Small business CRE, self-storage</td>
              <td><div class="broker-addr">200 S. Broadway<br>Kansas City, MO 64133</div></td>
              <td><div class="broker-ph">(816) 234-2000</div></td>
            </tr>
            <tr>
              <td><div class="broker-name">Midwest BankCentre</div><div style="font-size:11px;color:var(--muted2);">Kansas City, MO</div></td>
              <td><div style="font-size:11px;">Kansas City's largest locally owned bank · commercial RE, SBA, construction loans</div></td>
              <td><div class="broker-addr">2191 Lemay Ferry Rd<br>St. Louis, MO 63125</div></td>
              <td><div class="broker-ph">(314) 631-5500</div></td>
            </tr>
            <tr>
              <td><div class="broker-name">CBRE Kansas City</div><div style="font-size:11px;color:var(--muted2);">KC Metro Region</div></td>
              <td><span class="badge-pill badge-pub">CRE Broker</span></td>
              <td><span class="broker-rate">6.90%</span></td>
              <td>Bridge, CMBS, Life Co.</td><td>Industrial & self-storage acquisitions</td>
              <td><div class="broker-addr">4520 Main St, Ste 1000<br>Kansas City, MO 64111</div></td>
              <td><div class="broker-ph">(816) 960-5000</div></td>
            </tr>
            <tr>
              <td><div class="broker-name">Midland States Bank</div><div style="font-size:11px;color:var(--muted2);">Self-Storage Division</div></td>
              <td><span class="badge-pill badge-priv">Specialty Lender</span></td>
              <td><span class="broker-rate">7.55%</span></td>
              <td>Storage construction & perm</td><td>National self-storage specialist</td>
              <td><div class="broker-addr">National — call for nearest</div></td>
              <td><div class="broker-ph">(800) 771-3919</div></td>
            </tr>
            <tr>
              <td><div class="broker-name">SBA District Office — KS</div><div style="font-size:11px;color:var(--muted2);">Federal Program</div></td>
              <td><span class="badge-pill" style="color:var(--blue-dark);background:var(--blue-pale);border-color:#AADBF5;">SBA</span></td>
              <td><span class="broker-rate">6.75%</span></td>
              <td>SBA 504 (10–25yr fixed)</td><td>New construction, owner-occupied CRE</td>
              <td><div class="broker-addr">271 W 3rd St N, Ste 2500<br>Wichita, KS 67202</div></td>
              <td><div class="broker-ph">(316) 269-6616</div></td>
            </tr>
            <tr class="usda-row">
              <td>
                <div class="broker-name" style="color:var(--green-dark);">USDA Farm Service Agency</div>
                <div style="font-size:11px;color:var(--muted2);">USDA Rural Development · MO State Office</div>
                <span class="badge-pill badge-govt" style="margin-top:4px;display:inline-flex;">🌾 USDA B&amp;I</span>
              </td>
              <td><span class="badge-pill badge-govt">Federal — USDA</span></td>
              <td><span class="broker-rate" style="color:var(--green-dark);">Varies</span><div style="font-size:10px;color:var(--muted2);margin-top:2px;">Rural dev. programs</div></td>
              <td>Farm Loans, Rural Dev., B&amp;I Loans</td>
              <td>Rural commercial RE, land acquisition, rural development grants</td>
              <td><div class="broker-addr"><strong style="color:var(--text);">601 Business Loop 70 W</strong><br>Columbia, MO 65203</div></td>
              <td><div class="broker-ph">(573) 876-0976</div><div style="font-size:11px;color:var(--muted2);margin-top:3px;">National: (877) 508-8364</div></td>
            </tr>
          </tbody>
        </table>
        </div><!-- end broker-tbl-wrap -->
      </div>
    </div>

    <!-- BUILDERS -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">🏗️ Recommended Facility Builders</div>
        <div style="font-size:12px;font-weight:700;color:var(--muted2);">Top Regional + Nationwide Turnkey Solutions</div>
      </div>
      <div class="card-body">
        <div class="banner banner-info" style="margin-bottom:22px;">
          <span class="banner-icon">ℹ️</span>
          <div>Regional builders offer local code knowledge and hands-on project management. Nationwide <strong>"shake and bake"</strong> providers ship pre-engineered kit systems that can go from land to ribbon-cutting in as little as 90–120 days for smaller facilities. Builder ratings based on Inside Self Storage (ISS) Best Builder Awards and industry reviews.</div>
        </div>

        <div class="section-head"><span class="section-head-line">📍 Top 3 Rated Regional Builders — KS / MO Market</span></div>

        <div class="builder-grid">
          <!-- MAR -->
          <div class="builder-card top">
            <div class="bc-head">
              <div><div class="bc-name">MAR Building Solutions</div><div class="bc-loc">Kansas City, MO · Butler Manufacturing Partner</div></div>
              <span class="rank-badge rank-1">#1 Local</span>
            </div>
            <div class="bc-body">
              <div class="bc-stat">Founded: <b>2010 · Kansas City based</b></div>
              <div class="bc-stat">Serves: <b>MO &amp; KS statewide</b></div>
              <div class="bc-stat">Timeline: <b>4–8 months</b></div>
              <div class="bc-stat">Est. $/sq ft: <b>$45–$75</b></div>
              <div class="bc-tags">
                <span class="bc-tag">Single-Story</span><span class="bc-tag">Climate-Control</span>
                <span class="bc-tag">Boat/RV Canopy</span><span class="bc-tag">Butler Systems</span>
              </div>
              <div class="bc-why">💡 Only Kansas City-area Butler Builder with a deep self-storage focus. Reviews zoning &amp; codes <em>before</em> land purchase — a key advantage for first-time developers.</div>
            </div>
            <div class="bc-contact">
              <div><div class="bc-ph">(816) 295-8000</div><div class="bc-web">marbuildingsolutions.com</div></div>
              <span class="badge-pill badge-priv">KC-Based GC</span>
            </div>
          </div>

          <!-- ARCO/Murray -->
          <div class="builder-card">
            <div class="bc-head">
              <div><div class="bc-name">ARCO/Murray Design Build</div><div class="bc-loc">St. Louis, MO · ENR Top 400 Contractor</div></div>
              <span class="rank-badge rank-2">#2 Regional</span>
            </div>
            <div class="bc-body">
              <div class="bc-stat">Founded: <b>1992 · St. Louis HQ</b></div>
              <div class="bc-stat">Serves: <b>Nationwide, Midwest focus</b></div>
              <div class="bc-stat">Timeline: <b>6–14 months</b></div>
              <div class="bc-stat">Est. $/sq ft: <b>$60–$110</b></div>
              <div class="bc-tags">
                <span class="bc-tag">Multi-Story</span><span class="bc-tag">Climate-Control</span>
                <span class="bc-tag">Large-Scale</span><span class="bc-tag">Design-Build</span>
              </div>
              <div class="bc-why">💡 ENR Top 400 contractor. Best for medium-to-large or multi-story builds. Has built for CubeSmart, Guardian Storage, and U-Haul in the Midwest.</div>
            </div>
            <div class="bc-contact">
              <div><div class="bc-ph">(314) 567-9000</div><div class="bc-web">arcomurray.com</div></div>
              <span class="badge-pill badge-pub">National GC</span>
            </div>
          </div>

          <!-- Koehn -->
          <div class="builder-card">
            <div class="bc-head">
              <div><div class="bc-name">Koehn Building Systems</div><div class="bc-loc">Rich Hill, MO · Metal Building Specialists</div></div>
              <span class="rank-badge rank-3">#3 Regional</span>
            </div>
            <div class="bc-body">
              <div class="bc-stat">Serves: <b>MO, KS, NE, IA, OK, AR</b></div>
              <div class="bc-stat">Timeline: <b>3–6 months</b></div>
              <div class="bc-stat">Est. $/sq ft: <b>$35–$60</b></div>
              <div class="bc-tags">
                <span class="bc-tag">Metal Kits</span><span class="bc-tag">Climate Units</span>
                <span class="bc-tag">RV/Boat Canopy</span><span class="bc-tag">Own Concrete Crew</span>
              </div>
              <div class="bc-why">💡 Best budget option for a first-time small-to-medium facility in KS/MO. Handles their own concrete foundations and steel erection across all 6 regional states.</div>
            </div>
            <div class="bc-contact">
              <div><div class="bc-ph">(417) 395-4305</div><div class="bc-web">koehnbuildings.com</div></div>
              <span class="badge-pill badge-priv">Regional Metal</span>
            </div>
          </div>
        </div>

        <div class="section-head" style="margin-top:8px;"><span class="section-head-line">🚀 Nationwide "Shake &amp; Bake" Turnkey Solutions</span></div>
        <div style="font-size:14px;font-weight:600;color:var(--muted);margin-bottom:18px;line-height:1.6;">Pre-engineered kit systems shipped anywhere in the US and erected quickly by local crews — dramatically compressed timelines. Perfect for first-time owners who want a proven, repeatable system with minimal guesswork.</div>

        <div class="turnkey-grid">
          <!-- MakoRabco -->
          <div class="tk-card">
            <div class="tk-head">
              <div><div class="tk-name">MakoRabco</div><div style="font-size:12px;font-weight:700;color:var(--muted2);">Carlsbad, CA &amp; Winter Garden, FL · Nationwide</div></div>
              <span class="tk-award">🏆 ISS Best Builder × 10</span>
            </div>
            <div class="tk-body">
              <div class="tk-grid">
                <div class="tk-kv"><div class="tk-k">Experience</div><div class="tk-v">30+ yrs · 4,000+ facilities</div></div>
                <div class="tk-kv"><div class="tk-k">Coverage</div><div class="tk-v">All 50 states</div></div>
                <div class="tk-kv"><div class="tk-k">Build Types</div><div class="tk-v">Single/multi-story, climate, boat/RV, conversions</div></div>
                <div class="tk-kv"><div class="tk-k">Timeline</div><div class="tk-v" style="color:var(--green-dark);">90–150 days</div></div>
              </div>
              <div class="bc-tags" style="margin-bottom:14px;">
                <span class="bc-tag">Design-Build</span><span class="bc-tag">PE-Stamped Engineering</span>
                <span class="bc-tag">Trachte Partner</span><span class="bc-tag">Boat/RV Canopy</span>
              </div>
              <div class="tk-how">🔧 <strong>How "shake &amp; bake" works:</strong> MakoRabco designs your layout, engineers all structural drawings (PE-stamped for your state), fabricates the metal building kit, ships it to your site, and coordinates local erection crews. You handle the concrete pad — they handle everything else. First-time owners receive guidance from concept through grand opening.</div>
            </div>
            <div class="tk-foot">
              <div><div class="tk-ph">833-MAKO4ME</div><div style="font-size:11px;font-weight:700;color:var(--muted2);">(833-625-6463)</div></div>
              <div><div class="tk-web">makorabco.com</div><div style="font-size:11px;font-weight:600;color:var(--muted2);">Free quote available</div></div>
            </div>
          </div>

          <!-- Trachte -->
          <div class="tk-card">
            <div class="tk-head" style="background:linear-gradient(135deg, var(--blue-pale), var(--white));">
              <div><div class="tk-name">Trachte Building Systems</div><div style="font-size:12px;font-weight:700;color:var(--muted2);">Sun Prairie, WI · US &amp; Canada · Since 1893</div></div>
              <span class="tk-award" style="background:var(--blue);box-shadow:0 2px 0 var(--blue-dark);">🏭 130+ Years</span>
            </div>
            <div class="tk-body">
              <div class="tk-grid">
                <div class="tk-kv"><div class="tk-k">Experience</div><div class="tk-v">130+ years manufacturing</div></div>
                <div class="tk-kv"><div class="tk-k">Coverage</div><div class="tk-v">US &amp; Canada dealer network</div></div>
                <div class="tk-kv"><div class="tk-k">Build Types</div><div class="tk-v">Drive-up, multi-story, climate hallway, conversions</div></div>
                <div class="tk-kv"><div class="tk-k">Timeline</div><div class="tk-v" style="color:var(--blue-dark);">60–120 days kit delivery</div></div>
              </div>
              <div class="bc-tags" style="margin-bottom:14px;">
                <span class="bc-tag">Steel Kit Systems</span><span class="bc-tag">Hallway Systems</span>
                <span class="bc-tag">Roll-Up Door Mfg.</span><span class="bc-tag">Interior Partitions</span>
              </div>
              <div class="tk-how" style="background:var(--blue-pale);border-color:#AADBF5;color:#0B4F6E;">🔧 <strong>How "shake &amp; bake" works:</strong> Trachte manufactures the complete building system — framing, wall panels, roofing, hallway systems, and Trac-Rite roll-up doors — all pre-cut and numbered for fast field assembly. Your local GC bolts it together like a giant kit. Factory-direct = lower material costs and tight dimensional tolerances.</div>
            </div>
            <div class="tk-foot">
              <div><div class="tk-ph">(800) 356-5824</div><div style="font-size:11px;font-weight:700;color:var(--muted2);">Sun Prairie, WI HQ</div></div>
              <div><div class="tk-web">trachte.com</div><div style="font-size:11px;font-weight:600;color:var(--muted2);">Dealer locator available</div></div>
            </div>
          </div>
        </div>

        <!-- Comparison table -->
        <div class="section-head" style="margin-top:28px;"><span class="section-head-line">📊 Quick Builder Comparison</span></div>
        <div class="broker-tbl-wrap" style="overflow-x:auto;-webkit-overflow-scrolling:touch;border:2px solid var(--border);border-radius:var(--radius-md);">
        <div class="tbl-wrap" style="margin-bottom:0;border:none;border-radius:0;">
          <table class="tbl" style="min-width:620px;">
            <thead>
              <tr><th>Builder</th><th>Type</th><th>Best For</th><th>Timeline</th><th>Est. $/sq ft</th><th>Coverage</th><th>Phone</th></tr>
            </thead>
            <tbody>
              <tr><td><div class="biz-name">MAR Building Solutions</div><div class="biz-addr">Kansas City, MO</div></td><td><span class="badge-pill badge-priv">Regional GC</span></td><td>Small–Large · New dev · Zoning help</td><td class="price-cell">4–8 mo</td><td class="price-cell">$45–$75</td><td>MO &amp; KS</td><td class="broker-ph">(816) 295-8000</td></tr>
              <tr><td><div class="biz-name">ARCO/Murray Design Build</div><div class="biz-addr">St. Louis, MO</div></td><td><span class="badge-pill badge-pub">National GC</span></td><td>Large · Multi-story · REIT-grade</td><td class="price-cell">6–14 mo</td><td class="price-cell">$60–$110</td><td>Nationwide</td><td class="broker-ph">(314) 567-9000</td></tr>
              <tr><td><div class="biz-name">Koehn Building Systems</div><div class="biz-addr">Rich Hill, MO</div></td><td><span class="badge-pill badge-priv">Regional Metal</span></td><td>Small–Med · Budget-friendly</td><td class="price-cell">3–6 mo</td><td class="price-cell">$35–$60</td><td>MO/KS/NE/IA</td><td class="broker-ph">(417) 395-4305</td></tr>
              <tr style="background:var(--green-bg);"><td><div class="biz-name" style="color:var(--green-dark);">MakoRabco 🏆</div><div class="biz-addr">Carlsbad, CA</div></td><td><span class="badge-pill badge-priv">Turnkey Kit</span></td><td>All sizes · First-timer friendly</td><td class="price-cell">90–150 days</td><td class="price-cell">$40–$80</td><td>All 50 states</td><td class="broker-ph">833-625-6463</td></tr>
              <tr style="background:var(--blue-pale);"><td><div class="biz-name" style="color:var(--blue-dark);">Trachte Building Systems</div><div class="biz-addr">Sun Prairie, WI</div></td><td><span class="badge-pill badge-pub">Kit Manufacturer</span></td><td>All sizes · Lowest material cost</td><td class="price-cell">60–120 days</td><td class="price-cell">$30–$65</td><td>US &amp; Canada</td><td class="broker-ph">(800) 356-5824</td></tr>
            </tbody>
          </table>
        </div>
        </div><!-- end broker-tbl-wrap -->
        <p style="font-size:11px;font-weight:700;color:var(--muted2);text-align:center;margin:4px 0 0;padding:4px;">← Scroll to see all columns →</p>

      </div>
    </div>

    <div class="btn-row">
      <button class="btn btn-ghost" onclick="goToStep(2)">← Back to Review</button>
      <button class="btn btn-primary" onclick="goToStep(4)">Proceed to Site Selection →</button>
    </div>
  </div>

</div>
<div class="footer-bar">
  <div class="footer-step"><div class="footer-name">Step 3: Advisory</div><div class="footer-desc">Market intelligence · ZIP 64133 · 10-mile radius</div></div>
  <div class="footer-btns">
    <button class="btn btn-ghost" onclick="goToStep(2)">← Back</button>
    <button class="btn btn-primary" id="advNext" onclick="goToStep(4)" style="display:none;">Next: Site Selection →</button>
  </div>
</div>
</div>

<!-- =================== STEP 4: SITE SELECTION =================== -->
<div class="view" id="view-4">
<div class="main">

  <div class="card">
    <div class="card-header">
      <div class="card-title">📍 Site Selection & Parcel Evaluation <span class="chip">Step 4 of 6</span></div>
      <div style="font-size:13px;font-weight:700;color:var(--muted2);">Score and compare candidate sites before committing capital</div>
    </div>
    <div class="card-body">
      <div class="banner banner-info">
        <span class="banner-icon">ℹ️</span>
        <div>Add up to 4 candidate sites below. Score each against key development criteria. The tool calculates a weighted composite score to help rank your options. <strong>All data is entered manually</strong> — verify zoning and parcel data with Jackson County Planning &amp; Zoning (or Kansas City, MO Planning Dept.) before acquiring any property.</div>
      </div>

      <!-- SITE ENTRY CARDS -->
      <div class="section-head"><span class="section-head-line">Candidate Sites</span></div>
      <div id="siteCards" style="display:flex;flex-direction:column;gap:16px;margin-bottom:20px;">

        <!-- Site 1 -->
        <div class="site-entry-card" data-site="1">
          <div class="site-entry-head">
            <div style="display:flex;align-items:center;gap:10px;">
              <div class="site-num">1</div>
              <div>
                <div class="form-input" contenteditable="true" style="min-width:280px;display:inline-block;padding:8px 14px;font-weight:800;font-size:15px;" id="sname1" oninput="recalcSite(1)">7000 E Truman Rd, Kansas City MO 64133</div>
              </div>
            </div>
            <div style="display:flex;gap:8px;align-items:center;">
              <div class="site-score-badge" id="sbadge1">—</div>
            </div>
          </div>
          <div class="site-entry-body">
            <div class="site-criteria-grid">
              <div class="sc-row"><span class="sc-lbl">Acres Available</span><input class="form-input sc-inp" type="number" step="0.5" min="0" value="4.5" id="s1_acres" oninput="recalcSite(1)"><span class="sc-unit">ac</span></div>
              <div class="sc-row"><span class="sc-lbl">Asking Price</span><span class="pfx-sym" style="position:static;transform:none;font-size:14px;">$</span><input class="form-input sc-inp" type="text" value="425,000" id="s1_price" oninput="recalcSite(1)"><span class="sc-unit">total</span></div>
              <div class="sc-row"><span class="sc-lbl">$/Acre</span><input class="form-input sc-inp" type="text" id="s1_peracre" readonly style="background:var(--green-bg);color:var(--green-dark);font-weight:900;"><span class="sc-unit">est.</span></div>
              <div class="sc-row"><span class="sc-lbl">Road Frontage</span>
                <select class="form-select sc-inp" id="s1_front" onchange="recalcSite(1)">
                  <option value="3">Major highway / signalized</option>
                  <option value="2" selected>Secondary arterial</option>
                  <option value="1">Residential / low traffic</option>
                </select>
              </div>
              <div class="sc-row"><span class="sc-lbl">Zoning Status</span>
                <select class="form-select sc-inp" id="s1_zone" onchange="recalcSite(1)">
                  <option value="3" selected>Already zoned commercial / industrial</option>
                  <option value="2">Requires CUP / variance</option>
                  <option value="1">Rezoning required</option>
                  <option value="0">Zoning unknown</option>
                </select>
              </div>
              <div class="sc-row"><span class="sc-lbl">Utilities on Site</span>
                <select class="form-select sc-inp" id="s1_util" onchange="recalcSite(1)">
                  <option value="3" selected>Water, sewer, electric at lot line</option>
                  <option value="2">Electric only — need well/septic</option>
                  <option value="1">No utilities — full extension needed</option>
                </select>
              </div>
              <div class="sc-row"><span class="sc-lbl">Visibility / Traffic</span>
                <select class="form-select sc-inp" id="s1_vis" onchange="recalcSite(1)">
                  <option value="3">Excellent — high daily count, visible from road</option>
                  <option value="2" selected>Good — moderate traffic, signage possible</option>
                  <option value="1">Poor — hidden / back road</option>
                </select>
              </div>
              <div class="sc-row"><span class="sc-lbl">Flood Zone</span>
                <select class="form-select sc-inp" id="s1_flood" onchange="recalcSite(1)">
                  <option value="3" selected>Zone X — minimal flood risk</option>
                  <option value="2">Zone AE — 100yr floodplain, insurable</option>
                  <option value="1">Zone VE / floodway — high risk</option>
                  <option value="0">Unknown — FEMA check needed</option>
                </select>
              </div>
              <div class="sc-row"><span class="sc-lbl">Competition Proximity</span>
                <select class="form-select sc-inp" id="s1_comp" onchange="recalcSite(1)">
                  <option value="3">No storage within 2 miles</option>
                  <option value="2" selected>1–2 competitors within 2 miles</option>
                  <option value="1">3+ competitors within 2 miles</option>
                </select>
              </div>
              <div class="sc-row col-2"><span class="sc-lbl">Notes</span><input class="form-input" type="text" placeholder="Parcel #, owner contact, inspection notes…" id="s1_notes" style="flex:1;"></div>
            </div>
          </div>
        </div>

        <!-- Site 2 -->
        <div class="site-entry-card" data-site="2">
          <div class="site-entry-head">
            <div style="display:flex;align-items:center;gap:10px;">
              <div class="site-num" style="background:var(--blue);box-shadow:0 3px 0 var(--blue-dark);">2</div>
              <div>
                <div class="form-input" contenteditable="true" style="min-width:280px;display:inline-block;padding:8px 14px;font-weight:800;font-size:15px;" id="sname2" oninput="recalcSite(2)">Hwy 73 Corridor — Lansing, KS</div>
              </div>
            </div>
            <div style="display:flex;gap:8px;align-items:center;">
              <div class="site-score-badge" id="sbadge2" style="background:var(--blue-pale);border-color:#AADBF5;color:var(--blue-dark);">—</div>
            </div>
          </div>
          <div class="site-entry-body">
            <div class="site-criteria-grid">
              <div class="sc-row"><span class="sc-lbl">Acres Available</span><input class="form-input sc-inp" type="number" step="0.5" min="0" value="6.0" id="s2_acres" oninput="recalcSite(2)"><span class="sc-unit">ac</span></div>
              <div class="sc-row"><span class="sc-lbl">Asking Price</span><span class="pfx-sym" style="position:static;transform:none;font-size:14px;">$</span><input class="form-input sc-inp" type="text" value="680,000" id="s2_price" oninput="recalcSite(2)"><span class="sc-unit">total</span></div>
              <div class="sc-row"><span class="sc-lbl">$/Acre</span><input class="form-input sc-inp" type="text" id="s2_peracre" readonly style="background:var(--blue-pale);color:var(--blue-dark);font-weight:900;"><span class="sc-unit">est.</span></div>
              <div class="sc-row"><span class="sc-lbl">Road Frontage</span>
                <select class="form-select sc-inp" id="s2_front" onchange="recalcSite(2)">
                  <option value="3" selected>Major highway / signalized</option>
                  <option value="2">Secondary arterial</option>
                  <option value="1">Residential / low traffic</option>
                </select>
              </div>
              <div class="sc-row"><span class="sc-lbl">Zoning Status</span>
                <select class="form-select sc-inp" id="s2_zone" onchange="recalcSite(2)">
                  <option value="3">Already zoned commercial / industrial</option>
                  <option value="2" selected>Requires CUP / variance</option>
                  <option value="1">Rezoning required</option>
                  <option value="0">Zoning unknown</option>
                </select>
              </div>
              <div class="sc-row"><span class="sc-lbl">Utilities on Site</span>
                <select class="form-select sc-inp" id="s2_util" onchange="recalcSite(2)">
                  <option value="3" selected>Water, sewer, electric at lot line</option>
                  <option value="2">Electric only — need well/septic</option>
                  <option value="1">No utilities — full extension needed</option>
                </select>
              </div>
              <div class="sc-row"><span class="sc-lbl">Visibility / Traffic</span>
                <select class="form-select sc-inp" id="s2_vis" onchange="recalcSite(2)">
                  <option value="3" selected>Excellent — high daily count, visible from road</option>
                  <option value="2">Good — moderate traffic, signage possible</option>
                  <option value="1">Poor — hidden / back road</option>
                </select>
              </div>
              <div class="sc-row"><span class="sc-lbl">Flood Zone</span>
                <select class="form-select sc-inp" id="s2_flood" onchange="recalcSite(2)">
                  <option value="3" selected>Zone X — minimal flood risk</option>
                  <option value="2">Zone AE — 100yr floodplain, insurable</option>
                  <option value="1">Zone VE / floodway — high risk</option>
                  <option value="0">Unknown — FEMA check needed</option>
                </select>
              </div>
              <div class="sc-row"><span class="sc-lbl">Competition Proximity</span>
                <select class="form-select sc-inp" id="s2_comp" onchange="recalcSite(2)">
                  <option value="3">No storage within 2 miles</option>
                  <option value="2">1–2 competitors within 2 miles</option>
                  <option value="1" selected>3+ competitors within 2 miles</option>
                </select>
              </div>
              <div class="sc-row col-2"><span class="sc-lbl">Notes</span><input class="form-input" type="text" placeholder="Parcel #, owner contact, inspection notes…" id="s2_notes" style="flex:1;"></div>
            </div>
          </div>
        </div>

      </div>

      <!-- ADD SITE BUTTON -->
      <button class="btn btn-secondary" onclick="addSiteCard()" id="addSiteBtn" style="margin-bottom:28px;">+ Add Another Site</button>

      <!-- COMPARISON TABLE -->
      <div class="section-head"><span class="section-head-line">📊 Site Comparison Scorecard</span></div>
      <div class="scorecard-scroll-wrap">
        <div class="tbl-wrap" style="margin-bottom:0;border:none;border-radius:0;">
          <table class="tbl" id="siteCompTable" style="min-width:760px;">
            <thead>
              <tr>
                <th style="min-width:180px;">Site</th>
                <th>Acres</th>
                <th>Ask Price</th>
                <th>$/Acre</th>
                <th>Frontage</th>
                <th>Zoning</th>
                <th>Utilities</th>
                <th>Visibility</th>
                <th>Flood</th>
                <th>Competition</th>
                <th style="background:var(--green-bg);color:var(--green-dark);">Score /27</th>
                <th style="background:var(--green-bg);color:var(--green-dark);">Grade</th>
              </tr>
            </thead>
            <tbody id="siteCompBody">
            </tbody>
          </table>
        </div>
      </div>
      <p style="font-size:11px;font-weight:700;color:var(--muted2);text-align:center;margin:-10px 0 24px;padding:6px;">← Scroll left / right to see all columns →</p>

      <!-- ZONING CHECKLIST -->
      <div class="section-head"><span class="section-head-line">✅ Due Diligence Checklist</span></div>
      <div class="banner banner-warning" style="margin-bottom:16px;">
        <span class="banner-icon">⚠️</span>
        <div>Complete all items below before signing a purchase agreement. Check each item as you verify it. Items left unchecked represent open risk going into closing.</div>
      </div>
      <div class="cb-grid" style="margin-bottom:24px;">
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">Zoning confirmed with county planning dept.</div><div class="cb-sub">Get written confirmation of permitted use</div></div></div>
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">FEMA Flood Map reviewed (FIRM panel)</div><div class="cb-sub">msc.fema.gov — confirm Zone X for preferred sites</div></div></div>
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">Phase I Environmental Assessment ordered</div><div class="cb-sub">Required by most lenders before closing</div></div></div>
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">Title search & title insurance commitment</div><div class="cb-sub">Confirm clean chain of title, no liens</div></div></div>
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">Boundary survey / ALTA survey ordered</div><div class="cb-sub">Confirm acreage, easements, encroachments</div></div></div>
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">Utility stub-in costs estimated</div><div class="cb-sub">Water, sewer, electric — get quotes from utility co.</div></div></div>
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">Traffic count data obtained</div><div class="cb-sub">KDOT or county traffic count for ingress road</div></div></div>
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">Geotechnical / soil report reviewed</div><div class="cb-sub">Expansive soils can significantly raise foundation costs</div></div></div>
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">Building permits pre-application filed</div><div class="cb-sub">Confirm timeline and requirements with city/county</div></div></div>
        <div class="cb-item" onclick="toggleCb(this)"><div class="cb-box"></div><div><div class="cb-txt">Competitive radius re-confirmed</div><div class="cb-sub">Drive the 2-mile radius — look for new construction signs</div></div></div>
      </div>

      <div class="btn-row">
        <button class="btn btn-ghost" onclick="goToStep(3)">← Back to Advisory</button>
        <button class="btn btn-primary" onclick="goToStep(5)">Proceed to Business Plan →</button>
      </div>
    </div>
  </div>

</div>
<div class="footer-bar">
  <div class="footer-step"><div class="footer-name">Step 4: Site Selection</div><div class="footer-desc">Score and compare candidate parcels</div></div>
  <div class="footer-btns">
    <button class="btn btn-ghost" onclick="goToStep(3)">← Back</button>
    <button class="btn btn-primary" onclick="goToStep(5)">Next: Business Plan →</button>
  </div>
</div>
</div>

<!-- =================== STEP 5: BUSINESS PLAN =================== -->
<div class="view" id="view-5">
<div class="main">

  <div class="card">
    <div class="card-header">
      <div class="card-title">📊 Business Plan & Financial Projections <span class="chip">Step 5 of 6</span></div>
      <div style="font-size:13px;font-weight:700;color:var(--muted2);">Adjust assumptions — projections update live</div>
    </div>
    <div class="card-body">
      <div class="banner banner-warning">
        <span class="banner-icon">⚠️</span>
        <div><strong>Illustrative projections only.</strong> These numbers are based on industry benchmarks for Midwest self-storage markets. Actual performance depends on location, management, local demand, and build costs. Consult a CPA and commercial lender before making commitments.</div>
      </div>

      <!-- ASSUMPTIONS -->
      <div class="section-head"><span class="section-head-line">🔧 Project Assumptions</span></div>
      <div class="form-grid grid-3" style="margin-bottom:28px;">
        <div class="form-group">
          <label class="form-label">Total Buildable Sq Ft</label>
          <input class="form-input" type="number" id="bp_sqft" value="30000" oninput="calcBP()" style="font-size:20px;font-weight:900;">
        </div>
        <div class="form-group">
          <label class="form-label">Est. Land Cost</label>
          <div class="input-pfx"><span class="pfx-sym">$</span><input class="form-input" type="text" id="bp_land" value="425,000" oninput="calcBP()"></div>
        </div>
        <div class="form-group">
          <label class="form-label">Build Cost / Sq Ft</label>
          <div class="input-pfx"><span class="pfx-sym">$</span><input class="form-input" type="number" id="bp_buildcost" value="55" oninput="calcBP()"></div>
        </div>
        <div class="form-group">
          <label class="form-label">Avg Monthly Rate / Unit</label>
          <div class="input-pfx"><span class="pfx-sym">$</span><input class="form-input" type="number" id="bp_avgrate" value="89" oninput="calcBP()"></div>
        </div>
        <div class="form-group">
          <label class="form-label">Avg Unit Size (sq ft)</label>
          <input class="form-input" type="number" id="bp_unitsize" value="120" oninput="calcBP()">
        </div>
        <div class="form-group">
          <label class="form-label">Stabilized Occupancy</label>
          <div class="range-group">
            <div class="range-vals">
              <span class="range-ends">60%</span>
              <span class="range-cur" id="occ_cur">88%</span>
              <span class="range-ends">98%</span>
            </div>
            <input type="range" min="60" max="98" step="1" value="88" id="bp_occ" oninput="document.getElementById('occ_cur').textContent=this.value+'%';calcBP()">
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Loan Amount</label>
          <div class="input-pfx"><span class="pfx-sym">$</span><input class="form-input" type="text" id="bp_loan" value="1,400,000" oninput="calcBP()"></div>
        </div>
        <div class="form-group">
          <label class="form-label">Interest Rate</label>
          <div class="range-group">
            <div class="range-vals">
              <span class="range-ends">4%</span>
              <span class="range-cur" id="int_cur">7.4%</span>
              <span class="range-ends">12%</span>
            </div>
            <input type="range" min="4" max="12" step="0.1" value="7.4" id="bp_rate" oninput="document.getElementById('int_cur').textContent=parseFloat(this.value).toFixed(1)+'%';calcBP()">
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Loan Term (years)</label>
          <select class="form-select" id="bp_term" onchange="calcBP()">
            <option value="20">20 years</option>
            <option value="25" selected>25 years</option>
            <option value="30">30 years</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Operating Expense Ratio</label>
          <div class="range-group">
            <div class="range-vals">
              <span class="range-ends">25%</span>
              <span class="range-cur" id="exp_cur">38%</span>
              <span class="range-ends">55%</span>
            </div>
            <input type="range" min="25" max="55" step="1" value="38" id="bp_exp" oninput="document.getElementById('exp_cur').textContent=this.value+'%';calcBP()">
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Annual Rent Growth</label>
          <div class="range-group">
            <div class="range-vals">
              <span class="range-ends">1%</span>
              <span class="range-cur" id="grow_cur">3%</span>
              <span class="range-ends">8%</span>
            </div>
            <input type="range" min="1" max="8" step="0.5" value="3" id="bp_grow" oninput="document.getElementById('grow_cur').textContent=parseFloat(this.value).toFixed(1)+'%';calcBP()">
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Target Exit Cap Rate</label>
          <div class="range-group">
            <div class="range-vals">
              <span class="range-ends">4%</span>
              <span class="range-cur" id="cap_cur">6.5%</span>
              <span class="range-ends">10%</span>
            </div>
            <input type="range" min="4" max="10" step="0.5" value="6.5" id="bp_cap" oninput="document.getElementById('cap_cur').textContent=parseFloat(this.value).toFixed(1)+'%';calcBP()">
          </div>
        </div>
      </div>

      <!-- KEY METRICS -->
      <div class="section-head"><span class="section-head-line">📈 Key Metrics — Stabilized Year</span></div>
      <div class="bp-metrics-grid" style="display:grid;grid-template-columns:repeat(4,1fr);gap:1px;background:var(--border);border:2px solid var(--border);border-radius:var(--radius-md);overflow:hidden;margin-bottom:28px;">
        <div style="background:white;padding:18px 20px;">
          <div class="fin-lbl">Total Units</div>
          <div class="fin-val" id="bp_units">—</div>
          <div class="fin-sub">Based on avg unit size</div>
        </div>
        <div style="background:white;padding:18px 20px;">
          <div class="fin-lbl">Total Project Cost</div>
          <div class="fin-val" id="bp_totalcost">—</div>
          <div class="fin-sub">Land + construction</div>
        </div>
        <div style="background:white;padding:18px 20px;">
          <div class="fin-lbl">Gross Annual Revenue</div>
          <div class="fin-val" id="bp_grev">—</div>
          <div class="fin-sub">At stabilized occupancy</div>
        </div>
        <div style="background:white;padding:18px 20px;">
          <div class="fin-lbl">Net Operating Income</div>
          <div class="fin-val" id="bp_noi">—</div>
          <div class="fin-sub">After operating expenses</div>
        </div>
        <div style="background:white;padding:18px 20px;">
          <div class="fin-lbl">Annual Debt Service</div>
          <div class="fin-val" id="bp_debt">—</div>
          <div class="fin-sub">Principal + interest</div>
        </div>
        <div style="background:white;padding:18px 20px;">
          <div class="fin-lbl">Cash Flow (BTCF)</div>
          <div class="fin-val" id="bp_cf">—</div>
          <div class="fin-sub">Before tax cash flow</div>
        </div>
        <div style="background:white;padding:18px 20px;">
          <div class="fin-lbl">Cash-on-Cash Return</div>
          <div class="fin-val" id="bp_coc">—</div>
          <div class="fin-sub">Annual / equity invested</div>
        </div>
        <div style="background:white;padding:18px 20px;">
          <div class="fin-lbl">Est. Stabilized Value</div>
          <div class="fin-val" id="bp_val">—</div>
          <div class="fin-sub">NOI / exit cap rate</div>
        </div>
      </div>

      <!-- BREAK-EVEN -->
      <div class="section-head"><span class="section-head-line">📉 Break-Even Analysis</span></div>
      <div class="bp-breakeven-grid" style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;margin-bottom:28px;">
        <div class="stat-card">
          <div class="stat-lbl">Break-Even Occupancy</div>
          <div class="stat-val" id="bp_beocc">—</div>
          <div class="stat-sub">Min. to cover debt service</div>
        </div>
        <div class="stat-card">
          <div class="stat-lbl">Months to Stabilization</div>
          <div class="stat-val" id="bp_months">~18</div>
          <div class="stat-sub">Typical for new Midwest facility</div>
        </div>
        <div class="stat-card">
          <div class="stat-lbl">Est. Exit Value (Yr 5)</div>
          <div class="stat-val" id="bp_exitval">—</div>
          <div class="stat-sub">At target cap rate after growth</div>
        </div>
      </div>

      <!-- 5-YEAR TABLE -->
      <div class="section-head"><span class="section-head-line">📅 5-Year Pro Forma Summary</span></div>
      <div class="tbl-wrap" style="margin-bottom:4px;overflow-x:auto;-webkit-overflow-scrolling:touch;">
        <table class="tbl" id="proFormaTable" style="min-width:540px;">
          <thead>
            <tr>
              <th>Year</th>
              <th>Occupancy</th>
              <th>Gross Revenue</th>
              <th>Op. Expenses</th>
              <th>NOI</th>
              <th>Debt Service</th>
              <th>Cash Flow</th>
              <th>Est. Value</th>
            </tr>
          </thead>
          <tbody id="proFormaBody"></tbody>
        </table>
      </div>
      <p style="font-size:11px;font-weight:700;color:var(--muted2);text-align:center;margin:0 0 24px;padding:4px;">← Scroll to see all columns →</p>

      <!-- FUNDING STRUCTURE -->
      <div class="section-head"><span class="section-head-line">🏦 Suggested Funding Structure</span></div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:28px;">
        <div class="gap-card">
          <div class="gap-title">Equity Required</div>
          <div class="gap-stat">Down payment (25–30%): <b id="bp_equity">—</b></div>
          <div class="gap-stat">Reserves (6 mo debt): <b id="bp_reserves">—</b></div>
          <div class="gap-stat">Closing costs (~2%): <b id="bp_closing">—</b></div>
          <div style="margin-top:10px;padding-top:10px;border-top:1px solid var(--border);">
            <div class="gap-stat">Total equity needed: <b id="bp_totalequity" style="color:var(--green-dark);font-size:16px;">—</b></div>
          </div>
        </div>
        <div class="gap-card">
          <div class="gap-title">Recommended Loan Products</div>
          <div class="gap-stat" style="margin-bottom:6px;"><b>SBA 504</b> — Best for owner-occupied. Fixed 20–25yr, 10% down possible.</div>
          <div class="gap-stat" style="margin-bottom:6px;"><b>USDA B&amp;I Loan</b> — If rural designation qualifies. Below-market rates.</div>
          <div class="gap-stat" style="margin-bottom:6px;"><b>Conventional Commercial</b> — 25–30% down, 20–25yr am, local banks.</div>
          <div class="gap-stat"><b>Construction-to-Perm</b> — Single close, reduces transaction costs on new builds.</div>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn btn-ghost" onclick="goToStep(4)">← Back to Site Selection</button>
        <button class="btn btn-primary" onclick="goToStep(6)">Proceed to Resources →</button>
      </div>
    </div>
  </div>

</div>
<div class="footer-bar">
  <div class="footer-step"><div class="footer-name">Step 5: Business Plan</div><div class="footer-desc">Live financial projections — adjust assumptions above</div></div>
  <div class="footer-btns">
    <button class="btn btn-ghost" onclick="goToStep(4)">← Back</button>
    <button class="btn btn-primary" onclick="goToStep(6)">Next: Resources →</button>
  </div>
</div>
</div>

<div class="view" id="view-6">
<div class="main">

  <div class="card">
    <div class="card-header">
      <div class="card-title">🔗 Learning Resources <span class="chip">Step 6 of 6</span></div>
      <div style="font-size:13px;font-weight:700;color:var(--muted2);">20 essential websites · 20 YouTube channels & videos</div>
    </div>
    <div class="card-body">
      <div class="banner banner-green">
        <span class="banner-icon">📚</span>
        <div>These are the industry's most respected educational resources — curated for first-time self-storage developers and investors. The websites cover trade associations, market data, software, and construction. The YouTube list covers investing strategy, development, operations, and real operator stories.</div>
      </div>

      <!-- FILTER TABS -->
      <div style="display:flex;gap:10px;margin-bottom:24px;flex-wrap:wrap;">
        <button class="res-tab active" onclick="filterRes('all',this)">🗂 All Resources</button>
        <button class="res-tab" onclick="filterRes('web',this)">🌐 Websites (20)</button>
        <button class="res-tab" onclick="filterRes('yt',this)">▶️ YouTube (20)</button>
        <button class="res-tab" onclick="filterRes('industry',this)">🏛 Industry Orgs</button>
        <button class="res-tab" onclick="filterRes('data',this)">📊 Market Data</button>
        <button class="res-tab" onclick="filterRes('software',this)">💻 Software & Ops</button>
        <button class="res-tab" onclick="filterRes('investing',this)">💰 Investing</button>
        <button class="res-tab" onclick="filterRes('build',this)">🔨 Development</button>
      </div>

      <!-- ============ WEBSITES SECTION ============ -->
      <div class="section-head res-section web-section"><span class="section-head-line">🌐 20 Essential Websites</span></div>
      <div class="res-grid" id="webGrid">

        <!-- Industry Orgs -->
        <div class="res-card" data-type="web industry">
          <div class="res-icon">🏛</div>
          <div class="res-body">
            <div class="res-name">Self Storage Association (SSA)</div>
            <div class="res-url"><a href="https://www.selfstorage.org" target="_blank">selfstorage.org</a></div>
            <div class="res-desc">The official US trade organization representing 48,000+ facilities. Offers SSA University online education, the CSSM certification program, monthly webcasts, state lien law guidance, and industry advocacy. First stop for any new developer.</div>
            <div class="res-tags"><span class="res-tag industry">Industry Org</span><span class="res-tag">Free + Paid</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web data">
          <div class="res-icon">📰</div>
          <div class="res-body">
            <div class="res-name">Inside Self-Storage (ISS)</div>
            <div class="res-url"><a href="https://www.insideselfstorage.com" target="_blank">insideselfstorage.com</a></div>
            <div class="res-desc">The industry's leading trade publication and education platform. Covers development, operations, investing, technology, and management. Hosts the annual ISS World Expo, the largest self-storage conference in the world. Essential daily reading.</div>
            <div class="res-tags"><span class="res-tag industry">Industry Media</span><span class="res-tag">Free Articles</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web data">
          <div class="res-icon">📊</div>
          <div class="res-body">
            <div class="res-name">SpareFoot Storage Beat</div>
            <div class="res-url"><a href="https://www.sparefoot.com/blog" target="_blank">sparefoot.com/blog</a></div>
            <div class="res-desc">The largest storage marketplace also publishes authoritative industry statistics, cap rate data, occupancy trends, and market analysis. Their annual US Self-Storage Industry Statistics page is one of the most cited data sources in the industry.</div>
            <div class="res-tags"><span class="res-tag data">Market Data</span><span class="res-tag">Free</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web data">
          <div class="res-icon">🏢</div>
          <div class="res-body">
            <div class="res-name">CBRE Self Storage</div>
            <div class="res-url"><a href="https://www.cbre.com/services/property-types/alternatives/self-storage" target="_blank">cbre.com</a></div>
            <div class="res-desc">CBRE is the world's largest commercial real estate firm. Their self-storage practice publishes quarterly cap rate surveys, acquisition reports, and market equilibrium analysis across 38+ major US markets. Critical reading before choosing a market.</div>
            <div class="res-tags"><span class="res-tag data">Market Data</span><span class="res-tag">CRE Brokerage</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web investing">
          <div class="res-icon">💰</div>
          <div class="res-body">
            <div class="res-name">Self Storage Income (AJ Osborne)</div>
            <div class="res-url"><a href="https://www.selfstorageincome.com" target="_blank">selfstorageincome.com</a></div>
            <div class="res-desc">AJ Osborne manages 1.2M+ sq ft and $350M+ in assets. His site offers free articles, a podcast, deal analysis tools, and the paid Inner Circle mastermind. His personal story of surviving paralysis while his storage portfolio supported his family is a must-read for motivating context.</div>
            <div class="res-tags"><span class="res-tag investing">Investing</span><span class="res-tag">Free + Paid</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web investing">
          <div class="res-icon">🎓</div>
          <div class="res-body">
            <div class="res-name">Self Storage Investing (Scott Meyers)</div>
            <div class="res-url"><a href="https://www.selfstorageinvesting.com" target="_blank">selfstorageinvesting.com</a></div>
            <div class="res-desc">Scott Meyers has acquired, developed and syndicated 4.5M+ sq ft over two decades. His site offers free masterclasses, podcast episodes, deal analysis, and a paid academy. His Mastermind program is among the most respected mentorship programs in the industry.</div>
            <div class="res-tags"><span class="res-tag investing">Investing</span><span class="res-tag">Education</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web software">
          <div class="res-icon">💻</div>
          <div class="res-body">
            <div class="res-name">Storable</div>
            <div class="res-url"><a href="https://www.storable.com" target="_blank">storable.com</a></div>
            <div class="res-desc">The industry's most widely used management software platform, combining SpareFoot, SiteLink, and storEDGE. Covers online rentals, management software, payment processing, and marketing. Their resource library has excellent how-to guides for new operators.</div>
            <div class="res-tags"><span class="res-tag software">Software & Ops</span><span class="res-tag">Paid Platform</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web build">
          <div class="res-icon">🏗</div>
          <div class="res-body">
            <div class="res-name">MakoRabco Resources</div>
            <div class="res-url"><a href="https://makorabco.com/resources/building-a-new-self-storage-business" target="_blank">makorabco.com/resources</a></div>
            <div class="res-desc">The 10-time ISS Best Builder award winner offers a comprehensive free guide to starting a self-storage business, from site selection through grand opening. Covers layout planning, unit mix, construction timelines, and what first-time developers consistently get wrong.</div>
            <div class="res-tags"><span class="res-tag build">Development</span><span class="res-tag">Free Guide</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web industry">
          <div class="res-icon">🗂</div>
          <div class="res-body">
            <div class="res-name">SiteLink Resource Center</div>
            <div class="res-url"><a href="https://www.sitelink.com/resources" target="_blank">sitelink.com/resources</a></div>
            <div class="res-desc">SiteLink is one of the top property management systems for self-storage. Their resource center includes a comprehensive directory of state self-storage associations, state lien law summaries, lease templates, and software comparison guides.</div>
            <div class="res-tags"><span class="res-tag software">Software & Ops</span><span class="res-tag">State Resources</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web data">
          <div class="res-icon">📈</div>
          <div class="res-body">
            <div class="res-name">Radius+ (formerly SpareFoot Radius)</div>
            <div class="res-url"><a href="https://www.radiusplus.com" target="_blank">radiusplus.com</a></div>
            <div class="res-desc">The industry's leading market intelligence and feasibility tool. Maps competitor locations, tracks street rates in real time, estimates demand vs. supply by trade area, and generates feasibility reports. Used by institutional investors, lenders, and appraisers.</div>
            <div class="res-tags"><span class="res-tag data">Market Data</span><span class="res-tag">Paid Tool</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web investing">
          <div class="res-icon">🏘</div>
          <div class="res-body">
            <div class="res-name">BiggerPockets Self-Storage Forum</div>
            <div class="res-url"><a href="https://www.biggerpockets.com/forums/311" target="_blank">biggerpockets.com/forums/311</a></div>
            <div class="res-desc">The world's largest real estate investing community has a dedicated self-storage subforum with thousands of threads on deals, financing, management software, lien laws, and first-time operator questions. Search before you ask — chances are your question has been answered.</div>
            <div class="res-tags"><span class="res-tag investing">Community</span><span class="res-tag">Free</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web software">
          <div class="res-icon">🔒</div>
          <div class="res-body">
            <div class="res-name">Storagepug</div>
            <div class="res-url"><a href="https://www.storagepug.com" target="_blank">storagepug.com</a></div>
            <div class="res-desc">Website and online rental platform built specifically for self-storage operators. Integrates with most management software, enables online move-ins, and offers local SEO tools. Their blog has excellent operator-focused marketing and operations content.</div>
            <div class="res-tags"><span class="res-tag software">Software & Ops</span><span class="res-tag">Marketing</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web data">
          <div class="res-icon">📋</div>
          <div class="res-body">
            <div class="res-name">Self-Storage Almanac (MiniCo)</div>
            <div class="res-url"><a href="https://www.minicoinsurance.com/almanac" target="_blank">minicoinsurance.com/almanac</a></div>
            <div class="res-desc">The definitive annual reference book for the self-storage industry. Contains facility count data, supply statistics, unit mix benchmarks, financial operating ratios, and lien law summaries for all 50 states. Essential for feasibility studies and investor presentations.</div>
            <div class="res-tags"><span class="res-tag data">Industry Data</span><span class="res-tag">Annual Publication</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web build">
          <div class="res-icon">🏠</div>
          <div class="res-body">
            <div class="res-name">BETCO Self-Storage Investor Guide</div>
            <div class="res-url"><a href="https://www.betcoinc.com/investing-in-self-storage/get-started" target="_blank">betcoinc.com</a></div>
            <div class="res-desc">BETCO is a major self-storage building manufacturer. Their investor guide covers the complete development process from land selection through construction, with cost estimators, unit mix calculators, and detailed guidance on what questions to ask your builder.</div>
            <div class="res-tags"><span class="res-tag build">Development</span><span class="res-tag">Free Guide</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web investing">
          <div class="res-icon">🤝</div>
          <div class="res-body">
            <div class="res-name">Storage Nerds (Stacy Rossetti)</div>
            <div class="res-url"><a href="https://www.storageNerds.com" target="_blank">storageNerds.com</a></div>
            <div class="res-desc">Stacy Rossetti is known as the "Grassroots Guru" of self-storage. Her platform focuses on off-market acquisition, creative financing, and small-to-mid-size facilities — ideal for first-time buyers. Her 3-step method (Find, Fund, Run) is practical and actionable.</div>
            <div class="res-tags"><span class="res-tag investing">Investing</span><span class="res-tag">Education</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web software">
          <div class="res-icon">🤖</div>
          <div class="res-body">
            <div class="res-name">Swivl (Self Storage Automation)</div>
            <div class="res-url"><a href="https://www.tryswivl.com" target="_blank">tryswivl.com</a></div>
            <div class="res-desc">AI-powered chatbot and automation platform for self-storage operators. Handles tenant inquiries 24/7, processes move-ins, and integrates with major management software. Their blog is one of the best sources of data on conversion rates, occupancy trends, and digital marketing ROI.</div>
            <div class="res-tags"><span class="res-tag software">Automation</span><span class="res-tag">Technology</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web build">
          <div class="res-icon">🛠</div>
          <div class="res-body">
            <div class="res-name">Trachte Building Systems</div>
            <div class="res-url"><a href="https://www.trachte.com" target="_blank">trachte.com</a></div>
            <div class="res-desc">130+ year old manufacturer of self-storage building systems. Their site includes a dealer locator, product specifications, unit mix planning tools, and educational content on pre-engineered metal building systems. The parent company of MakoRabco.</div>
            <div class="res-tags"><span class="res-tag build">Development</span><span class="res-tag">Kit Systems</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web industry">
          <div class="res-icon">📜</div>
          <div class="res-body">
            <div class="res-name">Missouri Self Storage Association (MSSA)</div>
            <div class="res-url"><a href="https://www.missouriselfstorage.org" target="_blank">kansasselfstorage.org</a></div>
            <div class="res-desc">Missouri-specific trade organization covering MO lien law, state legislative updates, local networking, and resources relevant to the Kansas City metro market. Critical for understanding Missouri lien and auction procedures for Jackson County operators.</div>
            <div class="res-tags"><span class="res-tag industry">State Org · MO</span><span class="res-tag">Local Resource</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web data">
          <div class="res-icon">🏦</div>
          <div class="res-body">
            <div class="res-name">SBA Loan Programs (SBA.gov)</div>
            <div class="res-url"><a href="https://www.sba.gov/funding-programs/loans" target="_blank">sba.gov/funding-programs/loans</a></div>
            <div class="res-desc">Official SBA resource for 504 and 7(a) loan programs. Covers eligibility, loan limits, current rates, approved lenders by state, and the application process. Self-storage is one of the most SBA-lender-friendly asset classes in commercial real estate.</div>
            <div class="res-tags"><span class="res-tag data">Financing</span><span class="res-tag">Federal Resource</span></div>
          </div>
        </div>

        <div class="res-card" data-type="web build">
          <div class="res-icon">🗺</div>
          <div class="res-body">
            <div class="res-name">FEMA Flood Map Service Center</div>
            <div class="res-url"><a href="https://msc.fema.gov" target="_blank">msc.fema.gov</a></div>
            <div class="res-desc">Official FEMA tool for looking up flood zone designations (FIRM panels) for any US property. Essential step before any land purchase — flood zone AE or VE designation dramatically increases insurance costs and complicates lender approval. Always verify Zone X before committing to a site.</div>
            <div class="res-tags"><span class="res-tag build">Due Diligence</span><span class="res-tag">Free Federal Tool</span></div>
          </div>
        </div>

      </div>

      <!-- ============ YOUTUBE SECTION ============ -->
      <div class="section-head res-section yt-section" style="margin-top:36px;"><span class="section-head-line">▶️ 20 YouTube Channels & Videos</span></div>
      <div class="res-grid" id="ytGrid">

        <div class="res-card" data-type="yt investing">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">AJ Osborne — Self Storage Income Channel</div>
            <div class="res-url"><a href="https://www.youtube.com/@SelfStorageIncome" target="_blank">youtube.com/@SelfStorageIncome</a></div>
            <div class="res-desc">The most-subscribed self-storage YouTube channel in the US. AJ covers deal analysis, market selection, financing strategies, and operational systems across 250+ videos. Start with "How I Built a $350M Self Storage Portfolio" — it covers his complete investment philosophy.</div>
            <div class="res-tags"><span class="res-tag investing">Investing</span><span class="res-tag yt-tag">250+ Videos</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt investing">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Scott Meyers — Self Storage Investing</div>
            <div class="res-url"><a href="https://www.youtube.com/@selfstorageinvesting" target="_blank">youtube.com/@selfstorageinvesting</a></div>
            <div class="res-desc">Scott Meyers is known as "The Original Self Storage Expert." His channel covers acquisition, development, syndication, and passive income strategies. Watch "How to Find Off-Market Self Storage Deals" and "Self Storage Site Selection — The 5 Factors That Matter Most."</div>
            <div class="res-tags"><span class="res-tag investing">Investing</span><span class="res-tag yt-tag">Development</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt investing">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Stacy Rossetti — Storage Nerds</div>
            <div class="res-url"><a href="https://www.youtube.com/@StorageNerds" target="_blank">youtube.com/@StorageNerds</a></div>
            <div class="res-desc">Practical, grassroots-level content for first-time buyers. Stacy focuses on off-market deals, owner financing, and small facilities. Her video "How to Buy a Self Storage Facility With No Money Down" is one of the most watched in the niche. Highly actionable for beginners.</div>
            <div class="res-tags"><span class="res-tag investing">First-Time Buyer</span><span class="res-tag yt-tag">Creative Finance</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt investing">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Mike Wagner — Storage Rebellion</div>
            <div class="res-url"><a href="https://www.youtube.com/@StorageRebellion" target="_blank">youtube.com/@StorageRebellion</a></div>
            <div class="res-desc">Mike Wagner takes a no-nonsense, data-driven approach to storage investing. His channel covers market analysis, value-add acquisitions, and the business of scaling from one facility to a portfolio. Watch "Storage Rebellion — How to Analyze a Self Storage Deal in 10 Minutes."</div>
            <div class="res-tags"><span class="res-tag investing">Deal Analysis</span><span class="res-tag yt-tag">Portfolio Building</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt industry">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Inside Self-Storage (ISS) — Official Channel</div>
            <div class="res-url"><a href="https://www.youtube.com/@InsideSelfStorage" target="_blank">youtube.com/@InsideSelfStorage</a></div>
            <div class="res-desc">The official YouTube presence of the industry's trade publication. Features recorded sessions from the ISS World Expo, expert panel discussions, facility tours, and operator interviews. Watch "ISS World Expo Education Sessions" for deep-dive content on development and operations.</div>
            <div class="res-tags"><span class="res-tag industry">Trade Media</span><span class="res-tag yt-tag">Conference Sessions</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt build">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">MakoRabco — Building Your Self-Storage Facility</div>
            <div class="res-url"><a href="https://www.youtube.com/@MakoRabco" target="_blank">youtube.com/@MakoRabco</a></div>
            <div class="res-desc">Construction and development content from the 10-time ISS Best Builder. Their videos walk through site layout design, unit mix optimization, steel building erection, and the construction timeline from land to ribbon-cutting. Essential viewing before you talk to any builder.</div>
            <div class="res-tags"><span class="res-tag build">Construction</span><span class="res-tag yt-tag">Development</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt investing">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Kris Bennett — The Storage Investor Show</div>
            <div class="res-url"><a href="https://www.youtube.com/@TheStorageInvestorShow" target="_blank">youtube.com/@TheStorageInvestorShow</a></div>
            <div class="res-desc">Kris Bennett interviews self-storage investors, operators, and industry professionals in a podcast-style format. His channel is strong on syndication, raising private capital, and how investors structure deals. Great resource for understanding the capitalization side of the business.</div>
            <div class="res-tags"><span class="res-tag investing">Syndication</span><span class="res-tag yt-tag">Interviews</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt build">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Janus International — Product & Development Insights</div>
            <div class="res-url"><a href="https://www.youtube.com/@JanusInternational" target="_blank">youtube.com/@JanusInternational</a></div>
            <div class="res-desc">Janus is the world's largest manufacturer of self-storage building components. Their channel covers access control systems, roll-up door selection, corridor systems, and facility renovation. Watch "How to Convert a Commercial Building to Self-Storage" for conversion project insights.</div>
            <div class="res-tags"><span class="res-tag build">Equipment</span><span class="res-tag yt-tag">Conversions</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt software">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Storable — Operator Education Series</div>
            <div class="res-url"><a href="https://www.youtube.com/@StorableSoftware" target="_blank">youtube.com/@StorableSoftware</a></div>
            <div class="res-desc">Storable's channel covers software tutorials, marketing strategy, revenue management, and operational best practices. Their "Self-Storage Marketing Masterclass" series is particularly strong for new operators figuring out how to get their first tenants and manage online listings.</div>
            <div class="res-tags"><span class="res-tag software">Operations</span><span class="res-tag yt-tag">Marketing</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt investing">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">BiggerPockets — Self Storage Playlist</div>
            <div class="res-url"><a href="https://www.youtube.com/@BiggerPockets" target="_blank">youtube.com/@BiggerPockets (search "self storage")</a></div>
            <div class="res-desc">BiggerPockets has dozens of self-storage interviews and panel discussions on their main channel. Search "self storage" to find episodes with AJ Osborne, Scott Meyers, and other operators. The "How to Invest in Self Storage" episode with AJ Osborne has 500K+ views and is a great starting point.</div>
            <div class="res-tags"><span class="res-tag investing">Investing</span><span class="res-tag yt-tag">Beginner Friendly</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt build">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Trachte Building Systems — Construction Walkthroughs</div>
            <div class="res-url"><a href="https://www.youtube.com/@TrachteBuilding" target="_blank">youtube.com/@TrachteBuilding</a></div>
            <div class="res-desc">Factory-to-field walkthrough videos showing how pre-engineered building kits are fabricated, shipped, and erected. Gives first-time developers a real sense of the construction process, quality of materials, and what to expect from a kit-based build timeline.</div>
            <div class="res-tags"><span class="res-tag build">Kit Systems</span><span class="res-tag yt-tag">Construction</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt investing">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Self Storage Income — "How to Analyze a Deal"</div>
            <div class="res-url"><a href="https://www.youtube.com/@SelfStorageIncome" target="_blank">youtube.com/@SelfStorageIncome → "Deal Analysis" playlist</a></div>
            <div class="res-desc">AJ Osborne's deal analysis playlist walks through real acquisitions using actual financials. Covers cap rate calculation, NOI analysis, debt coverage ratios, and how to identify underperforming facilities with value-add potential. Essential viewing before running your own pro forma.</div>
            <div class="res-tags"><span class="res-tag investing">Deal Analysis</span><span class="res-tag yt-tag">Financial Modeling</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt industry">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Self Storage Association — SSA Annual Conference Recordings</div>
            <div class="res-url"><a href="https://www.youtube.com/@SelfStorageAssociation" target="_blank">youtube.com/@SelfStorageAssociation</a></div>
            <div class="res-desc">The SSA posts selected sessions from their annual conference on YouTube. Topics include legislative updates, industry outlook presentations, lien law changes, and technology adoption. Watching one year's conference recordings is worth more than most courses on the business.</div>
            <div class="res-tags"><span class="res-tag industry">Industry Org</span><span class="res-tag yt-tag">Education</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt software">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Swivl — Self Storage Automation & AI</div>
            <div class="res-url"><a href="https://www.youtube.com/@TrySwivl" target="_blank">youtube.com/@TrySwivl</a></div>
            <div class="res-desc">Short, practical videos on self-storage automation, AI chatbots, online rental workflows, and revenue management. Their "State of Self-Storage Technology" annual webinar is one of the best overviews of where the industry is heading on the automation and digital marketing side.</div>
            <div class="res-tags"><span class="res-tag software">Technology</span><span class="res-tag yt-tag">Automation</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt investing">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Jake & Gino — Self Storage Deep Dives</div>
            <div class="res-url"><a href="https://www.youtube.com/@JakeandGino" target="_blank">youtube.com/@JakeandGino (search "self storage")</a></div>
            <div class="res-desc">Multifamily-turned-storage investors Jake Stenziano and Gino Barbaro cover the transition from other real estate asset classes into self-storage. Strong content on financing structures, operator partnerships, and how to evaluate markets when coming from a residential real estate background.</div>
            <div class="res-tags"><span class="res-tag investing">Cross-Asset</span><span class="res-tag yt-tag">Finance</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt build">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">ARCO/Murray — Commercial Construction Insights</div>
            <div class="res-url"><a href="https://www.youtube.com/@ARCOMurray" target="_blank">youtube.com/@ARCOMurray</a></div>
            <div class="res-desc">ENR Top 400 contractor ARCO/Murray posts project case studies, construction time-lapses, and client testimonials including several self-storage developments. Useful for understanding what a large-scale, institutional-quality facility build looks like from start to finish.</div>
            <div class="res-tags"><span class="res-tag build">Construction</span><span class="res-tag yt-tag">Case Studies</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt investing">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Passive Investing Made Simple — Storage Episodes</div>
            <div class="res-url"><a href="https://www.youtube.com/@PassiveInvestingMadeSimple" target="_blank">youtube.com/@PassiveInvestingMadeSimple</a></div>
            <div class="res-desc">Anthony Vicino and Dan Krueger cover passive real estate investing including self-storage syndications. Strong content on evaluating operators, understanding offering memorandums, and knowing what questions to ask before investing passively in a storage deal.</div>
            <div class="res-tags"><span class="res-tag investing">Passive Investing</span><span class="res-tag yt-tag">Syndication</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt build">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Butler Manufacturing — Commercial Building Systems</div>
            <div class="res-url"><a href="https://www.youtube.com/@ButlerBuildings" target="_blank">youtube.com/@ButlerBuildings</a></div>
            <div class="res-desc">Butler is one of the premier pre-engineered metal building manufacturers and the preferred system of MAR Building Solutions. Their channel shows completed commercial and storage projects, system performance specs, and builder network content. Good for understanding the Butler system quality level.</div>
            <div class="res-tags"><span class="res-tag build">Metal Systems</span><span class="res-tag yt-tag">Construction</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt industry">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Commercial Real Estate Academy — Storage Deep Dives</div>
            <div class="res-url"><a href="https://www.youtube.com/@CommercialRealEstateAcademy" target="_blank">youtube.com/@CommercialRealEstateAcademy</a></div>
            <div class="res-desc">Peter Harris covers all CRE asset classes including detailed self-storage content. His videos on cap rate calculation, market analysis, underwriting, and due diligence are particularly strong for people coming from residential real estate or no real estate background at all.</div>
            <div class="res-tags"><span class="res-tag industry">CRE Education</span><span class="res-tag yt-tag">Underwriting</span></div>
          </div>
        </div>

        <div class="res-card" data-type="yt investing">
          <div class="res-icon yt">▶</div>
          <div class="res-body">
            <div class="res-name">Drunk Real Estate — Storage Episodes with AJ Osborne</div>
            <div class="res-url"><a href="https://www.youtube.com/@DrunkRealEstate" target="_blank">youtube.com/@DrunkRealEstate (search "storage")</a></div>
            <div class="res-desc">AJ Osborne joins J Scott, Mauricio Rauld, and Kyle Wilson weekly to discuss real estate markets, economic trends, and investing strategy. While not storage-specific, the episodes covering commercial real estate conditions directly affect self-storage financing and cap rates. Entertaining and informative.</div>
            <div class="res-tags"><span class="res-tag investing">Market Context</span><span class="res-tag yt-tag">Weekly Show</span></div>
          </div>
        </div>

      </div>

      <div class="btn-row">
        <button class="btn btn-ghost" onclick="goToStep(5)">← Back to Business Plan</button>
        <button class="btn btn-primary" style="background:var(--green-dark);box-shadow:0 4px 0 var(--green-deep);">🚀 You're Ready — Go Build It!</button>
      </div>

    </div>
  </div>

</div>
<div class="footer-bar">
  <div class="footer-step"><div class="footer-name">Step 6: Resources</div><div class="footer-desc">20 websites · 20 YouTube channels · curated for self-storage developers</div></div>
  <div class="footer-btns">
    <button class="btn btn-ghost" onclick="goToStep(5)">← Back</button>
    <button class="btn btn-primary" style="background:var(--green-dark);box-shadow:0 4px 0 var(--green-deep);">🚀 Go Build It!</button>
  </div>
</div>
</div>

<script>
let curStep=1, unlocked=1;

/* ============================================================
   DON KNOTTS CAR CELEBRATION
   ============================================================ */

function spawnConfetti() {
  const container = document.getElementById('confettiContainer');
  container.innerHTML = '';
  const colors = ['#58CC02','#FF9600','#1CB0F6','#FF4B4B','#CE82FF','#FFEE00','#FF6B35','#00D4AA'];
  const shapes = ['square','circle','rect'];
  for (let i = 0; i < 55; i++) {
    const el = document.createElement('div');
    el.className = 'confetti-piece';
    const color = colors[Math.floor(Math.random() * colors.length)];
    const shape = shapes[Math.floor(Math.random() * shapes.length)];
    const size = 6 + Math.random() * 10;
    el.style.cssText = `
      left: ${Math.random() * 100}%;
      top: -${10 + Math.random() * 30}px;
      width: ${shape === 'rect' ? size * 0.5 : size}px;
      height: ${shape === 'rect' ? size * 1.8 : size}px;
      border-radius: ${shape === 'circle' ? '50%' : shape === 'rect' ? '2px' : '2px'};
      background: ${color};
      animation-duration: ${1.6 + Math.random() * 1.4}s;
      animation-delay: ${Math.random() * 0.4}s;
      transform: rotate(${Math.random() * 360}deg);
    `;
    container.appendChild(el);
  }
}

/* ── Per-step celebration messages ── */
const stepCelebration = {
  2: { msg: 'Way to go! 🚗' },
  3: { msg: "You're on your way to success! 🌟" },
  4: { msg: 'Glad you found what you liked! 👍' },
  5: { msg: 'Fantastic! 🏆' },
  6: { msg: 'Pure gold! 💰' },
};

/* ── Shared audio helpers ── */
function makeAudioCtx() {
  const A = window.AudioContext || window.webkitAudioContext;
  return A ? new A() : null;
}
function pn(ctx, freq, start, dur, type, vol) {
  const osc  = ctx.createOscillator();
  const gain = ctx.createGain();
  osc.connect(gain); gain.connect(ctx.destination);
  osc.type = type;
  osc.frequency.setValueAtTime(freq, ctx.currentTime + start);
  gain.gain.setValueAtTime(0, ctx.currentTime + start);
  gain.gain.linearRampToValueAtTime(vol, ctx.currentTime + start + 0.025);
  gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + start + dur);
  osc.start(ctx.currentTime + start);
  osc.stop(ctx.currentTime + start + dur + 0.06);
}

/* Step 2 — "Way to go!"  Three perky car honks + happy toot */
function playSound_2() {
  try {
    const c = makeAudioCtx(); if (!c) return;
    pn(c,523,0.00,0.10,'sawtooth',0.22); // C5 honk
    pn(c,659,0.13,0.10,'sawtooth',0.22); // E5 honk
    pn(c,784,0.26,0.10,'sawtooth',0.24); // G5 honk
    pn(c,1047,0.40,0.28,'square',0.18);  // C6 toot
    pn(c,784, 0.40,0.28,'sine',  0.12);  // G5 harmony
    pn(c,1175,0.68,0.08,'square',0.12);  // D6 bounce
    pn(c,1047,0.76,0.14,'square',0.15);  // C6 finish
  } catch(e) {}
}

/* Step 3 — "On your way to success!"  Rising journey arpeggio */
function playSound_3() {
  try {
    const c = makeAudioCtx(); if (!c) return;
    [262,330,392,523,659,784,1047].forEach((f,i) =>
      pn(c, f, i*0.10, 0.18, 'sine', 0.16 + i*0.01)
    );
    pn(c,1047,0.76,0.42,'sine',0.22); // top sustained
    pn(c,784, 0.76,0.42,'sine',0.14);
    pn(c,523, 0.76,0.42,'sine',0.10);
    pn(c,2093,0.80,0.08,'sine',0.08); // sparkle tinkles
    pn(c,2637,0.88,0.08,'sine',0.06);
    pn(c,2093,0.96,0.12,'sine',0.08);
  } catch(e) {}
}

/* Step 4 — "Glad you found what you liked!"  Warm jazzy ii-V-I resolve */
function playSound_4() {
  try {
    const c = makeAudioCtx(); if (!c) return;
    pn(c,294,0.00,0.20,'sine',0.14); // Dm
    pn(c,370,0.00,0.20,'sine',0.11);
    pn(c,440,0.00,0.20,'sine',0.11);
    pn(c,392,0.22,0.20,'sine',0.14); // G7
    pn(c,494,0.22,0.20,'sine',0.11);
    pn(c,587,0.22,0.20,'sine',0.11);
    pn(c,523,0.45,0.40,'sine',0.20); // C major resolve
    pn(c,659,0.45,0.40,'sine',0.14);
    pn(c,784,0.45,0.40,'sine',0.11);
    pn(c,1047,0.50,0.10,'sine',0.09);
    pn(c,1319,0.62,0.10,'sine',0.07);
    pn(c,1047,0.74,0.16,'sine',0.09);
  } catch(e) {}
}

/* Step 5 — "Fantastic!"  Bold brass fanfare */
function playSound_5() {
  try {
    const c = makeAudioCtx(); if (!c) return;
    pn(c,523,0.00,0.08,'sawtooth',0.22); // stab
    pn(c,523,0.10,0.08,'sawtooth',0.22);
    pn(c,659,0.22,0.10,'sawtooth',0.24); // brass run
    pn(c,784,0.34,0.10,'sawtooth',0.26);
    pn(c,988,0.46,0.10,'sawtooth',0.26);
    pn(c,1047,0.58,0.34,'sawtooth',0.22); // big chord
    pn(c,784, 0.58,0.34,'sawtooth',0.15);
    pn(c,523, 0.58,0.34,'sawtooth',0.12);
    pn(c,1175,0.92,0.10,'square',0.14);   // victory tail
    pn(c,1319,1.02,0.10,'square',0.14);
    pn(c,1047,1.12,0.22,'square',0.18);
    pn(c,784, 1.12,0.22,'sine',  0.12);
  } catch(e) {}
}

/* Step 6 — "Pure gold!"  Glittering coin cascade + royal flourish */
function playSound_6() {
  try {
    const c = makeAudioCtx(); if (!c) return;
    [1760,2093,2637,3136].forEach((f,i) =>  // coin sparkle
      pn(c, f, i*0.09, 0.14, 'sine', 0.13)
    );
    pn(c,1047,0.42,0.30,'sine',0.20); // gold shimmer chord
    pn(c,784, 0.42,0.30,'sine',0.14);
    pn(c,659, 0.42,0.30,'sine',0.11);
    pn(c,523, 0.74,0.14,'sawtooth',0.18); // royal horn
    pn(c,784, 0.88,0.14,'sawtooth',0.20);
    pn(c,1047,1.02,0.30,'sawtooth',0.22);
    pn(c,784, 1.02,0.30,'sine',    0.13);
    [2637,3136,2637].forEach((f,i) =>      // final coin shimmer
      pn(c, f, 1.30+i*0.08, 0.10, 'sine', 0.09)
    );
  } catch(e) {}
}

function playStepSound(step) {
  ({2:playSound_2,3:playSound_3,4:playSound_4,5:playSound_5,6:playSound_6}[step] || playSound_2)();
}

function fireBursts() {
  const rings = ['br1','br2','br3'];
  const sizes = [80, 120, 160];
  rings.forEach((id, i) => {
    const el = document.getElementById(id);
    el.style.width  = sizes[i] + 'px';
    el.style.height = sizes[i] + 'px';
    el.style.animation = 'none';
    el.offsetHeight; /* reflow */
    el.style.animation = `burstExpand 0.65s ease-out ${i * 0.08}s both`;
  });
}

let donPending = null; /* store the target step number during animation */

function showDonKnotts(targetStep) {
  donPending = targetStep;

  /* Set the message for this step */
  const cel = stepCelebration[targetStep] || { msg: 'Great work! 🎉' };
  document.getElementById('bubbleText').textContent = cel.msg;

  /* Card border / glow color varies per step */
  const stepColors = {
    2: '#58CC02', 3: '#1CB0F6', 4: '#FF9600', 5: '#CE82FF', 6: '#FF9600'
  };
  const stepShadows = {
    2: '#46A302', 3: '#0E8FC0', 4: '#CC7700', 5: '#9B52C0', 6: '#CC7700'
  };
  const stepGlows = {
    2: 'rgba(88,204,2,0.4)',   3: 'rgba(28,176,246,0.4)',
    4: 'rgba(255,150,0,0.4)',  5: 'rgba(206,130,255,0.4)',
    6: 'rgba(255,200,0,0.5)'
  };
  const col  = stepColors[targetStep]  || '#58CC02';
  const shad = stepShadows[targetStep] || '#46A302';
  const glow = stepGlows[targetStep]   || 'rgba(88,204,2,0.4)';

  const card = document.getElementById('donCard');
  card.style.borderColor  = col;
  card.style.boxShadow    = `0 8px 0 ${shad}, 0 0 60px ${glow}`;

  const bubble = document.getElementById('speechBubble');
  bubble.style.borderColor     = col;
  bubble.style.backgroundColor = stepTarget_bgColor(targetStep);
  bubble.style.color           = shad;
  /* Update bubble tail color */
  const tails = bubble.querySelectorAll('div');
  if (tails[0]) tails[0].style.borderTopColor = col;
  if (tails[1]) tails[1].style.borderTopColor = stepTarget_bgColor(targetStep);

  const overlay = document.getElementById('donKnottsOverlay');
  const subText = document.getElementById('donSubText');
  const arm     = document.getElementById('waveArm');
  const carSvg  = document.getElementById('donCarSvg');

  /* Reset state */
  overlay.style.display = 'block';
  overlay.className = '';
  card.style.transform = 'translate(-50%,-50%) scale(0)';
  card.className = '';
  bubble.className = '';
  subText.className = '';
  arm.className = '';
  carSvg.className = '';
  ['star1','star2','star3'].forEach(id => document.getElementById(id).className = '');

  requestAnimationFrame(() => {
    overlay.classList.add('active');
    fireBursts();
    spawnConfetti();
    playStepSound(targetStep);

    setTimeout(() => card.classList.add('animate-in'), 80);
    setTimeout(() => bubble.classList.add('visible'), 350);
    setTimeout(() => {
      arm.classList.add('waving');
      carSvg.classList.add('bouncing');
      ['star1','star2','star3'].forEach(id => document.getElementById(id).classList.add('spinning'));
    }, 500);
    setTimeout(() => subText.classList.add('visible'), 1100);

    setTimeout(() => {
      card.classList.remove('animate-in');
      card.classList.add('animate-out');
      setTimeout(() => {
        overlay.style.display = 'none';
        overlay.className = '';
        actuallyGoToStep(donPending);
      }, 380);
    }, 2200);
  });
}

function stepTarget_bgColor(step) {
  return {2:'#F0FDE4',3:'#DFF4FF',4:'#FFF5E0',5:'#F5E8FF',6:'#FFF5E0'}[step] || '#F0FDE4';
}

/* The real navigation — called after animation completes */
function actuallyGoToStep(n) {
  document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
  document.getElementById('view-'+n).classList.add('active');
  for(let i=1;i<=6;i++){
    const tab=document.getElementById('step-tab-'+i);
    const bub=document.getElementById('step-bub-'+i);
    tab.className='step';
    if(i===n){ tab.classList.add('active'); }
    else if(i<n){ tab.classList.add('done'); bub.textContent='✓'; }
    else if(i>unlocked+1){ tab.classList.add('locked'); }
  }
  curStep=n;
  if(n>unlocked) unlocked=n;
  if(n===2) fillReview();
  if(n===3){ runScan(); }
  window.scrollTo({top:0,behavior:'smooth'});
}

/* ============================================================
   MAIN goToStep — intercepts forward navigation to show Don
   ============================================================ */
function goToStep(n){
  /* Going backward (Back buttons) → skip the celebration */
  if (n <= curStep) {
    actuallyGoToStep(n);
    return;
  }
  /* Step 3 needs the disclaimer first */
  if (n === 3 && !disclaimerAccepted) {
    showDisclaimer();
    return;
  }
  /* Forward navigation → show Don Knotts! */
  showDonKnotts(n);
}

function num(id){ return parseFloat((document.getElementById(id)?.value||'0').replace(/,/g,''))||0; }
function fmt(v){
  if(v>=1e6) return '$'+(v/1e6).toFixed(1)+'M';
  if(v>=1000) return '$'+(v/1000).toFixed(0)+'K';
  return '$'+v.toLocaleString();
}

function updateFin(){
  const c=num('f_cash'),l=num('f_liquid'),s=num('f_secondary'),b=num('f_borrow');
  document.getElementById('fin_cl').textContent=fmt(c+l);
  document.getElementById('fin_sec').textContent=fmt(c+l+s);
  document.getElementById('fin_tot').textContent=fmt(c+l+s+b);
  document.getElementById('fin_bor').textContent=fmt(b);
}

function updateCredit(){
  const sc=parseInt(document.getElementById('f_credit').value);
  if(!sc||sc<300||sc>850) return;
  document.getElementById('scoreNum').textContent=sc;
  const pct=((sc-300)/550)*100;
  document.getElementById('scoreBar').style.setProperty('--pct',pct+'%');
  let lbl='Poor';
  if(sc>=800) lbl='Exceptional';
  else if(sc>=740) lbl='Very Good';
  else if(sc>=670) lbl='Good';
  else if(sc>=580) lbl='Fair';
  document.getElementById('scoreLbl').textContent=lbl;
}

function selCard(el,grp){
  el.closest('.scale-grid').querySelectorAll('.scale-card').forEach(c=>c.classList.remove('sel'));
  el.classList.add('sel');
}

function toggleCb(el){
  el.classList.toggle('on');
  el.querySelector('.cb-box').textContent=el.classList.contains('on')?'✓':'';
}

function togglePhase(){
  const t=document.getElementById('phaseToggle');
  const l=document.getElementById('phaseList');
  t.classList.toggle('on');
  l.style.display=t.classList.contains('on')?'block':'none';
}

function updateRadius(){
  const mi=document.getElementById('f_miles').value;
  const zip=document.getElementById('f_zip').value||'—';
  document.getElementById('miles_cur').textContent=mi+' mi';
  document.getElementById('radLbl').textContent='📍 '+mi+' Mile Radius';
  document.getElementById('rad_pr').textContent=mi+' miles';
  document.getElementById('zip_pr').textContent=zip;
  const area=Math.round(Math.PI*mi*mi);
  document.getElementById('area_pr').textContent='~'+area.toLocaleString()+' sq mi';
  const sc=mi/20;
  document.getElementById('ring1').style.cssText=`width:${140*sc+20}px;height:${140*sc+20}px;`;
  document.getElementById('ring2').style.cssText=`width:${80*sc+20}px;height:${80*sc+20}px;`;
  document.getElementById('ring3').style.cssText=`width:${40*sc+10}px;height:${40*sc+10}px;`;
}

document.getElementById('f_zip').addEventListener('input',function(){
  document.getElementById('zip_pr').textContent=this.value||'—';
});

function fillReview(){
  const fn=document.getElementById('f_fname').value;
  const ln=document.getElementById('f_lname').value;
  const name=[fn,ln].filter(Boolean).join(' ')||'Not provided';
  setRv('rv_name',name);
  setRv('rv_email',document.getElementById('f_email').value||'Not provided');
  setRv('rv_phone',document.getElementById('f_phone').value||'Not provided');
  document.getElementById('rv_cash').textContent=fmt(num('f_cash'));
  document.getElementById('rv_liquid').textContent=fmt(num('f_liquid'));
  document.getElementById('rv_secondary').textContent=fmt(num('f_secondary'));
  document.getElementById('rv_borrow').textContent=fmt(num('f_borrow'));
  document.getElementById('rv_rate').textContent=document.getElementById('f_rate').value+'%';
  const cr=document.getElementById('f_credit').value;
  setRv('rv_credit',cr?cr+' ('+creditLbl(parseInt(cr))+')':'Not provided');
  document.getElementById('rv_zip').textContent=document.getElementById('f_zip').value||'64133';
  const mi=document.getElementById('f_miles').value||'10';
  document.getElementById('rv_miles').textContent=mi+' miles';
  document.getElementById('rv_area').textContent='~'+Math.round(Math.PI*mi*mi).toLocaleString()+' sq miles';
  const sc=document.querySelector('#view-1 .scale-card.sel .sc-name');
  const sr=document.querySelector('#view-1 .scale-card.sel .sc-range');
  if(sc) document.getElementById('rv_scale').textContent=sc.textContent+' ('+sr?.textContent+')';
  const cnt=document.querySelectorAll('#view-1 .cb-item.on').length;
  document.getElementById('rv_units').textContent=cnt+' selected';
}

function setRv(id,val){
  const el=document.getElementById(id);
  if(!el) return;
  if(!val||val==='Not provided'){el.textContent='Not provided';el.className='rv-val na';}
  else{el.textContent=val;el.className='rv-val';}
}
function creditLbl(s){
  if(s>=800) return'Exceptional';
  if(s>=740) return'Very Good';
  if(s>=670) return'Good';
  if(s>=580) return'Fair';
  return'Poor';
}

let scanDone=false;
function runScan(){
  if(scanDone) return;
  const dots=document.querySelectorAll('#scanList .scan-dot');
  const rows=document.querySelectorAll('#scanList .scan-row');
  const bar=document.getElementById('scanBar');
  const msg=document.getElementById('scanMsg');
  const status=document.getElementById('scanStatus');
  const res=document.getElementById('results');
  const nxt=document.getElementById('advNext');
  const msgs=['Locating businesses…','Fetching website pricing…','Pulling county tax records…','Querying MO SOS…','Checking REIT filings…','Retrieving cap rates & NOI…','Compiling brokers & USDA B&I lenders…'];
  dots.forEach((d,i)=>{ d.className='scan-dot'; d.className+=i===0?' running':' waiting'; });
  bar.style.width='0%';
  res.style.display='none'; nxt.style.display='none';
  status.textContent='— scanning…';
  let step=0;
  const iv=setInterval(()=>{
    if(step>0){ dots[step-1].className='scan-dot done'; rows[step-1].classList.add('done-row'); }
    if(step<dots.length){
      dots[step].className='scan-dot running';
      bar.style.width=Math.round(((step+1)/dots.length)*100)+'%';
      msg.textContent=msgs[step];
      status.textContent='— '+msgs[step];
      step++;
    } else {
      clearInterval(iv);
      bar.style.width='100%';
      status.textContent='— ✅ Complete!';
      msg.textContent='Scan complete — results ready below.';
      scanDone=true;
      setTimeout(()=>{
        res.style.display='block';
        nxt.style.display='inline-flex';
        res.scrollIntoView({behavior:'smooth',block:'start'});
      },500);
    }
  },850);
}


// =================== DISCLAIMER ===================
function showDisclaimer(){
  const el=document.getElementById('disclaimerOverlay');
  el.style.display='flex';
}
function closeDisclaimer(){
  document.getElementById('disclaimerOverlay').style.display='none';
}
function toggleDisclaimerCb(row){
  const cb=document.getElementById('disclaimerCb');
  const btn=document.getElementById('disclaimerOkBtn');
  const on=cb.textContent==='✓';
  if(on){ cb.textContent=''; cb.style.color='transparent'; cb.style.background='white'; cb.style.borderColor='var(--border-dark)'; btn.style.opacity='0.4'; btn.style.pointerEvents='none'; }
  else  { cb.textContent='✓'; cb.style.color='white'; cb.style.background='var(--green)'; cb.style.borderColor='var(--green-dark)'; btn.style.opacity='1'; btn.style.pointerEvents='auto'; }
}
function acceptDisclaimer(){
  closeDisclaimer();
  disclaimerAccepted=true;
  /* Show Don Knotts celebration then go to step 3 */
  showDonKnotts(3);
}
let disclaimerAccepted=false;
function actuallyGoToStep3(){
  /* Legacy alias — now handled by actuallyGoToStep(3) */
  actuallyGoToStep(3);
}

// =================== SITE SCORING ===================
const siteWeights={front:3,zone:4,util:3,vis:3,flood:3,comp:3};
let siteCount=2;

function recalcSite(n){
  const price=parseFloat((document.getElementById('s'+n+'_price')?.value||'0').replace(/,/g,''))||0;
  const acres=parseFloat(document.getElementById('s'+n+'_acres')?.value)||1;
  const pa=acres>0?Math.round(price/acres):0;
  const paEl=document.getElementById('s'+n+'_peracre');
  if(paEl) paEl.value='$'+pa.toLocaleString();

  const ids=['front','zone','util','vis','flood','comp'];
  let score=0,max=0;
  ids.forEach(k=>{
    const v=parseInt(document.getElementById('s'+n+'_'+k)?.value)||0;
    score+=v; max+=3;
  });
  const badge=document.getElementById('sbadge'+n);
  if(badge){
    badge.textContent=score+'/'+max;
    const pct=score/max;
    if(pct>=0.8){ badge.style.background='var(--green-bg)'; badge.style.borderColor='var(--green-pale)'; badge.style.color='var(--green-dark)'; }
    else if(pct>=0.6){ badge.style.background='var(--gold-pale)'; badge.style.borderColor='#FFD966'; badge.style.color='var(--gold-dark)'; }
    else{ badge.style.background='var(--red-pale)'; badge.style.borderColor='#FFAAAA'; badge.style.color='var(--red)'; }
  }
  updateSiteTable();
}

function gradeFromScore(s,max){
  const p=s/max;
  if(p>=0.85) return'A';
  if(p>=0.70) return'B';
  if(p>=0.55) return'C';
  if(p>=0.40) return'D';
  return'F';
}

function updateSiteTable(){
  const tbody=document.getElementById('siteCompBody');
  if(!tbody) return;
  tbody.innerHTML='';
  const colors=['var(--green-bg)','var(--blue-pale)','var(--gold-pale)','var(--purple-pale)'];
  const borders=['var(--green-pale)','#AADBF5','#FFD966','#D9AAFF'];
  for(let n=1;n<=siteCount;n++){
    const nameEl=document.getElementById('sname'+n);
    const name=nameEl?.textContent||'Site '+n;
    const price=parseFloat((document.getElementById('s'+n+'_price')?.value||'0').replace(/,/g,''))||0;
    const acres=parseFloat(document.getElementById('s'+n+'_acres')?.value)||0;
    const pa=acres>0?Math.round(price/acres):0;
    const ids=['front','zone','util','vis','flood','comp'];
    let score=0;
    const vals=ids.map(k=>parseInt(document.getElementById('s'+n+'_'+k)?.value)||0);
    vals.forEach(v=>score+=v);
    const max=18;
    const grade=gradeFromScore(score,max);
    const gradeColor=grade==='A'?'var(--green-dark)':grade==='B'?'var(--blue-dark)':grade==='C'?'var(--gold-dark)':'var(--red)';
    const lblMap={0:'—',1:'Low',2:'Med',3:'High'};
    const tr=document.createElement('tr');
    tr.innerHTML=`
      <td><div class="biz-name">${name}</div><div class="biz-addr">$${price.toLocaleString()} asking</div></td>
      <td class="val-cell">${acres} ac</td>
      <td class="price-cell">$${price.toLocaleString()}</td>
      <td class="price-cell">$${pa.toLocaleString()}/ac</td>
      ${vals.map(v=>`<td class="price-cell" style="color:${v===3?'var(--green-dark)':v===2?'var(--gold-dark)':'var(--red)'}">${lblMap[v]}</td>`).join('')}
      <td style="font-weight:900;font-size:16px;color:var(--green-dark);text-align:center;background:var(--green-bg);">${score}/${max}</td>
      <td style="font-weight:900;font-size:20px;color:${gradeColor};text-align:center;background:var(--green-bg);">${grade}</td>
    `;
    tbody.appendChild(tr);
  }
}

let nextSiteN=3;
function addSiteCard(){
  if(nextSiteN>4){ document.getElementById('addSiteBtn').style.display='none'; return; }
  const n=nextSiteN++;
  siteCount=n;
  const colors=[null,'var(--green)','var(--blue)','var(--gold)','var(--purple)'];
  const shadows=[null,'var(--green-dark)','var(--blue-dark)','var(--gold-dark)','#9B52C0'];
  const bgColors=[null,'var(--green-bg)','var(--blue-pale)','var(--gold-pale)','var(--purple-pale)'];
  const borColors=[null,'var(--green-pale)','#AADBF5','#FFD966','#D9AAFF'];
  const fgColors=[null,'var(--green-dark)','var(--blue-dark)','var(--gold-dark)','#7730AA'];
  const div=document.createElement('div');
  div.className='site-entry-card';
  div.dataset.site=n;
  div.innerHTML=`
    <div class="site-entry-head">
      <div style="display:flex;align-items:center;gap:10px;">
        <div class="site-num" style="background:${colors[n]};box-shadow:0 3px 0 ${shadows[n]};">${n}</div>
        <div><div class="form-input" contenteditable="true" style="min-width:280px;display:inline-block;padding:8px 14px;font-weight:800;font-size:15px;" id="sname${n}" oninput="recalcSite(${n})">New Candidate Site ${n}</div></div>
      </div>
      <div style="display:flex;gap:8px;align-items:center;">
        <div class="site-score-badge" id="sbadge${n}" style="background:${bgColors[n]};border-color:${borColors[n]};color:${fgColors[n]};">—</div>
      </div>
    </div>
    <div class="site-entry-body">
      <div class="site-criteria-grid">
        <div class="sc-row"><span class="sc-lbl">Acres Available</span><input class="form-input sc-inp" type="number" step="0.5" min="0" value="3.0" id="s${n}_acres" oninput="recalcSite(${n})"><span class="sc-unit">ac</span></div>
        <div class="sc-row"><span class="sc-lbl">Asking Price</span><span class="pfx-sym" style="position:static;transform:none;font-size:14px;">$</span><input class="form-input sc-inp" type="text" value="350,000" id="s${n}_price" oninput="recalcSite(${n})"><span class="sc-unit">total</span></div>
        <div class="sc-row"><span class="sc-lbl">$/Acre</span><input class="form-input sc-inp" type="text" id="s${n}_peracre" readonly style="background:${bgColors[n]};color:${fgColors[n]};font-weight:900;"><span class="sc-unit">est.</span></div>
        <div class="sc-row"><span class="sc-lbl">Road Frontage</span><select class="form-select sc-inp" id="s${n}_front" onchange="recalcSite(${n})"><option value="3">Major highway / signalized</option><option value="2" selected>Secondary arterial</option><option value="1">Residential / low traffic</option></select></div>
        <div class="sc-row"><span class="sc-lbl">Zoning Status</span><select class="form-select sc-inp" id="s${n}_zone" onchange="recalcSite(${n})"><option value="3" selected>Already zoned commercial / industrial</option><option value="2">Requires CUP / variance</option><option value="1">Rezoning required</option><option value="0">Zoning unknown</option></select></div>
        <div class="sc-row"><span class="sc-lbl">Utilities on Site</span><select class="form-select sc-inp" id="s${n}_util" onchange="recalcSite(${n})"><option value="3" selected>Water, sewer, electric at lot line</option><option value="2">Electric only — need well/septic</option><option value="1">No utilities — full extension needed</option></select></div>
        <div class="sc-row"><span class="sc-lbl">Visibility / Traffic</span><select class="form-select sc-inp" id="s${n}_vis" onchange="recalcSite(${n})"><option value="3">Excellent — high daily count, visible from road</option><option value="2" selected>Good — moderate traffic, signage possible</option><option value="1">Poor — hidden / back road</option></select></div>
        <div class="sc-row"><span class="sc-lbl">Flood Zone</span><select class="form-select sc-inp" id="s${n}_flood" onchange="recalcSite(${n})"><option value="3" selected>Zone X — minimal flood risk</option><option value="2">Zone AE — 100yr floodplain, insurable</option><option value="1">Zone VE / floodway — high risk</option><option value="0">Unknown — FEMA check needed</option></select></div>
        <div class="sc-row"><span class="sc-lbl">Competition Proximity</span><select class="form-select sc-inp" id="s${n}_comp" onchange="recalcSite(${n})"><option value="3">No storage within 2 miles</option><option value="2" selected>1–2 competitors within 2 miles</option><option value="1">3+ competitors within 2 miles</option></select></div>
        <div class="sc-row col-2"><span class="sc-lbl">Notes</span><input class="form-input" type="text" placeholder="Parcel #, owner contact, inspection notes…" id="s${n}_notes" style="flex:1;"></div>
      </div>
    </div>`;
  document.getElementById('siteCards').appendChild(div);
  if(nextSiteN>4) document.getElementById('addSiteBtn').style.display='none';
  recalcSite(n);
}

// =================== BUSINESS PLAN CALC ===================
function calcBP(){
  const sqft=parseFloat(document.getElementById('bp_sqft')?.value)||30000;
  const land=parseFloat((document.getElementById('bp_land')?.value||'0').replace(/,/g,''))||425000;
  const bpc=parseFloat(document.getElementById('bp_buildcost')?.value)||55;
  const avgrate=parseFloat(document.getElementById('bp_avgrate')?.value)||89;
  const unitsize=parseFloat(document.getElementById('bp_unitsize')?.value)||120;
  const occ=parseFloat(document.getElementById('bp_occ')?.value)||88;
  const loan=parseFloat((document.getElementById('bp_loan')?.value||'0').replace(/,/g,''))||1400000;
  const rate=parseFloat(document.getElementById('bp_rate')?.value)||7.4;
  const term=parseFloat(document.getElementById('bp_term')?.value)||25;
  const expRatio=parseFloat(document.getElementById('bp_exp')?.value)||38;
  const grow=parseFloat(document.getElementById('bp_grow')?.value)||3;
  const capRate=parseFloat(document.getElementById('bp_cap')?.value)||6.5;

  const units=Math.floor(sqft/unitsize);
  const totalCost=land+(sqft*bpc);
  const grossRevMax=units*avgrate*12;
  const grossRev=grossRevMax*(occ/100);
  const opExp=grossRev*(expRatio/100);
  const noi=grossRev-opExp;

  // monthly mortgage payment
  const mo=rate/100/12;
  const n=term*12;
  const pmt=loan*(mo*Math.pow(1+mo,n))/(Math.pow(1+mo,n)-1);
  const annDebt=pmt*12;

  const cf=noi-annDebt;
  const equity=totalCost-loan;
  const coc=equity>0?(cf/equity)*100:0;
  const val=noi/(capRate/100);

  // break even
  const beRev=(opExp+annDebt);  // revenue needed
  const beGross=beRev/(1-expRatio/100);
  const beOcc=Math.min(100,(beGross/grossRevMax)*100);

  // exit value year 5
  const noi5=noi*Math.pow(1+grow/100,5);
  const exitVal=noi5/(capRate/100);

  // set metrics
  const s=(v)=>{ return v; };
  document.getElementById('bp_units').textContent=units.toLocaleString();
  document.getElementById('bp_totalcost').textContent=fmt(totalCost);
  document.getElementById('bp_grev').textContent=fmt(grossRev);
  document.getElementById('bp_noi').textContent=fmt(noi);
  document.getElementById('bp_debt').textContent=fmt(annDebt);
  const cfEl=document.getElementById('bp_cf');
  cfEl.textContent=fmt(Math.abs(cf))+(cf<0?' (neg.)':'');
  cfEl.style.color=cf>=0?'var(--green-dark)':'var(--red)';
  document.getElementById('bp_coc').textContent=coc.toFixed(1)+'%';
  document.getElementById('bp_val').textContent=fmt(val);
  document.getElementById('bp_beocc').textContent=beOcc.toFixed(1)+'%';
  document.getElementById('bp_exitval').textContent=fmt(exitVal);

  // funding structure
  const downPct=0.27;
  const down=totalCost*downPct;
  const reserves=annDebt*0.5;
  const closing=loan*0.02;
  document.getElementById('bp_equity').textContent=fmt(down);
  document.getElementById('bp_reserves').textContent=fmt(reserves);
  document.getElementById('bp_closing').textContent=fmt(closing);
  document.getElementById('bp_totalequity').textContent=fmt(down+reserves+closing);

  // pro forma table
  const tbody=document.getElementById('proFormaBody');
  if(tbody){
    tbody.innerHTML='';
    const occRamp=[0.55,0.72,0.84,occ/100,Math.min(occ/100+0.02,0.98)];
    for(let yr=1;yr<=5;yr++){
      const occY=occRamp[yr-1];
      const rateY=avgrate*Math.pow(1+grow/100,yr-1);
      const grevY=units*rateY*12*occY;
      const opExpY=grevY*(expRatio/100);
      const noiY=grevY-opExpY;
      const cfY=noiY-annDebt;
      const valY=noiY/(capRate/100);
      const isPos=cfY>=0;
      const tr=document.createElement('tr');
      tr.innerHTML=`
        <td><strong>Year ${yr}</strong>${yr===1?' <span style="font-size:10px;color:var(--muted2);">(ramp-up)</span>':yr===4?' <span style="font-size:10px;color:var(--green-dark);">✓ stabilized</span>':''}</td>
        <td style="font-weight:800;color:${occY>=0.85?'var(--green-dark)':'var(--gold-dark)'};">${(occY*100).toFixed(0)}%</td>
        <td class="price-cell">${fmt(grevY)}</td>
        <td class="price-cell" style="color:var(--muted);">${fmt(opExpY)}</td>
        <td class="price-cell" style="color:var(--green-dark);font-weight:900;">${fmt(noiY)}</td>
        <td class="price-cell" style="color:var(--muted);">${fmt(annDebt)}</td>
        <td style="font-weight:900;font-size:13px;color:${isPos?'var(--green-dark)':'var(--red)'};text-align:center;">${isPos?'':'('}${fmt(Math.abs(cfY))}${isPos?'':')'}</td>
        <td class="price-cell" style="color:var(--blue-dark);font-weight:900;">${fmt(valY)}</td>
      `;
      tbody.appendChild(tr);
    }
  }
}


// =================== RESOURCE FILTER ===================
function filterRes(type, btn) {
  document.querySelectorAll('.res-tab').forEach(t => t.classList.remove('active'));
  btn.classList.add('active');
  const allCards = document.querySelectorAll('.res-card');
  allCards.forEach(card => {
    const types = card.dataset.type || '';
    if (type === 'all') {
      card.style.display = '';
    } else if (type === 'web') {
      card.style.display = types.includes('web') ? '' : 'none';
    } else if (type === 'yt') {
      card.style.display = types.includes('yt') ? '' : 'none';
    } else {
      card.style.display = (types.includes('web') || types.includes('yt')) && types.includes(type) ? '' : 'none';
    }
  });
  // show/hide section headers
  const webSec = document.querySelector('.web-section');
  const ytSec  = document.querySelector('.yt-section');
  if(webSec) webSec.style.display = (type==='yt') ? 'none' : '';
  if(ytSec)  ytSec.style.display  = (type==='web') ? 'none' : '';
}

// init
updateRadius();
updateFin();
recalcSite(1);
recalcSite(2);
calcBP();
</script>
</body>
</html>
